import{$ as G,a0 as le,a1 as q,r as d,a2 as A,a3 as zr,j as s,c as S,a4 as ve,a5 as Qr,a6 as Kr,a7 as Gr,a8 as qr,a9 as Yr,aa as Jr,ab as Xr,ac as xs,ad as Zr,p as ee,ae as ei,af as ti,ag as ni,ah as si,ai as ps,q as De,aj as Y,ak as ri,al as ii,am as Tn,an as Xt,ao as ai,ap as Zt,aq as bs,ar as oi,as as V,at as li}from"./vendor-Kgd_Cf86.js";import{_ as ci,i as ui,H as oe,u as ys,a as ht,t as Mt,r as di,F as mi,b as C,c as hi,L as en,d as se,N as Ge,e as fi,T as Me,f as gi,g as vs,h as xi,j as pi,k as bi,l as yi,m as vi,n as ji,o as wi,p as ki,B as Ni,q as Si}from"./react-dom-AiR1YAI4.js";import{c as Ci,a as Ei,d as Ii,f as Li,i as Ti,n as Pi,p as Ri,t as Ai,v as Mi,z as _i,h as Oi,s as Di,b as Bi,m as Ui,l as Fi,e as Vi,g as $i,j as Hi,k as Wi,o as zi,q as Qi,r as Ki,u as Gi,w as qi,x as Yi,y as Ji,A as Xi,B as Zi,C as ea,D as ta,E as na,F as sa,G as ra,H as ia,I as aa,J as oa,K as la,L as ca,M as ua}from"./locales-Uh0OzjGf.js";import{g as tn,I,a as k,U as js,F as da,b as ws,s as ma,c as Le}from"./Icons-z5ih0VS5.js";import{f as J}from"./auth-PrcDRVv8.js";import{d as ha,f as fa,g as nn,h as ks,l as ga,F as xa}from"./caption-parsing-i_itjgoj.js";import{H as ae}from"./hls-zqvr_1ex.js";import"./language-db-SLM_mCil.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();const pa="modulepreload",ba=function(e){return"https://digitalwayhk.github.io/movie-web-build/"+e},Pn={},Be=function(t,n,r){let i=Promise.resolve();if(n&&n.length>0){const a=document.getElementsByTagName("link");i=Promise.all(n.map(o=>{if(o=ba(o),o in Pn)return;Pn[o]=!0;const l=o.endsWith(".css"),c=l?'[rel="stylesheet"]':"";if(!!r)for(let b=a.length-1;b>=0;b--){const f=a[b];if(f.href===o&&(!l||f.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${c}`))return;const m=document.createElement("link");if(m.rel=l?"stylesheet":pa,l||(m.as="script",m.crossOrigin=""),m.href=o,document.head.appendChild(m),l)return new Promise((b,f)=>{m.addEventListener("load",b),m.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${o}`)))})}))}return i.then(()=>t()).catch(a=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a})};function ya(e={}){const{immediate:t=!1,onNeedRefresh:n,onOfflineReady:r,onRegistered:i,onRegisteredSW:a,onRegisterError:o}=e;let l,c;const u=async(b=!0)=>{await c};async function m(){if("serviceWorker"in navigator){const{Workbox:b}=await Be(()=>import("./workbox-window.prod.es5-prqDwDSL.js"),__vite__mapDeps([]));l=new b("https://digitalwayhk.github.io/movie-web-build/sw.js",{scope:"https://digitalwayhk.github.io/movie-web-build/",type:"classic"}),l.addEventListener("activated",f=>{(f.isUpdate||f.isExternal)&&window.location.reload()}),l.addEventListener("installed",f=>{f.isUpdate||r==null||r()}),l.register({immediate:t}).then(f=>{a?a("https://digitalwayhk.github.io/movie-web-build/sw.js",f):i==null||i(f)}).catch(f=>{o==null||o(f)})}}return c=m(),u}const va=60*60*1e3;ya({immediate:!0,onRegisteredSW(e,t){t&&setInterval(async()=>{if(!(!t.installing&&navigator)||"connection"in navigator&&!navigator.onLine)return;const n=await fetch(e,{cache:"no-store",headers:{cache:"no-store","cache-control":"no-cache"}});(n==null?void 0:n.status)===200&&await t.update()},va)}});let P=function(e){return e.MOVIE="movie",e.SERIES="series",e.ANIME="anime",e}({}),qe=0;const z=G(le(q(e=>({bookmarks:{},updateQueue:[],removeBookmark(t){e(n=>{qe+=1,n.updateQueue.push({id:qe.toString(),action:"delete",tmdbId:t}),delete n.bookmarks[t]})},addBookmark(t){e(n=>{qe+=1,n.updateQueue.push({id:qe.toString(),action:"add",tmdbId:t.tmdbId,type:t.type,title:t.title,year:t.releaseYear,poster:t.poster}),n.bookmarks[t.tmdbId]={type:t.type,title:t.title,year:t.releaseYear,poster:t.poster,updatedAt:Date.now()}})},replaceBookmarks(t){e(n=>{n.bookmarks=t})},clear(){e(t=>{t.bookmarks={}})},clearUpdateQueue(){e(t=>{t.updateQueue=[]})},removeUpdateItem(t){e(n=>{n.updateQueue=[...n.updateQueue.filter(r=>r.id!==t)]})}})),{name:"__MW::bookmarks"})),re={},Ns={};async function ja(){var e,t;for(const[n,r]of Object.values(Ns)){const i=r.versions.sort((u,m)=>u.version-m.version),a=n._raw(),o=a["--version"]&&typeof a["--version"]=="number"?a["--version"]:0,l=i.filter(u=>u.version>=o);let c=a;try{for(const u of l)u.migrate&&(localStorage.setItem(`BACKUP-v${u.version}-${r.key}`,JSON.stringify(c)),c=await u.migrate(c))}catch(u){console.error(`FAILED TO MIGRATE STORE ${r.key}`,u),c=((t=(e=l[l.length-1]).create)==null?void 0:t.call(e))??{}}n.save(c)}}function wa(e){const t=e.key??"",n=e.versions.sort((l,c)=>c.version-l.version)[0];function r(l){return re[t]||(re[t]=[]),re[t].push(l),{destroy(){re[t]=re[t].filter(c=>c===l)}}}function i(){var c;const l=((c=n.create)==null?void 0:c.call(n))??{};return l["--version"]=n.version,l}function a(){const l=localStorage.getItem(t);if(!l)return i();try{return JSON.parse(l)}catch(c){return console.error(`FAILED TO PARSE LOCALSTORAGE FOR KEY ${t}`,c),i()}}function o(l){const c={...l};c["--version"]=n.version,localStorage.setItem(t,JSON.stringify(c)),re[t]||(re[t]=[]),re[t].forEach(u=>u(window.structuredClone(l)))}return{get(){const l=a();return delete l["--version"],l},_raw(){return a()},onChange:r,save:o}}function ka(e){var r;const t=e.versions.sort((i,a)=>i.version-a.version);if(t.forEach((i,a,o)=>{if(a!==0&&i.version!==o[a-1].version+1)throw new Error("Version list of store is not incremental")}),t.forEach(i=>{if(i.version<0)throw new Error("Versions cannot be negative")}),((r=t[0])==null?void 0:r.version)!==0)throw new Error("Version 0 doesn't exist in version list of store");if(!e.versions[e.versions.length-1].create)throw new Error("Missing create function on latest version of store");if(!e.key)throw new Error("storage key not set in store");const n=[...t];n.pop(),n.forEach(i=>{if(!i.migrate)throw new Error(`Migration missing on version ${i.version}`)})}function ft(){const e={versions:[],key:null};return{setKey(t){return e.key=t,this},addVersion(t){return e.versions.push(t),this},build(){ka(e);const t=wa(e);return Ns[e.key??""]=[t,e],t}}}const Rn="https://apis.justwatch.com",Na="https://images.justwatch.com";function Sa(e){if(e===P.MOVIE)return"movie";if(e===P.SERIES)return"show";throw new Error("unsupported type")}function Ca(e){if(e==="movie")return P.MOVIE;if(e==="show")return P.SERIES;throw new Error("unsupported type")}function Ea(e,t){var i,a;const n=Ca(e.object_type);let r;return n===P.SERIES&&(r=(i=e.seasons)==null?void 0:i.sort((o,l)=>o.season_number-l.season_number).map(o=>({id:o.id.toString(),number:o.season_number,title:o.title}))),{title:e.title,id:e.id.toString(),year:(a=e.original_release_year)==null?void 0:a.toString(),poster:e.poster?`${Na}${e.poster.replace("{profile}","s166")}`:void 0,type:n,seasons:r,seasonData:t?{id:t.id.toString(),number:t.season_number,title:t.title,episodes:t.episodes.sort((o,l)=>o.episode_number-l.episode_number).map(o=>({id:o.id.toString(),number:o.episode_number,title:o.title}))}:void 0}}const Ia="4.2.5",La="https://discord.movie-web.app",Ta="https://github.com/movie-web/movie-web",Pa="https://ko-fi.com/movieweb",Ra="G-44YVXRL61C",Aa="https://backend.movie-web.app";var ue={VITE_APP_DOMAIN:"https://digitalwayhk.github.io/movie-web-build",VITE_CORS_PROXY_URL:"https://digitalwayhk.github.io/movie-web-build",VITE_PWA_ENABLED:"true",BASE_URL:"https://digitalwayhk.github.io/movie-web-build/",MODE:"production",DEV:!1,PROD:!0,SSR:!1,PACKAGE_VERSION:"4.2.5"};const Ma={TMDB_READ_API_KEY:ue.VITE_TMDB_READ_API_KEY,APP_VERSION:void 0,GITHUB_LINK:void 0,DONATION_LINK:void 0,DISCORD_LINK:void 0,DMCA_EMAIL:ue.VITE_DMCA_EMAIL,CORS_PROXY_URL:"https://digitalwayhk.github.io/movie-web-build",NORMAL_ROUTER:ue.VITE_NORMAL_ROUTER,BACKEND_URL:ue.VITE_BACKEND_URL,DISALLOWED_IDS:ue.VITE_DISALLOWED_IDS,TURNSTILE_KEY:ue.VITE_TURNSTILE_KEY,CDN_REPLACEMENTS:ue.VITE_CDN_REPLACEMENTS};function _a(e){var n;let t=(n=window==null?void 0:window.__CONFIG__)==null?void 0:n[`VITE_${e}`];return t!=null&&t.length===0&&(t=void 0),Ma[e]??t??void 0}function ie(e,t){var n;return((n=_a(e))==null?void 0:n.toString())??t??""}function _(){const e=ie("DMCA_EMAIL"),t=ie("TURNSTILE_KEY");return{APP_VERSION:Ia,GITHUB_LINK:Ta,DONATION_LINK:Pa,DISCORD_LINK:La,DMCA_EMAIL:e.length>0?e:null,BACKEND_URL:ie("BACKEND_URL",Aa),TMDB_READ_API_KEY:ie("TMDB_READ_API_KEY"),PROXY_URLS:ie("CORS_PROXY_URL").split(",").map(n=>n.trim()),NORMAL_ROUTER:ie("NORMAL_ROUTER","false")==="true",TURNSTILE_KEY:t.length>0?t:null,DISALLOWED_IDS:ie("DISALLOWED_IDS","").split(",").map(n=>n.trim()).filter(n=>n.length>0),CDN_REPLACEMENTS:ie("CDN_REPLACEMENTS","").split(",").map(n=>n.split(":").map(r=>r.trim()).filter(r=>r.length>0)).filter(n=>n.length===2)}}let K=function(e){return e.MOVIE="movie",e.TV="tv",e}({});const Oa="https://backend.movie-web.app/metrics/providers",Da="https://backend.movie-web.app/metrics/captcha",Ba=()=>zr(32);function Ss(e,t){const n=e.toString(),r=(e.stack??"").split(`
`,t+1);return r.pop(),`${n}

${r.join(`
`)}`}async function Ua(e){return A(Oa,{method:"POST",body:{items:e,batchId:Ba()}})}const Fa={success:"success",notfound:"notfound",failure:"failed",pending:null,waiting:null};function ye(e,t,n,r,i){var c,u;const a=(c=e.episode)==null?void 0:c.tmdbId,o=(u=e.season)==null?void 0:u.tmdbId;let l;return i instanceof Error&&(l=i),{status:r,providerId:t,title:e.title,tmdbId:e.tmdbId,type:e.type,embedId:n??void 0,episodeId:a,seasonId:o,errorMessage:l==null?void 0:l.message,fullError:l?Ss(l,5):void 0}}function An(e,t,n){const r=Fa[n.status];if(!r)return null;let i,a;e.type==="show"&&(i=e.episode.tmdbId,a=e.season.tmdbId);let o;return n.error instanceof Error&&(o=n.error),{status:r,providerId:t,title:e.title,tmdbId:e.tmdbId,type:e.type,embedId:n.embedId,episodeId:i,seasonId:a,errorMessage:n.reason??(o==null?void 0:o.message),fullError:o?Ss(o,5):void 0}}function Ym(e,t,n){const r=[];return t.forEach(i=>{const a=n[i.id];i.children.forEach(l=>{const c=n[l];if(!c.embedId)return;const u=An(e,a.id,c);u&&r.push(u)});const o=An(e,a.id,a);o&&r.push(o)}),r}function Cs(){return{report:d.useCallback(t=>{t.length!==0&&Ua(t).catch(()=>{})},[])}}function Mn(e){A(Da,{method:"POST",body:{success:e}}).catch(()=>{})}const rt=G(q((e,t)=>({isInWidget:!1,turnstiles:[],cbs:[],processToken(n,r){const i=t().cbs,a=t().turnstiles.find(o=>o.id===r);(a==null?void 0:a.id)===r&&(i.forEach(o=>o(n)),e(o=>{o.cbs=[]}))},getToken(){return new Promise((n,r)=>{e(i=>{i.cbs=[...i.cbs,a=>{a?n(a):r(new Error("Failed to get token"))}]})})},setTurnstile(n,r,i){e(a=>{a.turnstiles=a.turnstiles.filter(o=>o.id!==n),r&&a.turnstiles.push({controls:r,isInPopout:i,id:n})})}})));function Es(){const e=rt.getState().turnstiles,t=e.find(n=>n.isInPopout);return t||e[0]}function Va(){return!!Es()}async function $a(){const e=Es();try{window.turnstile.execute(document.querySelector(`#${e.id}`),{});const t=await rt.getState().getToken();return Mn(!0),t}catch(t){throw Mn(!1),t}}function Is(e){const t=_().TURNSTILE_KEY,n=d.useRef(null),r=rt(a=>a.setTurnstile),i=rt(a=>a.processToken);return t?s.jsx("div",{className:S({hidden:!e.isInPopout}),children:s.jsx(ci,{sitekey:t,onLoad:(a,o)=>{n.current=a,r(a,o,!!e.isInPopout)},onError:()=>{const a=n.current;a&&i(null,a)},onVerify:a=>{var l;const o=n.current;o&&(i(a,o),(l=e.onUpdateShow)==null||l.call(e,!1))},onBeforeInteractive:()=>{var a;(a=e.onUpdateShow)==null||a.call(e,!0)},refreshExpired:"never",execution:"render"})}):null}let it=null,Te=null;function Jm(e){it=e}function gt(){return it??[]}function sn(e){Te=e}function Ha(){if(!Te)return null;try{const e=Qr(Te);if(!e.exp)return`jwt|${Te}`;if(Date.now()/1e3<e.exp)return`jwt|${Te}`}catch{}return null}async function Xm(e){if(it)return;it=(await _s(`${e}/metadata`)).flat()}function _n(e){let t={};return e.type==="show"&&(t={episodeNumber:e.episode.number.toString(),episodeTmdbId:e.episode.tmdbId,seasonNumber:e.season.number.toString(),seasonTmdbId:e.season.tmdbId}),{type:e.type,releaseYear:e.releaseYear.toString(),imdbId:e.imdbId,tmdbId:e.tmdbId,title:e.title,...t}}function Ye(e,t){Object.entries(t).forEach(n=>{n[1]&&e.searchParams.set(n[0],n[1])})}function _t(e){const t=n=>new URL(`${e}${n}`);return{scrapeSource(n,r){const i=t("/scrape/source");return Ye(i,_n(r)),Ye(i,{id:n}),i.toString()},scrapeAll(n){const r=t("/scrape");return Ye(r,_n(n)),r.toString()},scrapeEmbed(n,r){const i=t("/scrape/embed");return Ye(i,{id:n,url:r}),i.toString()}}}async function rn(){let e=Ha();return!e&&Va()&&(e=`turnstile|${await $a()}`),e}function On(e){return e.length===0?{}:JSON.parse(e)}async function Ot(e,t){const n=await rn(),r=new URL(e);n&&r.searchParams.set("token",n);const i=new EventSource(r.toString());let a,o;const l=new Promise((c,u)=>{o=c,a=u});return t.forEach(c=>{i.addEventListener(c,u=>{i.close(),o(On(u.data))})}),i.addEventListener("token",c=>{sn(On(c.data))}),i.addEventListener("error",c=>{if(i.close(),c.data){const u=JSON.parse(c.data);let m=new Error("scrape error");u.name===ve.name&&(m=new ve("Notfound from server")),Object.assign(m,u),a(m);return}console.error("Failed to connect to SSE",c),a(c)}),i.addEventListener("message",c=>{if(!c){i.close();return}setTimeout(()=>{a(new Error("SSE closed improperly"))},1e3)}),{promise:()=>l,on(c,u){i.addEventListener(c,m=>u(JSON.parse(m.data)))}}}const F=G(le(q(e=>({account:null,backendUrl:null,proxySet:null,setAccount(t){e(n=>{n.account=t})},removeAccount(){e(t=>{t.account=null})},setBackendUrl(t){e(n=>{n.backendUrl=t})},setProxySet(t){e(n=>{n.proxySet=t})},setAccountProfile(t){e(n=>{n.account&&(n.account.profile=t)})},updateAccount(t){e(n=>{n.account&&(n.account={...n.account,...t})})},updateDeviceName(t){e(n=>{n.account&&(n.account.deviceName=t)})}})),{name:"__MW::auth"})),Wa=_().PROXY_URLS,za=["proxy","api"];function Dn(e){try{return!!new URL(e)}catch{return!1}}function Qa(e){return za.includes(e)}function Ka(e){const t=e.split(";").map(n=>n.split("=",2).filter(r=>r.length!==0)).filter(n=>n.length===2);return Object.fromEntries(t)}function Ls(){const e=F.getState().proxySet??Wa,t=[];return e.forEach(n=>{if(!n.startsWith("|")&&Dn(n)){t.push({url:n,type:"proxy"});return}const r=/^\|([^|]+)\|(.*)$/g.exec(n);if(!r||!r[2]||!Dn(r[2]))return;const a=Ka(r[1]).type??"proxy";Qa(a)&&t.push({url:r[2],type:a})}),t}function Ts(){return Ls().filter(e=>e.type==="proxy").map(e=>e.url)}function Ga(){return Ls().filter(e=>e.type==="api").map(e=>e.url)}function Ps(e){let t=-1;return()=>{const n=e();(t===-1||t>=n.length)&&(t=Math.floor(Math.random()*n.length));const r=n[t];return t=(t+1)%n.length,r}}const Rs=Ps(Ts),As=Ps(Ga);async function qa(e,t){const n=await rn(),r=new Headers(t==null?void 0:t.headers);n&&r.set("X-Token",n);const i=await fetch(e,t?{...t,headers:r}:void 0),a=i.headers.get("X-Token");return a&&sn(a),i}function Ya(){return async(t,n)=>Yr(Rs(),qa)(t,n)}const Dt=Kr({fetcher:Gr(fetch),proxiedFetcher:Ya(),target:qr.BROWSER}),Ms=A.create({retry:0});function Bn(e,t){let n=e;return Object.entries(t).forEach(r=>{let[i,a]=r;n=n.replace(`{${i}}`,encodeURIComponent(a))}),n}function _s(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Ms(e,t)}async function Os(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=(n==null?void 0:n.baseURL)??"";r.length>0&&r.endsWith("/")&&t.startsWith("/")?r+=t.slice(1):r.length>0&&!r.endsWith("/")&&!t.startsWith("/")?r+=`/${t}`:r+=t;const i=new URL(r);Object.entries((n==null?void 0:n.params)??{}).forEach(l=>{let[c,u]=l;i.searchParams.set(c,u)}),Object.entries((n==null?void 0:n.query)??{}).forEach(l=>{let[c,u]=l;i.searchParams.set(c,u)});let a=n.headers??{};const o=await rn();return o&&(a={...a,"X-Token":o}),Ms(e,{...n,baseURL:void 0,params:{destination:i.toString()},query:{},headers:a,onResponse(l){var u;const c=l.response.headers.get("X-Token");c&&sn(c),(u=n.onResponse)==null||u.call(n,l)}})}function Bt(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Os(Rs(),e,t)}function at(e){if(e===P.MOVIE)return K.MOVIE;if(e===P.SERIES)return K.TV;throw new Error("unsupported type")}function ot(e){if(e==="movie")return P.MOVIE;if(e==="show")return P.SERIES;throw new Error("unsupported type")}function Ue(e){if(e===K.MOVIE)return P.MOVIE;if(e===K.TV)return P.SERIES;throw new Error("unsupported type")}function Ja(e){if(e===K.MOVIE)return"movie";if(e===K.TV)return"show";throw new Error("unsupported type")}function Xa(e,t){var i,a;const n=Ue(e.object_type);let r;return n===P.SERIES&&(r=(i=e.seasons)==null?void 0:i.sort((o,l)=>o.season_number-l.season_number).map(o=>({title:o.title,id:o.id.toString(),number:o.season_number}))),{title:e.title,id:e.id.toString(),year:(a=e.original_release_year)==null?void 0:a.toString(),poster:e.poster,type:n,seasons:r,seasonData:t?{id:t.id.toString(),number:t.season_number,title:t.title,episodes:t.episodes.sort((o,l)=>o.episode_number-l.episode_number).map(o=>({id:o.id.toString(),number:o.episode_number,title:o.title,air_date:o.air_date}))}:void 0}}function Za(e){const t=Ja(e.object_type);return{title:e.title,id:e.id.toString(),year:e.original_release_year??0,poster:e.poster,type:t}}function Pe(e,t,n){return["tmdb",at(e),t,Jr(n,{lower:!0,strict:!0})].join("-")}function eo(e){return Pe(ot(e.type),e.id,e.title)}function Zm(e){const[t,n,r]=e.split("-",3);if(t!=="tmdb")return null;let i;try{i=Ue(n)}catch{return null}return{type:i,id:r}}const to="https://api.themoviedb.org/3",no={accept:"application/json",Authorization:`Bearer ${_().TMDB_READ_API_KEY}`};async function _e(e,t){return await _s(encodeURI(e),{headers:no,baseURL:to,params:{...t}})}async function Ds(e){return(await _e("search/multi",{query:e,include_adult:!1,language:"en-US",page:1})).results.filter(r=>r.media_type===K.MOVIE||r.media_type===K.TV)}async function so(e){const t=await Ds(e);if(t.length===0)return;const n=t[0],r=n.media_type===K.MOVIE?n.title:n.name;return`/media/${Pe(Ue(n.media_type),n.id.toString(),r)}`}function xt(e,t){if(t===K.MOVIE)return _e(`/movie/${e}`,{append_to_response:"external_ids"});if(t===K.TV)return _e(`/tv/${e}`,{append_to_response:"external_ids"});throw new Error("Invalid media type")}function lt(e){if(e)return`https://image.tmdb.org/t/p/w342/${e}`}async function Bs(e,t){return(await _e(`/tv/${e}/season/${t}`)).episodes.map(r=>({id:r.id,episode_number:r.episode_number,title:r.name,air_date:r.air_date}))}async function Us(e){const n=(await _e(`/find/${e}`,{external_source:"imdb_id"})).movie_results[0];if(n)return n.id.toString()}function ro(e,t){if(Ue(t)===P.SERIES){const i=e;return{title:i.name,poster:lt(i.poster_path),id:i.id,original_release_year:new Date(i.first_air_date).getFullYear(),object_type:t}}const r=e;return{title:r.title,poster:lt(r.poster_path),id:r.id,original_release_year:new Date(r.release_date).getFullYear(),object_type:t}}function io(e,t){if(t===P.MOVIE){const n=e;return{id:e.id,title:n.title,object_type:at(t),poster:lt(n.poster_path)??void 0,original_release_year:new Date(n.release_date).getFullYear()}}if(t===P.SERIES){const n=e;return{id:e.id,title:n.name,object_type:at(t),seasons:n.seasons.map(r=>({id:r.id,season_number:r.season_number,title:r.name})),poster:lt(n.poster_path)??void 0,original_release_year:new Date(n.first_air_date).getFullYear()}}throw new Error("unsupported type")}async function Ut(e,t,n){const r=await xt(t,at(e));if(!r)return null;const i=r.external_ids.imdb_id??void 0;let a;if(e===P.SERIES){const c=r.seasons;let u=c.find(m=>m.id.toString()===n);if(u||(u=c.find(m=>m.season_number===1)),u){const m=await Bs(r.id.toString(),u.season_number);a={id:u.id.toString(),season_number:u.season_number,title:u.name,episodes:m}}}const o=io(r,e);if(!o)return null;const l=Xa(o,a);return l?{meta:l,imdbId:i,tmdbId:t}:null}async function Fs(e,t,n){var c,u,m,b,f;const r=Sa(e);let i;try{const h=Bn("/content/titles/{type}/{id}/locale/en_US",{type:r,id:t});i=await Bt(h,{baseURL:Rn})}catch(h){if(h instanceof Xr&&(h.statusCode===400||h.statusCode===404))return null;throw h}let a=(c=i.external_ids.find(h=>h.provider==="imdb_latest"))==null?void 0:c.external_id;a||(a=(u=i.external_ids.find(h=>h.provider==="imdb"))==null?void 0:u.external_id);let o=(m=i.external_ids.find(h=>h.provider==="tmdb_latest"))==null?void 0:m.external_id;o||(o=(b=i.external_ids.find(h=>h.provider==="tmdb"))==null?void 0:b.external_id);let l;if(i.object_type==="show"){const h=n??((f=i.seasons)==null?void 0:f[0].id.toString())??"",g=Bn("/content/titles/show_season/{id}/locale/en_US",{id:h});l=await Bt(g,{baseURL:Rn})}return{meta:Ea(i,l),imdbId:a,tmdbId:o}}function Ft(e){return!!(e.startsWith("/media/JW")||e.startsWith("/media/tmdb-show"))}function ao(e){return!!e.startsWith("/media/tmdb-show")}async function oo(e){if(!Ft(e))return;const t=e.split("/").slice(2),[,n,r]=t[0].split("-",3),i=t.slice(1).map(u=>`/${u}`).join("");if(ao(e)){const u=await xt(r,K.TV);return`/media/${Pe(P.SERIES,u.id.toString(),u.name)}${i}`}const a=Ue(n),o=await Fs(a,r);if(!o)return;const{tmdbId:l,imdbId:c}=o;if(!(!l&&!c)&&c&&a===P.MOVIE){const u=await Us(c);if(u)return`/media/${Pe(a,u,o.meta.title)}`;if(l)return`/media/${Pe(a,l,o.meta.title)}`}}class Vs{constructor(){this.INTERVAL_MS=2*60*1e3,this._interval=null,this._compare=null,this._storage=[]}initialize(){if(this._interval)throw new Error("cache is already initialized");this._interval=setInterval(()=>{const t=new Date;this._storage.filter(n=>!(n.expiry<t))},this.INTERVAL_MS)}destroy(){this._interval&&clearInterval(this._interval),this.clear()}setCompare(t){this._compare=t}has(t){return!!this.get(t)}get(t){if(!this._compare)throw new Error("Compare function not set");const n=this._storage.find(r=>this._compare&&this._compare(r.key,t));if(n)return n.value}set(t,n,r){if(!this._compare)throw new Error("Compare function not set");const i=this._storage.find(o=>this._compare&&this._compare(o.key,t)),a=new Date(new Date().getTime()+r*1e3);if(i){i.key=t,i.value=n,i.expiry=a;return}this._storage.push({key:t,value:n,expiry:a})}remove(t){if(!this._compare)throw new Error("Compare function not set");this._storage.filter(n=>!(this._compare&&this._compare(n.key,t)))}clear(){this._storage=[]}}const Re=new Vs;Re.setCompare((e,t)=>e.searchQuery.trim()===t.searchQuery.trim());Re.initialize();async function $s(e){if(Re.has(e))return Re.get(e);const{searchQuery:t}=e,r=(await Ds(t)).map(l=>{const c=ro(l,l.media_type);return Za(c)}),i=r.filter(l=>l.poster),a=r.filter(l=>!l.poster),o=i.concat(a);return Re.set(e,o,3600),o}function Un(e){return e.trim().toLowerCase().replace(/['":]/g,"").replace(/[^a-zA-Z0-9]+/g,"_")}function lo(e,t){return Un(e)===Un(t)}async function Hs(e,t){const n=(a,o)=>Math.abs(a-o)<=1,r={},i=await Promise.all(Object.values(e).map(async a=>{const o=Number(a.year.toString().split("-")[0]),c=(await $s({searchQuery:`${a.title} ${o}`})).find(u=>n(Number(u.year),o)&&lo(u.title,a.title));if(!c){console.error(`No item found for migration: ${a.title}`);return}return{id:a.mediaId,data:c}}));for(const a of i.filter(Boolean)){if(!a)continue;let o=[["0","0"]];if(a.data.type==="show"){const l=await Ut(P.SERIES,a.data.id);if(!l||!(l!=null&&l.meta.seasons))return;o=[...new Set(t!=null&&t.items?t.items.filter(m=>m.mediaId===a.id).map(m=>m.seasonId):["0"])].map(m=>{var b,f;return{num:m,season:(f=(b=l.meta)==null?void 0:b.seasons)==null?void 0:f[Math.max(0,m-1)]}}).map(m=>{var b;return m?[m.num,(b=m==null?void 0:m.season)==null?void 0:b.id]:[]}).filter(m=>m.length>0)}r[a.id]||(r[a.id]={}),await Promise.all(o.map(async l=>{let[c,u]=l;c&&(r[a.id][c]=await Ut(ot(a.data.type),a.data.id,u==="0"||u===null?void 0:u))}))}return r}async function co(e){const t=e;if(!t)return;const n={};t.bookmarks.forEach(a=>{n[a.mediaId]||(n[a.mediaId]=a)});const r=await Hs(n);return r?{bookmarks:Object.keys(r).map(a=>r[a][0]).map(a=>a==null?void 0:a.meta).filter(Boolean)}:void 0}async function uo(e){var o,l,c,u;const t=e;if(!t)return;const n={};t.items.forEach(m=>{n[m.mediaId]||(n[m.mediaId]=m)});const r=await Hs(n,t);if(!r)return;const i={...t,items:[]},a=Date.now();for(const m of t.items)if(m.mediaType==="movie"){if(!((o=r[m.mediaId][0])!=null&&o.meta))continue;const b={item:{meta:(l=r[m.mediaId][0])==null?void 0:l.meta},progress:m.progress,percentage:m.percentage,watchedAt:Date.now()};t.items=t.items.filter(f=>JSON.stringify(f)!==JSON.stringify(m)),i.items.push(b)}else if(m.mediaType==="series"){if(!((c=r[m.mediaId][m.seasonId])!=null&&c.meta))continue;const b=(u=r[m.mediaId][m.seasonId])==null?void 0:u.meta;if(b.type!=="series")return;const f={item:{meta:b,series:{episode:Number(m.episodeId),season:Number(m.seasonId),seasonId:b.seasonData.id,episodeId:b.seasonData.episodes[Number(m.episodeId)-1].id}},progress:m.progress,percentage:m.percentage,watchedAt:a+Number(m.seasonId)*1e3+Number(m.episodeId)};if(i.items.find(h=>{var g,y;return h.item.meta.id===f.item.meta.id&&((g=h.item.series)==null?void 0:g.episodeId)===((y=f.item.series)==null?void 0:y.episodeId)}))continue;t.items=t.items.filter(h=>JSON.stringify(h)!==JSON.stringify(m)),i.items.push(f)}return i}function mo(e){return e!=null}async function Ws(e,t){const n=await Fs(t,e);if(!n)return;const{tmdbId:r,imdbId:i}=n;if(!(!r&&!i)){if(i&&t===P.MOVIE){const a=await Us(i);if(a)return a}if(r)return r}}async function ho(e){const t=e.bookmarks.map(async n=>({...n,id:await Ws(n.id,n.type).catch(()=>{})}));return{bookmarks:(await Promise.all(t)).filter(n=>n.id)}}async function fo(e){return{items:(await Promise.all(e.items.map(async n=>{try{const r=await Ws(n.item.meta.id,n.item.meta.type);if(!r)return null;const i=structuredClone(n);if(i.item.meta.id=r,i.item.series){const a=i.item.series,l=(await xt(r,K.TV)).seasons.find(m=>m.season_number===a.season);if(!l)return null;const u=(await Bs(r,l.season_number)).find(m=>m.episode_number===a.episode);if(!u)return null;i.item.series.episodeId=u.id.toString(),i.item.series.seasonId=l.id.toString()}return i}catch{return null}}))).filter(mo)}}const go={[P.ANIME]:null,[P.MOVIE]:"movie",[P.SERIES]:"show"};ft().setKey("mw-bookmarks").addVersion({version:0,migrate(e){return co(e)}}).addVersion({version:1,migrate(e){return ho(e)}}).addVersion({version:2,migrate(e){const t={};for(const n of e.bookmarks){const r=go[n.type];r&&(t[n.id]={title:n.title,year:n.year?Number(n.year):void 0,poster:n.poster,type:r,updatedAt:Date.now()})}return z.getState().replaceBookmarks(t),{bookmarks:[]}}}).addVersion({version:3,create(){return{bookmarks:[]}}}).build();const xo={description:"movie-web is a web application that searches the internet for streams. The team aims for a mostly minimalistic approach to consuming content.",faqTitle:"Common questions",q1:{body:"movie-web does not host any content. When you click on something to watch, the internet is searched for the selected media (On the loading screen and in the 'video sources' tab you can see which source you're using). Media never gets uploaded by movie-web, everything is through this searching mechanism.",title:"Where does the content come from?"},q2:{body:"It's not possible to request a show or movie, movie-web does not manage any content. All content is viewed through sources on the internet.",title:"Where can I request a show or movie?"},q3:{body:"Our search results are powered by The Movie Database (TMDB) and display regardless of whether our sources actually have the content.",title:"The search results display the show or movie, why can't I play it?"},title:"About movie-web"},po={copied:"Copied",copy:"Copy"},bo={createAccount:"Don't have an account yet? <0>Create an account.</0>",deviceNameLabel:"Device name",deviceNamePlaceholder:"Personal phone",generate:{description:"Your passphrase acts as your username and password. Make sure to keep it safe as you will need to enter it to login to your account",next:"I have saved my passphrase",passphraseFrameLabel:"Passphrase",title:"Your passphrase"},hasAccount:"Already have an account? <0>Login here.</0>",login:{description:"Please enter your passphrase to login to your account",deviceLengthError:"Please enter a device name",passphraseLabel:"12-Word passphrase",passphrasePlaceholder:"Passphrase",submit:"Login",title:"Login to your account",validationError:"Incorrect or incomplete passphrase"},register:{information:{color1:"Profile color one",color2:"Profile color two",header:"Enter a name for your device and pick colours and a user icon of your choosing",icon:"User icon",next:"Next",title:"Account information"}},trust:{failed:{text:"Did you configure it correctly?",title:"Failed to reach server"},host:"You are connecting to <0>{{hostname}}</0> - please confirm you trust it before making an account",no:"Go back",title:"Do you trust this server?",yes:"I trust this server"},verify:{description:"Please enter your passphrase from earlier to confirm you have saved it and to create your account",invalidData:"Data is not valid",noMatch:"Passphrase doesn't match",passphraseLabel:"Your 12-word passphrase",recaptchaFailed:"ReCaptcha validation failed",register:"Create account",title:"Confirm your passphrase"}},yo={badge:"It broke",details:"Error details",reloadPage:"Reload the page",showError:"Show error details",title:"We encountered an error!"},vo={legal:{disclaimer:"Disclaimer",disclaimerText:"movie-web does not host any files, it merely links to 3rd party services. Legal issues should be taken up with the file hosts and providers. movie-web is not responsible for any media files shown by the video providers."},links:{discord:"Discord",dmca:"DMCA",github:"GitHub"},tagline:"Watch your favourite shows and movies with this open source streaming app."},jo={name:"movie-web",pages:{about:"About",dmca:"DMCA",login:"Login",pagetitle:"{{title}} - movie-web",register:"Register",settings:"Settings"}},wo={bookmarks:{sectionTitle:"Bookmarks"},continueWatching:{sectionTitle:"Continue Watching"},mediaList:{stopEditing:"Stop editing"},search:{allResults:"That's all we have!",failed:"Failed to find media, try again!",loading:"Loading...",noResults:"We couldn't find anything!",placeholder:"What do you want to watch?",sectionTitle:"Search results"},titles:{day:{default:"What would you like to watch this afternoon?",extra:["Feeling adventurous? Jurassic Park might be the perfect choice."]},morning:{default:"What would you like to watch this morning?",extra:["I hear Before Sunrise is good"]},night:{default:"What would you like to watch tonight?",extra:["Tired? I hear The Exorcist is good."]}}},ko={episodeDisplay:"S{{season}} E{{episode}}",types:{movie:"Movie",show:"Show"}},No={banner:{offline:"Check your internet connection"},menu:{about:"About us",donation:"Donate",logout:"Log out",register:"Sync to cloud",settings:"Settings",support:"Support"}},So={badge:"Not found",goHome:"Back to home",message:"We looked everywhere: under the bins, in the closet, behind the proxy but ultimately couldn't find the page you are looking for.",title:"Couldn't find that page"},Co={close:"Close"},Eo={turnstile:{verifyingHumanity:"Verifying your humanity...",title:"We need to verify that you're human.",description:"Please verify that you are human by completing the Captcha on the right. This is to keep movie-web safe!",error:"Failed to verify your humanity. Please try again."},back:{default:"Back to home",short:"Back"},casting:{enabled:"Casting to device..."},menus:{settings:{videoSection:"Video settings",experienceSection:"Viewing experience",enableSubtitles:"Enable Subtitles",subtitleItem:"Subtitle settings",sourceItem:"Video sources",playbackItem:"Playback settings",downloadItem:"Download",qualityItem:"Quality"},episodes:{button:"Episodes",loadingTitle:"Loading...",loadingList:"Loading...",loadingError:"Error loading season",emptyState:"There are no episodes in this season, check back later!",episodeBadge:"E{{episode}}",unairedEpisodes:"One or more episodes in this season have been disabled because they haven't been aired yet."},sources:{title:"Sources",unknownOption:"Unknown",noStream:{title:"No stream",text:"This source has no streams for this movie or show."},noEmbeds:{title:"No embeds found",text:"We were unable to find any embeds, please try a different source."},failed:{title:"Failed to scrape",text:"There was an error while trying to find any videos, please try a different source."}},subtitles:{title:"Subtitles",customizeLabel:"Customize",settings:{fixCapitals:"Fix capitalization",delay:"Subtitle delay",backlink:"Custom subtitles"},customChoice:"Select subtitle from file",offChoice:"Off",unknownLanguage:"Unknown"},downloads:{disclaimer:"Downloads are taken directly from the provider. movie-web does not have control over how the downloads are provided.",downloadSubtitle:"Download current subtitle",downloadPlaylist:"Download playlist",downloadVideo:"Download video",hlsDisclaimer:"Downloads are taken directly from the provider. movie-web does not have control over how the downloads are provided. Please note that you are downloading an HLS playlist, this is intended for users familiar with advanced multimedia streaming.",onAndroid:{1:"To download on Android, click the download button then, on the new page, <bold>tap and hold</bold> on the video, then select <bold>save</bold>.",shortTitle:"Download / Android",title:"Downloading on Android"},onIos:{1:"To download on iOS, click the download button then, on the new page, click <bold><ios_share /></bold>, then <bold>Save to Files <ios_files /></bold>.",shortTitle:"Download / iOS",title:"Downloading on iOS"},onPc:{1:"On PC, click the download button then, on the new page, right click the video and select <bold>Save video as</bold>",shortTitle:"Download / PC",title:"Downloading on PC"},title:"Download"},playback:{speedLabel:"Playback speed",title:"Playback settings"},quality:{automaticLabel:"Automatic quality",hint:"You can try <0>switching source</0> to get different quality options.",iosNoQuality:"Due to Apple-defined limitations, quality selection is not available on iOS for this source. You can try <0>switching to another source</0> to get different quality options.",title:"Quality"}},metadata:{failed:{badge:"Failed",homeButton:"Go home",text:"Could not load the media's metadata from TMDB. Please check whether TMDB is down or blocked on your internet connection.",title:"Failed to load metadata"},api:{text:"Could not load API metadata, please check your internet connection.",title:"Failed to load API metadata"},notFound:{badge:"Not found",homeButton:"Back to home",text:"We couldn't find the media you requested. Either it's been removed or you tampered with the URL.",title:"Couldn't find that media."}},nextEpisode:{cancel:"Cancel",next:"Next episode"},playbackError:{badge:"Playback error",errors:{errorAborted:"The fetching of the media was aborted by the user's request.",errorDecode:"Despite having previously been determined to be usable, an error occurred while trying to decode the media resource, resulting in an error.",errorGenericMedia:"Unknown media error occurred.",errorNetwork:"Some kind of network error occurred which prevented the media from being successfully fetched, despite having previously been available.",errorNotSupported:"The media or media provider object is not supported."},homeButton:"Go home",text:"There was an error trying to play the media. Please try again.",title:"Failed to play video!"},scraping:{items:{failure:"Error occurred",notFound:"Doesn't have the video",pending:"Checking for videos..."},notFound:{badge:"Not found",detailsButton:"Show details",homeButton:"Go home",text:"We have searched through our providers and cannot find the media you are looking for! We do not host the media and have no control over what is available. Please click 'Show details' below for more details.",title:"We couldn't find that"}},time:{regular:"{{timeWatched}} / {{duration}}",remaining:"{{timeLeft}} left • Finish at {{timeFinished, datetime}}",shortRegular:"{{timeWatched}}",shortRemaining:"-{{timeLeft}}"}},Io={dmca:{text:"Welcome to movie-web's DMCA contact page! We respect intellectual property rights and want to address any copyright concerns swiftly. If you believe your copyrighted work has been improperly used on our platform, please send a detailed DMCA notice to the email below. Please include a description of the copyrighted material, your contact details, and a statement of good faith belief. We're committed to resolving these matters promptly and appreciate your cooperation in keeping movie-web a place that respects creativity and copyrights.",title:"DMCA"},loadingApp:"Loading application",loadingUser:"Loading your profile",loadingUserError:{logout:"Logout",reset:"Reset custom server",text:"Failed to load your profile",textWithReset:"Failed to load your profile from your custom server, want to reset back to the default server?"},migration:{failed:"Failed to migrate your data.",inProgress:"Please hold, we are migrating your data. This shouldn't take long."}},Lo={account:{accountDetails:{deviceNameLabel:"Device name",deviceNamePlaceholder:"Personal phone",editProfile:"Edit",logoutButton:"Log out"},actions:{delete:{button:"Delete account",confirmButton:"Delete account",confirmDescription:"Are you sure you want to delete your account? All your data will be lost!",confirmTitle:"Are you sure?",text:"This action is irreversible. All data will be deleted and nothing can be recovered.",title:"Delete account"},title:"Actions"},devices:{deviceNameLabel:"Device name",failed:"Failed to load sessions",removeDevice:"Remove",title:"Devices"},profile:{finish:"Finish editing",firstColor:"Profile color one",secondColor:"Profile color two",title:"Edit profile picture",userIcon:"User icon"},register:{cta:"Get started",text:"Share your watch progress between devices and keep them synced.",title:"Sync to the cloud"},title:"Account"},appearance:{activeTheme:"Active",themes:{blue:"Blue",default:"Default",gray:"Gray",red:"Red",teal:"Teal"},title:"Appearance"},subtitles:{title:"Subtitles",previewQuote:"I must not fear. Fear is the mind-killer.",textSizeLabel:"Text size",backgroundLabel:"Background opacity",colorLabel:"Color"},connections:{server:{description:"If you would like to connect to a custom backend to store your data, enable this and provide the URL.",label:"Custom server",urlLabel:"Custom server URL"},title:"Connections",workers:{addButton:"Add new worker",description:"To make the application function, all traffic is routed through proxies. Enable this if you want to bring your own workers.",emptyState:"No workers yet, add one below",label:"Use custom proxy workers",urlLabel:"Worker URLs",urlPlaceholder:"https://"}},locale:{language:"Application language",languageDescription:"Language applied to the entire application.",title:"Locale"},reset:"Reset",save:"Save",sidebar:{info:{appVersion:"App version",backendUrl:"Backend URL",backendVersion:"Backend version",hostname:"Hostname",insecure:"Insecure",notLoggedIn:"You are not logged in",secure:"Secure",title:"App information",unknownVersion:"Unknown",userId:"User ID"}},unsaved:"You have unsaved changes"},To={about:xo,actions:po,auth:bo,errors:yo,footer:vo,global:jo,home:wo,media:ko,navigation:No,notFound:So,overlays:Co,player:Eo,screens:Io,settings:Lo},zs={en:To,ca:Ci,cs:Ei,de:Ii,fr:Li,it:Ti,nl:Pi,pl:Ri,tr:Ai,vi:Mi,zh:_i,he:Oi,sv:Di,pirate:Bi,minion:Ui,lv:Fi,th:Vi,ne:$i,ar:Hi,es:Wi,et:zi,tok:Qi,hi:Ki,"pt-BR":Gi,uk:qi,bg:Yi,bn:Ji,el:Xi,fa:Zi,gu:ea,id:ta,ja:na,ko:sa,sl:ra,ta:ia,"zh-HANT":aa,ru:oa,gl:la,pa:ca,ro:ua},Po=Object.keys(zs),Ro=Object.fromEntries(Object.entries(zs).map(e=>[e[0],{translation:e[1]}]));xs.use(ui).init({fallbackLng:"en",resources:Ro,interpolation:{escapeValue:!1}});const eh=Po.map(e=>{const t=tn(e);if(!t)throw new Error(`Language with code ${e} cannot be found in database`);return t}),Fe=G(le(q(e=>({language:"en",setLanguage(t){e(n=>{n.language=t})}})),{name:"__MW::locale"}));function Qs(e){const t=tn(e);t&&xs.changeLanguage(t.code)}function Ao(e){const t=tn(e);return t?t.isRtl:!1}function Mo(){const e=Fe(n=>n.language);d.useEffect(()=>{Qs(e)},[e]);const t=Ao(e);return s.jsx(oe,{children:s.jsx("html",{dir:t?"rtl":"ltr"})})}const D=G(le(q(e=>({enabled:!1,lastSync:{lastSelectedLanguage:null},lastSelectedLanguage:null,overrideCasing:!1,delay:0,styling:{color:"#ffffff",backgroundOpacity:.5,size:1},resetSubtitleSpecificSettings(){e(t=>{t.delay=0,t.overrideCasing=!1})},updateStyling(t){e(n=>{t.backgroundOpacity!==void 0&&(n.styling.backgroundOpacity=t.backgroundOpacity),t.color!==void 0&&(n.styling.color=t.color.toLowerCase()),t.size!==void 0&&(n.styling.size=Math.min(2,Math.max(.01,t.size)))})},setLanguage(t){e(n=>{n.enabled=!!t,t&&(n.lastSelectedLanguage=t)})},setCustomSubs(){e(t=>{t.enabled=!0,t.lastSelectedLanguage=null})},setOverrideCasing(t){e(n=>{n.overrideCasing=t})},setDelay(t){e(n=>{n.delay=Math.max(Math.min(500,t),-500)})},importSubtitleLanguage(t){e(n=>{n.lastSelectedLanguage=t,n.lastSync.lastSelectedLanguage=t})}})),{name:"__MW::subtitles"}));ft().setKey("mw-settings").addVersion({version:0,create(){return{language:"en",captionSettings:{delay:0,style:{color:"#ffffff",fontSize:25,backgroundColor:"#00000096"}}}},migrate(e){return{language:e.language,captionSettings:{language:"none",...e.captionSettings}}}}).addVersion({version:1,migrate(e){const t=Fe.getState(),n=D.getState(),r=e.captionSettings.style.backgroundColor;let i=.5;if(r.length===9){const a=r.slice(7);i=parseInt(a,16)/255}return t.setLanguage(e.language),n.updateStyling({backgroundOpacity:i,color:e.captionSettings.style.color,size:e.captionSettings.style.fontSize/25}),n.importSubtitleLanguage(e.captionSettings.language==="none"?null:e.captionSettings.language),{}}}).addVersion({version:2,create(){return{}}}).build();const an=G(le(q(e=>({volume:1,setVolume(t){e(n=>{n.volume=t})}})),{name:"__MW::volume"})),Ks=G(q(e=>({showVolume:!1,setShowVolume(t){e(n=>{n.showVolume=t})}})));ft().setKey("mw-volume").addVersion({version:0,create(){return{volume:1}},migrate(e){return an.getState().setVolume(e.volume),{}}}).addVersion({version:1,create(){return{}}}).build();let Je=0;const H=G(le(q(e=>({items:{},updateQueue:[],removeItem(t){e(n=>{Je+=1,n.updateQueue.push({id:Je.toString(),action:"delete",tmdbId:t}),delete n.items[t]})},replaceItems(t){e(n=>{n.items=t})},updateItem(t){let{meta:n,progress:r}=t;e(i=>{var o,l,c,u;Je+=1,i.updateQueue.push({tmdbId:n.tmdbId,title:n.title,year:n.releaseYear,poster:n.poster,type:n.type,progress:{...r},id:Je.toString(),episodeId:(o=n.episode)==null?void 0:o.tmdbId,seasonId:(l=n.season)==null?void 0:l.tmdbId,seasonNumber:(c=n.season)==null?void 0:c.number,episodeNumber:(u=n.episode)==null?void 0:u.number,action:"upsert"}),i.items[n.tmdbId]||(i.items[n.tmdbId]={type:n.type,episodes:{},seasons:{},updatedAt:0,title:n.title,year:n.releaseYear,poster:n.poster});const a=i.items[n.tmdbId];if(a.updatedAt=Date.now(),n.type==="movie"){a.progress||(a.progress={duration:0,watched:0}),a.progress={...r};return}!n.episode||!n.season||(a.seasons[n.season.tmdbId]||(a.seasons[n.season.tmdbId]={id:n.season.tmdbId,number:n.season.number,title:n.season.title}),a.episodes[n.episode.tmdbId]||(a.episodes[n.episode.tmdbId]={id:n.episode.tmdbId,number:n.episode.number,title:n.episode.title,seasonId:n.season.tmdbId,updatedAt:Date.now(),progress:{duration:0,watched:0}}),a.episodes[n.episode.tmdbId].progress={...r})})},clear(){e(t=>{t.items={}})},clearUpdateQueue(){e(t=>{t.updateQueue=[]})},removeUpdateItem(t){e(n=>{n.updateQueue=[...n.updateQueue.filter(r=>r.id!==t)]})}})),{name:"__MW::progress"}));function _o(e){var n,r;const t={};for(const i of e.items)if(i.item.meta.type===P.SERIES){if(t[i.item.meta.id]||(t[i.item.meta.id]={type:"show",episodes:{},seasons:{},title:i.item.meta.title,updatedAt:i.watchedAt,poster:i.item.meta.poster,year:Number(i.item.meta.year)}),i.item.series&&!t[i.item.meta.id].episodes[i.item.series.episodeId]){const a=(n=i.item.meta.seasonData.episodes.find(o=>{var l;return o.number===((l=i.item.series)==null?void 0:l.episode)}))==null?void 0:n.title;t[i.item.meta.id].seasons[i.item.series.seasonId]={id:i.item.series.seasonId,number:i.item.series.season,title:((r=i.item.meta.seasons.find(o=>{var l;return o.number===((l=i.item.series)==null?void 0:l.season)}))==null?void 0:r.title)||"Unknown season"},t[i.item.meta.id].episodes[i.item.series.episodeId]={title:a||"Unknown",id:i.item.series.episodeId,number:i.item.series.episode,seasonId:i.item.series.seasonId,updatedAt:i.watchedAt,progress:{duration:100/i.percentage*i.progress,watched:i.progress}}}}else t[i.item.meta.id]={type:"movie",episodes:{},seasons:{},title:i.item.meta.title,updatedAt:i.watchedAt,year:Number(i.item.meta.year),poster:i.item.meta.poster,progress:{duration:100/i.percentage*i.progress,watched:i.progress}};return t}ft().setKey("video-progress").addVersion({version:0,migrate(){return{items:[]}}}).addVersion({version:1,async migrate(e){return uo(e)}}).addVersion({version:2,migrate(e){return fo(e)}}).addVersion({version:3,migrate(e){return H.getState().replaceItems(_o(e)),{items:[]}}}).addVersion({version:4,create(){return{items:[]}}}).build();Zr.initialize([{trackingId:Ra}]);function pt(e){return s.jsx("div",{className:["spinner",e.className??""].join(" ")})}function M(e){var u;const t=ee(),{onClick:n,href:r,loading:i}=e,a=d.useCallback(()=>{i||(r?t(r):n==null||n())},[n,r,t,i]);let o="bg-white hover:bg-gray-200 text-black";e.theme==="purple"&&(o="bg-buttons-purple hover:bg-buttons-purpleHover text-white"),e.theme==="secondary"&&(o="bg-buttons-cancel hover:bg-buttons-cancelHover transition-colors duration-100 text-white"),e.theme==="danger"&&(o="bg-buttons-danger hover:bg-buttons-dangerHover text-white");let l=S("tabbable cursor-pointer inline-flex items-center justify-center rounded-lg font-medium transition-[transform,background-color] duration-100 active:scale-105 md:px-8",e.padding??"px-4 py-3",e.className,o,e.disabled?"!cursor-not-allowed bg-opacity-60 text-opacity-60":null);e.disabled&&(l=l.split(" ").filter(m=>!m.startsWith("hover:")&&!m.startsWith("active:")).join(" "));const c=s.jsxs(s.Fragment,{children:[e.icon&&!e.loading?s.jsx("span",{className:"mr-3 hidden md:inline-block",children:s.jsx(I,{icon:e.icon})}):null,e.loading?s.jsx("span",{className:"mr-3 inline-flex justify-center",children:s.jsx(pt,{className:"text-lg"})}):null,e.children]});return e.href&&(e.href.startsWith("https://")||(u=e.href)!=null&&u.startsWith("data:"))?s.jsx("a",{className:l,href:e.href,target:"_blank",rel:"noreferrer",download:e.download,children:c}):e.href?s.jsx("a",{className:l,onClick:a,children:c}):s.jsx("button",{type:"button",onClick:a,className:l,children:c})}function Fn(e){let t="bg-white hover:bg-gray-200 text-black";e.theme==="purple"&&(t="bg-buttons-purple hover:bg-buttons-purpleHover text-white"),e.theme==="secondary"&&(t="bg-buttons-cancel hover:bg-buttons-cancelHover transition-colors duration-100 text-white");const n=S("cursor-pointer inline-flex items-center justify-center rounded-lg font-medium transition-[transform,background-color] duration-100 active:scale-105 md:px-8","px-4 py-3",e.className,t);return s.jsx("button",{type:"button",onClick:e.onClick,className:n,children:e.children})}const Oo=function(t){return s.jsx("div",{className:t.className,children:s.jsxs("div",{className:"flex flex-col items-center justify-center",children:[s.jsxs("div",{className:"flex h-12 items-center justify-center",children:[s.jsx("div",{className:"mx-1 h-2 w-2 animate-loading-pin rounded-full bg-[#211D30]"}),s.jsx("div",{className:"mx-1 h-2 w-2 animate-loading-pin rounded-full bg-[#211D30] [animation-delay:150ms]"}),s.jsx("div",{className:"mx-1 h-2 w-2 animate-loading-pin rounded-full bg-[#211D30] [animation-delay:300ms]"}),s.jsx("div",{className:"mx-1 h-2 w-2 animate-loading-pin rounded-full bg-[#211D30] [animation-delay:450ms]"})]}),t.text&&t.text.length?s.jsx("p",{className:"mt-3 max-w-xs text-sm opacity-75",children:t.text}):null]})})},Ve=Oo;function $(e){return{authorization:`Bearer ${e}`}}function Do(e,t){return{meta:{title:t.title,type:t.type,poster:t.poster,year:t.year??0},tmdbId:e}}async function Bo(e,t,n){return A(`/users/${t.userId}/bookmarks/${n.tmdbId}`,{method:"POST",headers:$(t.token),baseURL:e,body:n})}async function Uo(e,t,n){return A(`/users/${t.userId}/bookmarks/${n}`,{method:"DELETE",headers:$(t.token),baseURL:e})}async function Fo(e){return ei(ti,e,"mnemonic",{c:2048,dkLen:32})}function Vo(e){return ni(e,ps)}async function Vn(e){const t=await Fo(e),{privateKey:n,publicKey:r}=J.pki.ed25519.generateKeyPair({seed:t});return{privateKey:n,publicKey:r,seed:t}}function $o(){return si(ps)}async function Ho(e,t){return J.pki.ed25519.sign({encoding:"utf8",message:e,privateKey:t})}function Vt(e){return J.util.encode64(String.fromCodePoint(...e))}function $t(e){return Vt(e).replace(/\//g,"_").replace(/\+/g,"-").replace(/=+$/,"")}async function $n(e,t){const n=await Ho(t,e.privateKey);return $t(n)}function on(e){return J.util.binary.base64.decode(e)}function Et(e){return J.util.createBuffer(on(e))}function Hn(e){return J.util.encode64(e.getBytes())}async function Wn(e,t){if(t.byteLength!==32)throw new Error("Secret must be at least 256-bit");const n=await new Promise((o,l)=>{J.random.getBytes(16,(c,u)=>{c&&l(c),o(u)})}),r=J.cipher.createCipher("AES-GCM",J.util.createBuffer(t));r.start({iv:n,tagLength:128}),r.update(J.util.createBuffer(e,"utf8")),r.finish();const i=r.output,a=r.mode.tag;return`${J.util.encode64(n)}.${Hn(i)}.${Hn(a)}`}function Gs(e,t){if(t.byteLength!==32)throw new Error("Secret must be 256-bit");const[n,r,i]=e.split("."),a=J.cipher.createDecipher("AES-GCM",J.util.createBuffer(t));if(a.start({iv:Et(n),tag:Et(i),tagLength:128}),a.update(Et(r)),!a.finish())throw new Error("Error decrypting data");return a.output.toString()}function Wo(e,t,n){return A(`/users/${t.userId}/progress/import`,{method:"PUT",body:n,baseURL:e,headers:$(t.token)})}function zo(e,t,n){return A(`/users/${t.userId}/bookmarks`,{method:"PUT",body:n,baseURL:e,headers:$(t.token)})}async function Qo(e,t){return A("/auth/login/start",{method:"POST",body:{publicKey:t},baseURL:e})}async function Ko(e,t){return A("/auth/login/complete",{method:"POST",body:{namespace:"movie-web",...t},baseURL:e})}function Go(e){var t,n;return{duration:((t=e.progress)==null?void 0:t.duration)??0,watched:((n=e.progress)==null?void 0:n.watched)??0,tmdbId:e.tmdbId,meta:{title:e.title??"",type:e.type??"",year:e.year??NaN,poster:e.poster},episodeId:e.episodeId,seasonId:e.seasonId,episodeNumber:e.episodeNumber,seasonNumber:e.seasonNumber}}function qo(e,t){var n,r;return t.type==="show"?Object.entries(t.episodes).flatMap(i=>{var l,c;let[a,o]=i;return{duration:((l=t.progress)==null?void 0:l.duration)??o.progress.duration,watched:((c=t.progress)==null?void 0:c.watched)??o.progress.watched,tmdbId:e,meta:{title:t.title??"",type:t.type??"",year:t.year??NaN,poster:t.poster},episodeId:o.id,seasonId:o.seasonId,episodeNumber:o.number,seasonNumber:t.seasons[o.seasonId].number,updatedAt:new Date(o.updatedAt).toISOString()}}):[{duration:((n=t.progress)==null?void 0:n.duration)??0,watched:((r=t.progress)==null?void 0:r.watched)??0,tmdbId:e,updatedAt:new Date(t.updatedAt).toISOString(),meta:{title:t.title??"",type:t.type??"",year:t.year??NaN,poster:t.poster}}]}async function Yo(e,t,n){return A(`/users/${t.userId}/progress/${n.tmdbId}`,{method:"PUT",headers:$(t.token),baseURL:e,body:n})}async function Jo(e,t,n,r,i){await A(`/users/${t.userId}/progress/${n}`,{method:"DELETE",headers:$(t.token),baseURL:e,body:{episodeId:r,seasonId:i}})}async function Xo(e,t){return A("/auth/register/start",{method:"POST",body:{captchaToken:t},baseURL:e})}async function Zo(e,t){return A("/auth/register/complete",{method:"POST",body:{namespace:"movie-web",...t},baseURL:e})}async function th(e,t){return A(`/users/${t.userId}/sessions`,{headers:$(t.token),baseURL:e})}async function nh(e,t,n){return A(`/sessions/${t.sessionId}`,{method:"PATCH",headers:$(t.token),body:n,baseURL:e})}async function el(e,t,n){return A(`/sessions/${n}`,{method:"DELETE",headers:$(t),baseURL:e})}function qs(e,t,n){return A(`/users/${t.userId}/settings`,{method:"PUT",body:n,baseURL:e,headers:$(t.token)})}function tl(e,t){return A(`/users/${t.userId}/settings`,{method:"GET",baseURL:e,headers:$(t.token)})}function nl(e){const t=e.map(n=>{const r={...n.meta,updatedAt:new Date(n.updatedAt).getTime()};return[n.tmdbId,r]});return Object.fromEntries(t)}function sl(e){const t={};return e.forEach(n=>{t[n.tmdbId]||(t[n.tmdbId]={title:n.meta.title,poster:n.meta.poster,type:n.meta.type,updatedAt:new Date(n.updatedAt).getTime(),episodes:{},seasons:{},year:n.meta.year});const r=t[n.tmdbId];r.type==="movie"&&(r.progress={duration:Number(n.duration),watched:Number(n.watched)}),r.type==="show"&&n.season.id&&n.episode.id&&(r.seasons[n.season.id]={id:n.season.id,number:n.season.number??0,title:""},r.episodes[n.episode.id]={id:n.episode.id,number:n.episode.number??0,title:"",progress:{duration:Number(n.duration),watched:Number(n.watched)},seasonId:n.season.id,updatedAt:new Date(n.updatedAt).getTime()})}),t}async function zn(e,t){return A("/users/@me",{headers:$(t),baseURL:e})}async function sh(e,t,n){return A(`/users/${t.userId}`,{method:"PATCH",headers:$(t.token),body:n,baseURL:e})}async function rh(e,t){return A(`/users/${t.userId}`,{headers:$(t.token),baseURL:e})}async function rl(e,t){return A(`/users/${t.userId}/bookmarks`,{headers:$(t.token),baseURL:e})}async function il(e,t){return A(`/users/${t.userId}/progress`,{headers:$(t.token),baseURL:e})}const ln=G(le(q(e=>({theme:null,setTheme(t){e(n=>{n.theme=t})}})),{name:"__MW::theme"}));function al(e){const t=ln(r=>r.theme),n=t?`theme-${t}`:void 0;return s.jsxs("div",{className:n,children:[e.applyGlobal?s.jsx(oe,{children:s.jsx("body",{className:n})}):null,e.children]})}function ol(){const e=!!F(g=>g.account),t=F(g=>g.setAccount),n=F(g=>g.removeAccount),r=F(g=>g.setProxySet),i=z(g=>g.clear),a=H(g=>g.clear),o=ln(g=>g.setTheme),l=Fe(g=>g.setLanguage),c=D(g=>g.importSubtitleLanguage),u=z(g=>g.replaceBookmarks),m=H(g=>g.replaceItems),b=d.useCallback(async(g,y,p,v)=>{const j={token:g.token,userId:y.id,sessionId:g.session.id,deviceName:p.device,profile:y.profile,seed:v};return t(j),j},[t]),f=d.useCallback(async()=>{n(),i(),a()},[n,i,a]),h=d.useCallback(async(g,y,p,v,j)=>{u(nl(v)),m(sl(p)),j.applicationLanguage&&l(j.applicationLanguage),j.defaultSubtitleLanguage&&c(j.defaultSubtitleLanguage),j.applicationTheme&&o(j.applicationTheme),j.proxyUrls&&r(j.proxyUrls)},[u,m,l,c,o,r]);return{loggedIn:e,login:b,logout:f,syncData:h}}function he(){return F(t=>t.backendUrl)??_().BACKEND_URL}function Ne(){const e=F(f=>f.account),t=F(f=>{var h;return(h=f.account)==null?void 0:h.profile}),n=!!F(f=>f.account),r=he(),{logout:i,login:a,syncData:o}=ol(),l=d.useCallback(async f=>{const h=await Vn(f.mnemonic),g=$t(h.publicKey),{challenge:y}=await Qo(r,g),p=await $n(h,y),v=await Ko(r,{challenge:{code:y,signature:p},publicKey:g,device:await Wn(f.userData.device,h.seed)}),j=await zn(r,v.token),T=Vt(h.seed);return a(v,j.user,j.session,T)},[a,r]),c=d.useCallback(async()=>{if(e){try{await el(r,e.token,e.sessionId)}catch{}await i()}},[i,r,e]),u=d.useCallback(async f=>{const{challenge:h}=await Xo(r,f.recaptchaToken),g=await Vn(f.mnemonic),y=await $n(g,h),p=await Zo(r,{challenge:{code:h,signature:y},publicKey:$t(g.publicKey),device:await Wn(f.userData.device,g.seed),profile:f.userData.profile});return a(p,p.user,p.session,Vt(g.seed))},[r,a]),m=d.useCallback(async(f,h,g)=>{if(Object.keys(h).length===0&&Object.keys(g).length===0)return;const y=Object.entries(h).flatMap(v=>{let[j,T]=v;return qo(j,T)}),p=Object.entries(g).map(v=>{let[j,T]=v;return Do(j,T)});await Wo(r,f,y),await zo(r,f,p)},[r]),b=d.useCallback(async f=>{var v,j,T;let h;try{h=await zn(r,f.token)}catch(L){const w=L;if(((v=w==null?void 0:w.response)==null?void 0:v.status)===401||((j=w==null?void 0:w.response)==null?void 0:j.status)===403||((T=w==null?void 0:w.response)==null?void 0:T.status)===400){await c();return}throw console.error(L),L}const g=await rl(r,f),y=await il(r,f),p=await tl(r,f);o(h.user,h.session,y,g,p)},[r,o,c]);return{loggedIn:n,profile:t,login:l,logout:c,register:u,restore:b,importData:m}}const ll=12*60*60*1e3;function cl(){const{account:e}=F(),{restore:t}=Ne(),n=d.useRef(!1);return ys(()=>{e&&t(e)},ll),ht(async()=>{n.current||!e||await t(e).finally(()=>{n.current=!0})},[])}function cn(e){return s.jsxs("div",{className:"bg-pill-background bg-opacity-50 px-4 py-2 rounded-full text-white flex justify-center items-center",children:[s.jsx(I,{icon:e.icon??k.WAND,className:"mr-3 text-xl text-type-link"}),e.children]})}function Oe(e){return s.jsx("h2",{className:S("text-white text-3xl font-bold text-opacity-100 mt-6",e.className),children:e.children})}const bt="pb-4 border-b border-utils-divider border-opacity-50";function un(e){return s.jsx("h1",{className:["text-3xl lg:text-5xl font-bold text-white mb-9",e.border?bt:null,e.className??""].join(" "),children:e.children})}function $e(e){return s.jsx("h2",{className:["text-xl lg:text-2xl font-bold text-white mt-20 mb-9",e.border?bt:null,e.className??""].join(" "),children:e.children})}function ih(e){return s.jsx("h2",{className:["text-lg lg:text-xl font-bold text-white mb-3",e.border?bt:null,e.className??""].join(" "),children:e.children})}function we(e){return s.jsx("p",{className:["text-type-text my-9 font-medium",e.border?bt:null,e.className??""].join(" "),children:e.children})}function dn(e){return s.jsx("div",{className:S("w-full p-6 text-center flex flex-col items-center",e.maxWidth??"max-w-[28rem]"),children:e.children})}function mn(e){return s.jsx("div",{className:"w-full h-full flex justify-center items-center flex-col",children:e.children})}function ul(e,t){return e==="slide-down"?{leave:`transition-[transform,opacity] ${t}`,leaveFrom:"opacity-100 translate-y-0",leaveTo:"-translate-y-4 opacity-0",enter:`transition-[transform,opacity] ${t}`,enterFrom:"opacity-0 -translate-y-4",enterTo:"translate-y-0 opacity-100"}:e==="slide-up"?{leave:`transition-[transform,opacity] ${t}`,leaveFrom:"opacity-100 translate-y-0",leaveTo:"translate-y-4 opacity-0",enter:`transition-[transform,opacity] ${t}`,enterFrom:"opacity-0 translate-y-4",enterTo:"translate-y-0 opacity-100"}:e==="slide-full-left"?{leave:`transition-[transform] ${t}`,leaveFrom:"translate-x-0",leaveTo:"-translate-x-full",enter:`transition-[transform] ${t}`,enterFrom:"-translate-x-full",enterTo:"translate-x-0"}:e==="slide-full-right"?{leave:`transition-[transform] ${t}`,leaveFrom:"translate-x-0",leaveTo:"translate-x-full",enter:`transition-[transform] ${t}`,enterFrom:"translate-x-full",enterTo:"translate-x-0"}:e==="fade"?{leave:`transition-[transform,opacity] ${t}`,leaveFrom:"opacity-100",leaveTo:"opacity-0",enter:`transition-[transform,opacity] ${t}`,enterFrom:"opacity-0",enterTo:"opacity-100"}:{}}function Q(e){const t=e.durationClass??"duration-200",n=ul(e.animation,t);return e.isChild?s.jsx(Mt.Child,{as:d.Fragment,...n,children:s.jsx("div",{className:e.className,style:e.style,children:e.children})}):s.jsx(Mt,{show:e.show,as:d.Fragment,...n,children:s.jsx("div",{className:e.className,style:e.style,children:e.children})})}function dl(){const e=De();return d.useMemo(()=>Object.fromEntries(new URLSearchParams(e.search).entries()),[e.search])}function hn(e){const t=dl(),n=De(),r=ee(),i=t[e]??null,a=d.useCallback(o=>{const l=new URLSearchParams(n.search);o?l.set(e,o):l.delete(e),r({search:l.toString()})},[e,n.search,r]);return[i,a]}const ke=G(q(e=>({transition:null,routes:{},anchorPoint:null,setTransition(t){e(n=>{n.transition=t})},registerRoute(t){e(n=>{n.routes[t.id]=t})},setAnchorPoint(t){e(n=>{n.anchorPoint=t})}})));function ge(e,t){return[t??"",...e.split("/")].filter(r=>r.length>0)}function xe(e){return`/${e.join("/")}`}function ml(e){const[t]=hn("r"),n=ke(a=>a.setAnchorPoint),r=d.useMemo(()=>!!t&&t.startsWith(`/${e}`),[t,e]),i=d.useCallback(()=>{if(!r)return;const a=document.getElementById(`__overlayRouter::${e}`);if(a){const o=a.getBoundingClientRect();n({h:o.height,w:o.width,x:o.x,y:o.y})}},[r,n,e]);d.useEffect(()=>{i()},[r,i]),d.useEffect(()=>{function a(){i()}return window.addEventListener("resize",a),()=>{window.removeEventListener("resize",a)}},[i])}function Se(e){const[t,n]=hn("r"),r=ke(g=>g.transition),i=ke(g=>g.setTransition),a=!!t&&t.startsWith(`/${e}`);function o(g){return xe(ge(g,e))}function l(g){const y=t,p=xe(ge(g,e));i({from:y??"/",to:p}),n(p)}function c(g){if(!r)return"none";const y=xe(ge(g,e));return y===r.to&&r.from.startsWith(r.to)||y===r.from&&r.to.startsWith(r.from)?"yes":"no"}function u(g){return a&&t===xe(ge(g,e))}function m(){return a}const b=d.useCallback(g=>{t&&!g&&n(null),i(null)},[n,t,i]),f=d.useCallback(function(){let g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"/";i(null),n(xe(ge(g,e)))},[e,n,i]);return{activeRoute:a?xe(ge(t.slice(`/${e}`.length))):"/",showBackwardsTransition:c,isCurrentPage:u,isOverlayActive:m,navigate:l,close:b,open:f,makePath:o,currentRoute:t}}function B(e){const t=Se(e);return{id:e,route:t.activeRoute,isRouterActive:t.isOverlayActive(),open:t.open,close:t.close,navigate:t.navigate}}const hl=function(){const{t}=C(),[n,r]=d.useState(!1);return s.jsx("div",{className:S("absolute w-10/12 max-w-[800px] bg-background-main p-20 rounded-lg select-none z-50 top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 transform",n?"":"hidden"),children:s.jsxs("div",{className:"w-full grid lg:grid-cols-[1fr,auto] gap-12 items-center",children:[s.jsxs("div",{className:"text-left",children:[s.jsx("h2",{className:"text-type-emphasis font-bold text-xl mb-6",children:t("player.turnstile.title")}),s.jsx("p",{children:t("player.turnstile.description")})]}),s.jsx(Is,{isInPopout:!0,onUpdateShow:i=>r(i)})]})})},fl=hl;function gl(e){const t=Se("hello world :)"),n=d.useRef(t);return d.useEffect(()=>{const r=n.current;return r.close(),()=>{r.close()}},[]),s.jsxs("div",{className:"popout-location",children:[s.jsx(fl,{}),e.children]})}function Ys(e){const[t,n]=d.useState(null),r=d.useRef(null),i=e.close;return d.useEffect(()=>{var o;const a=(o=r.current)==null?void 0:o.closest(".popout-location");n(a??document.body)},[]),s.jsx("div",{ref:r,children:t?di.createPortal(s.jsx(Q,{show:e.show,animation:"none",children:s.jsx(mi,{children:s.jsxs("div",{className:"popout-wrapper fixed overflow-hidden pointer-events-auto inset-0 z-[999] select-none",children:[s.jsx(Q,{animation:"fade",isChild:!0,children:s.jsx("div",{onClick:i,className:S({"absolute inset-0":!0,"bg-black opacity-90":e.darken})})}),s.jsxs(Q,{animation:"slide-up",className:"absolute inset-0 pointer-events-none",isChild:!0,children:[s.jsx("div",{tabIndex:1,className:"focus:ring-0 focus:outline-none opacity-0"}),e.children]})]})})}),t):null})}function Js(e){const t=Se(e.id),n=t.close;ml(e.id);const r=d.useCallback(()=>{n()},[n]);return s.jsx(Ys,{close:r,show:t.isOverlayActive(),darken:e.darken,children:e.children})}function Xs(e){const[t,n]=hn("m"),r=d.useCallback(()=>n(e),[e,n]),i=d.useCallback(()=>n(null),[n]);return{id:e,isShown:t===e,show:r,hide:i}}function ah(e){return s.jsx("div",{className:"w-full max-w-[30rem] m-4",children:s.jsx("div",{className:"w-full bg-dropdown-background rounded-xl p-8 pointer-events-auto",children:e.children})})}function xl(e){const t=Xs(e.id);return s.jsxs(Ys,{darken:!0,close:t.hide,show:t.isShown,children:[s.jsx(oe,{children:s.jsx("html",{"data-no-scroll":!0})}),s.jsx("div",{className:"flex absolute inset-0 items-center justify-center flex-col",children:e.children})]})}const pl=function(t){const[n,r]=d.useState(!1),i=d.useRef(null),{t:a}=C();let o=null;typeof t.error=="string"?o=t.error:t.error.key?o=`${t.error.type}: ${a(t.error.key)}`:t.error.message&&(o=`${t.error.type}: ${a(t.error.message)}`);function l(){!t.error||!navigator.clipboard||(navigator.clipboard.writeText(`\`\`\`${o}\`\`\``),r(!0),i.current&&clearTimeout(i.current),i.current=setTimeout(()=>r(!1),2e3))}return s.jsxs("div",{className:"bg-errors-card w-full rounded-lg p-6 text-left",children:[s.jsxs("div",{className:"border-errors-border flex items-center justify-between border-b pb-2",children:[s.jsx("span",{className:"font-medium text-white",children:a("errors.details")}),s.jsxs("div",{className:"flex items-center justify-center gap-3",children:[s.jsx(M,{theme:"secondary",padding:"p-2 h-10 min-w-[40px] md:px-4",onClick:()=>l(),children:n?s.jsxs(s.Fragment,{children:[s.jsx(I,{icon:k.CHECKMARK,className:"text-xs"}),s.jsx("span",{className:"hidden min-[400px]:inline-block ml-3",children:a("actions.copied")})]}):s.jsxs(s.Fragment,{children:[s.jsx(I,{icon:k.COPY,className:"text-2xl"}),s.jsx("span",{className:"hidden min-[400px]:inline-block ml-3",children:a("actions.copy")})]})}),s.jsx(M,{theme:"secondary",padding:"p-2 md:px-2",onClick:t.onClose,children:s.jsx(I,{icon:k.X,className:"text-2xl"})})]})]}),s.jsx("div",{className:"pointer-events-auto mt-4 h-60 select-text overflow-y-auto whitespace-pre text-left",children:o})]})},Zs=pl;function bl(e){return!e.show||!e.error?null:s.jsx("div",{className:"fixed inset-0 flex h-full w-full items-center justify-center bg-black bg-opacity-30 p-12",children:s.jsx("div",{className:"w-full max-w-2xl",children:s.jsx(Zs,{error:e.error,onClose:e.onClose})})})}function yl(e){return e.error?s.jsx(xl,{id:e.id,children:s.jsx("div",{className:"pointer-events-auto w-11/12 max-w-2xl",children:s.jsx(Zs,{error:e.error,onClose:e.onClose})})}):null}function vl(e){const{t}=C(),[n,r]=d.useState(!1),i=5,a=(e.errorInfo.componentStack||"").split(`
`).slice(0,i),o=`${e.error.toString()}
${a.join(`
`)}`;return s.jsx("div",{className:"relative flex min-h-screen flex-1 flex-col",children:s.jsx("div",{className:"flex h-full flex-1 flex-col items-center justify-center p-5 text-center",children:s.jsx(mn,{children:s.jsxs(dn,{maxWidth:"max-w-2xl w-9/10",children:[s.jsx(cn,{icon:k.EYE_SLASH,children:t("errors.badge")}),s.jsx(Oe,{children:t("errors.title")}),s.jsx(we,{children:e.error.toString()}),s.jsx(bl,{show:n,onClose:()=>r(!1),error:o}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx(Fn,{theme:"secondary",className:"mt-6 p-2.5 md:px-12",onClick:()=>window.location.reload(),children:t("errors.reloadPage")}),s.jsx(Fn,{theme:"purple",className:"mt-6 p-2.5 md:px-12",onClick:()=>r(!0),children:t("errors.showError")})]})]})})})})}class jl extends d.Component{constructor(t){super(t),this.state={error:void 0}}componentDidCatch(t,n){console.error("Render error caught",t,n),this.setState(r=>({...r,error:{error:t,errorInfo:n}}))}render(){return this.state.error?s.jsx(vl,{error:this.state.error.error,errorInfo:this.state.error.errorInfo}):this.props.children}}function Ce(e){const{t}=C();return s.jsxs("div",{className:S("flex items-center space-x-2 rounded-full px-4 py-2 text-type-logo",e.backgroundClass??"bg-pill-background bg-opacity-50",e.clickable?"transition-[transform,background-color] hover:scale-105 hover:bg-pill-backgroundHover hover:text-type-logo active:scale-95":""),children:[s.jsx(I,{className:"text-xl",icon:k.MOVIE_WEB}),s.jsx("span",{className:["font-semibold text-white",e.hideTextOnMobile?"hidden sm:block":""].join(" "),children:t("global.name")})]})}function er(e){return s.jsx("div",{className:`mx-auto max-w-full px-8 ${e.ultraWide?"w-[1300px] sm:px-16":"w-[900px] sm:px-8"} ${e.classNames||""}`,children:e.children})}function yt(e){return s.jsx("div",{className:`mx-auto w-[600px] max-w-full px-8 sm:px-0 ${e.classNames||""}`,children:e.children})}function vt(e){const{t}=C(),n=t(e.k),r=t("global.pages.pagetitle",{title:n});return s.jsx(oe,{children:s.jsx("title",{children:e.subpage?r:n})})}function tr(){return!!_().DMCA_EMAIL}function wl(){const{t:e}=C();return s.jsxs(He,{children:[s.jsx(vt,{subpage:!0,k:"global.pages.dmca"}),s.jsxs(yt,{children:[s.jsx(un,{children:e("screens.dmca.title")}),s.jsx(we,{children:e("screens.dmca.text")}),s.jsxs(we,{className:"flex space-x-3 items-center",children:[s.jsx(I,{icon:k.MAIL}),s.jsx("span",{children:_().DMCA_EMAIL??""})]})]})]})}function Ht(e){const t=ee(),n=d.useCallback(()=>{e.to&&t(e.to)},[t,e.to]);return s.jsxs("a",{href:e.href,target:e.href?"_blank":void 0,rel:"noreferrer",className:"tabbable rounded py-2 px-3 inline-flex cursor-pointer items-center space-x-3 transition-colors duration-200 hover:text-type-emphasis",onClick:e.to?n:void 0,children:[s.jsx(I,{icon:e.icon,className:"text-2xl"}),s.jsx("span",{className:"font-medium",children:e.children})]})}function Qn(){const{t:e}=C();return tr()?s.jsx(Ht,{to:"/dmca",icon:k.DRAGON,children:e("footer.links.dmca")}):null}function kl(){const{t:e}=C();return s.jsx("footer",{className:"mt-16 border-t border-type-divider py-16 md:py-8",children:s.jsxs(er,{ultraWide:!0,classNames:"grid md:grid-cols-2 gap-16 md:gap-8",children:[s.jsxs("div",{children:[s.jsx("div",{className:"inline-block",children:s.jsx(Ce,{})}),s.jsx("p",{className:"mt-4 lg:max-w-[400px]",children:e("footer.tagline")})]}),s.jsxs("div",{className:"md:text-right",children:[s.jsx("h3",{className:"font-semibold text-type-emphasis",children:e("footer.legal.disclaimer")}),s.jsx("p",{className:"mt-3",children:e("footer.legal.disclaimerText")})]}),s.jsxs("div",{className:"flex flex-wrap gap-[0.5rem] -ml-3",children:[s.jsx(Ht,{icon:k.GITHUB,href:_().GITHUB_LINK,children:e("footer.links.github")}),s.jsx(Ht,{icon:k.DISCORD,href:_().DISCORD_LINK,children:e("footer.links.discord")}),s.jsx("div",{className:"inline md:hidden",children:s.jsx(Qn,{})})]}),s.jsx("div",{className:"hidden items-center justify-end md:flex -mr-3",children:s.jsx(Qn,{})})]})})}function nr(e){return s.jsxs("div",{className:["flex min-h-screen flex-col",e.className||""].join(" "),children:[s.jsx("div",{style:{flex:"1 0 auto"},children:e.children}),s.jsx(kl,{})]})}function sr(e){return s.jsxs("div",{className:"relative inline-block",children:[s.jsx("div",{className:S(e.sizeClass,"rounded-full overflow-hidden flex items-center justify-center text-white"),style:{background:`linear-gradient(to bottom right, ${e.profile.colorA}, ${e.profile.colorB})`},children:s.jsx(js,{className:e.iconClass,icon:e.profile.icon})}),e.bottom?s.jsx("div",{className:"absolute bottom-0 left-1/2 transform translate-y-1/2 -translate-x-1/2",children:e.bottom}):null]})}function rr(e){const t=F(),n=d.useMemo(()=>t.account&&t.account.seed?on(t.account.seed):null,[t]);if(!t.account||t.account===null)return null;const r=n?Gs(t.account.deviceName,n):"...";return s.jsxs(s.Fragment,{children:[s.jsx(sr,{profile:t.account.profile,sizeClass:e.sizeClass??"w-[1.5rem] h-[1.5rem] ssm:w-[2rem] ssm:h-[2rem]",iconClass:e.iconClass,bottom:e.bottom}),e.withName&&n?s.jsx("span",{className:"hidden md:inline-block",children:r.length>=20?`${r.slice(0,19)}…`:r}):null]})}function Nl(e){return s.jsx("div",{className:"relative inline-block p-1 text-type-dimmed",children:s.jsx(I,{className:e.iconClass??"text-base ssm:text-xl",icon:k.MENU})})}const Sl=function(t){const n=t.clickable?"cursor-pointer hover:scale-110 hover:bg-pill-backgroundHover hover:text-white active:scale-125":"",r=t.transparent?"bg-opacity-0 hover:bg-opacity-50":"",i=t.active?"bg-pill-backgroundHover text-white":"",a=t.downsized?"h-10 w-10":"h-12 w-12";return s.jsx("div",{className:t.className||void 0,onClick:t.onClick,children:s.jsx("div",{className:`flex items-center justify-center rounded-full border-2 border-transparent bg-pill-background bg-opacity-50 transition-[background-color,color,transform,border-color] duration-75 ${r} ${n} ${i} ${a}`,children:s.jsx(I,{icon:t.icon})})})},ct=Sl;function Kn(){return s.jsx("hr",{className:"border-0 w-full h-px bg-dropdown-border"})}const Cl=function(t){const n=ee(),r=i=>{i.startsWith("http")?window.open(i,"_blank"):n(i)};return s.jsx("a",{tabIndex:0,href:t.href,onClick:i=>{var a;i.preventDefault(),t.href?r(t.href):(a=t.onClick)==null||a.call(t)},className:t.className,children:t.children})},ir=Cl;function pe(e){return s.jsxs(ir,{onClick:e.onClick,href:e.href,className:S("tabbable cursor-pointer flex gap-3 items-center m-3 p-1 rounded font-medium transition-colors duration-100",e.highlight?"text-dropdown-highlight hover:text-dropdown-highlightHover":"text-dropdown-text hover:text-white",e.className),children:[e.icon?s.jsx(I,{icon:e.icon,className:"text-xl"}):null,e.children]})}function It(e){return s.jsx(ir,{href:e.href,className:"tabbable w-11 h-11 rounded-full bg-dropdown-contentBackground text-dropdown-text hover:text-white transition-colors duration-100 flex justify-center items-center",children:s.jsx(I,{className:"text-2xl",icon:e.icon})})}function El(e){const{t}=C(),[n,r]=d.useState(!1),i=F(u=>{var m;return(m=u.account)==null?void 0:m.deviceName}),a=F(u=>{var m;return(m=u.account)==null?void 0:m.seed}),o=d.useMemo(()=>a?on(a):null,[a]),{logout:l}=Ne();d.useEffect(()=>{function u(m){m.target.closest(".is-dropdown")||r(!1)}return window.addEventListener("click",u),()=>window.removeEventListener("click",u)},[]);const c=d.useCallback(()=>{r(u=>!u)},[]);return s.jsxs("div",{className:"relative is-dropdown",children:[s.jsxs("div",{className:"cursor-pointer tabbable rounded-full flex gap-2 text-white items-center py-2 px-3 bg-pill-background bg-opacity-50 hover:bg-pill-backgroundHover transition-[background,transform] duration-100 hover:scale-105",tabIndex:0,onClick:c,onKeyUp:u=>u.key==="Enter"&&c(),children:[e.children,s.jsx(I,{className:S("text-xl transition-transform duration-100",n?"rotate-180":""),icon:k.CHEVRON_DOWN})]}),s.jsx(Q,{animation:"slide-down",show:n,children:s.jsxs("div",{className:"rounded-lg absolute w-64 bg-dropdown-altBackground top-full mt-3 right-0",children:[i&&o?s.jsxs(pe,{className:"text-white",href:"/settings",children:[s.jsx(rr,{}),Gs(i,o)]}):s.jsx(pe,{href:"/login",icon:k.RISING_STAR,highlight:!0,children:t("navigation.menu.register")}),s.jsx(Kn,{}),s.jsx(pe,{href:"/settings",icon:k.SETTINGS,children:t("navigation.menu.settings")}),s.jsx(pe,{href:"/about",icon:k.CIRCLE_QUESTION,children:t("navigation.menu.about")}),s.jsx(pe,{href:_().DONATION_LINK,icon:k.DONATION,children:t("navigation.menu.donation")}),i?s.jsx(pe,{className:"!text-type-danger opacity-75 hover:opacity-100",icon:k.LOGOUT,onClick:l,children:t("navigation.menu.logout")}):null,s.jsx(Kn,{}),s.jsxs("div",{className:"my-4 flex justify-center items-center gap-4",children:[s.jsx(It,{href:_().DISCORD_LINK,icon:k.DISCORD}),s.jsx(It,{href:_().GITHUB_LINK,icon:k.GITHUB}),s.jsx(It,{href:_().DONATION_LINK,icon:k.DONATION})]})]})})]})}class Il{constructor(t){this.x=0,this.y=0,this.radius=0,this.direction=0,this.speed=0,this.lifetime=0,this.ran=0,this.image=null,this.size=10;let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{horizontalMotion:!1,sizeRange:[10,10]};n.imgSrc&&(this.image=new Image,this.image.src=n.imgSrc),this.options=n,this.reset(t),this.initialize(t)}reset(t){this.x=Math.round(Math.random()*t.width/2+t.width/4),this.y=Math.random()*100+5,this.radius=1+Math.floor(Math.random()*.5),this.direction=Math.random()*Math.PI/2+Math.PI/4,this.speed=.02+Math.random()*.08;const n=60;this.lifetime=n*3+Math.random()*(n*30),this.size=this.options.sizeRange?Math.random()*(this.options.sizeRange[1]-this.options.sizeRange[0])+this.options.sizeRange[0]:10,this.options.horizontalMotion&&(this.direction=Math.random()<=.5?0:Math.PI,this.lifetime=30*n),this.ran=0}initialize(t){this.ran=Math.random()*this.lifetime;const n=this.speed;this.speed=Math.random()*this.lifetime*n,this.update(t),this.speed=n}update(t){this.ran+=1;const n=this.speed*Math.cos(this.direction),r=this.speed*Math.sin(this.direction);this.x+=n,this.y+=r,this.ran>this.lifetime&&this.reset(t)}render(t){const n=t.getContext("2d");if(!n)return;n.save(),n.beginPath();const r=this.ran/this.lifetime,i=(r-r*r)*4;if(n.globalAlpha=Math.max(0,i*.8),this.image){n.translate(this.x,this.y);const a=this.size,o=this.image.naturalWidth/this.image.naturalHeight*a;n.rotate(this.direction-Math.PI),n.drawImage(this.image,-a/2,o,o,a)}else n.ellipse(this.x,this.y,this.radius,this.radius*1.5,this.direction,0,Math.PI*2),n.fillStyle="white",n.fill();n.restore()}}function Ll(){const e=d.useRef(null);return d.useEffect(()=>{var g,y;if(!e.current)return;const t=e.current,n=[];t.width=t.scrollWidth,t.height=t.scrollHeight;const r=20;let i=r,a=[];const o=new Date,l=o.getMonth(),c=o.getDate();l===11&&c>=24&&c<=26&&(a=[{image:"/lightbar-images/snowflake.svg",sizeRange:[4,15]},{image:"/lightbar-images/santa.png",sizeRange:[15,30]}]),Math.floor(Math.random()*600)===69&&(a=[{image:"/lightbar-images/fishie.png",sizeRange:[10,11]}],i=r/2);for(let p=0;p<r;p+=1){const v=a&&p<=i,j=Math.floor(Math.random()*a.length),T=(g=a[j])==null?void 0:g.sizeRange,L=(y=a[j])==null?void 0:y.image,w=new Il(t,{imgSrc:v?L:void 0,horizontalMotion:L==null?void 0:L.includes("fishie"),sizeRange:T});n.push(w)}let m=!0,b=null;function f(){if(t.getContext("2d")){if(m){for(const v of n)v.update(t);m=!1}t.width=t.scrollWidth,t.height=t.scrollHeight;for(const v of n)v.render(t);b=requestAnimationFrame(f)}}const h=setInterval(()=>{m=!0},1e3/120);return f(),()=>{b&&cancelAnimationFrame(b),clearInterval(h)}},[]),s.jsx("canvas",{className:"particles",ref:e})}const Tl=function(t){return s.jsx("div",{className:"absolute inset-0 w-full h-[680px] overflow-hidden pointer-events-none -mt-64",children:s.jsx("div",{className:"max-w-screen w-full h-[680px] relative pt-64",children:s.jsx("div",{className:t.className,children:s.jsxs("div",{className:"lightbar",children:[s.jsx(Ll,{}),s.jsx("div",{className:"lightbar-visual"})]})})})})},Pl=Tl,ne=G(q(e=>({banners:[],isOnline:!0,isTurnstile:!1,location:null,updateOnline(t){e(n=>{n.isOnline=t})},updateTurnstile(t){e(n=>{n.isTurnstile=t})},setLocation(t){e(n=>{n.location=t})},showBanner(t){e(n=>{n.banners.find(r=>r.id===t)||n.banners.push({id:t,height:0})})},hideBanner(t){e(n=>{n.banners=n.banners.filter(r=>r.id!==t)})},updateHeight(t,n){e(r=>{const i=r.banners.find(a=>a.id===t);i&&(i.height=n)})}})));function jt(e){const t=e??null,n=ne(a=>a.banners),r=ne(a=>a.location),i=n.reduce((a,o)=>a+o.height,0);return t!==r?0:i}function Rl(e){const[t,{height:n}]=hi(),r=ne(o=>o.updateHeight),i=ne(o=>o.showBanner),a=ne(o=>o.hideBanner);return d.useEffect(()=>(i(e),()=>{a(e)}),[i,a,e]),d.useEffect(()=>{r(e,n)},[n,e,r]),[t]}const Al=function(t){const n=jt(),{loggedIn:r}=Ne();return s.jsxs(s.Fragment,{children:[t.noLightbar?null:s.jsx("div",{className:"absolute inset-x-0 top-0 flex h-[88px] items-center justify-center",style:{top:`${n}px`},children:s.jsx("div",{className:"absolute inset-x-0 -mt-[22%] flex items-center sm:mt-0",children:s.jsx(Pl,{})})}),s.jsx("div",{className:"fixed z-[20] pointer-events-none left-0 right-0 top-0 min-h-[150px]",style:{top:`${n}px`},children:s.jsxs("div",{className:S("fixed left-0 right-0 h-20 flex items-center",t.doBackground?"bg-background-main border-b border-utils-divider border-opacity-50":null),children:[t.doBackground?s.jsx("div",{className:"absolute w-full h-full inset-0 overflow-hidden",children:s.jsx(wt,{positionClass:"absolute"})}):null,s.jsx("div",{className:"opacity-0 absolute inset-0 block h-20 pointer-events-auto"}),s.jsx("div",{className:`${t.bg?"opacity-100":"opacity-0"} absolute inset-0 block h-24 bg-background-main transition-opacity duration-300`,children:s.jsx("div",{className:"absolute -bottom-24 h-24 w-full bg-gradient-to-b from-background-main to-transparent"})})]})}),s.jsx("div",{className:"fixed pointer-events-none left-0 right-0 z-[60] top-0 min-h-[150px]",style:{top:`${n}px`},children:s.jsx("div",{className:S("fixed left-0 right-0 flex items-center"),children:s.jsxs("div",{className:"px-7 py-5 relative z-[60] flex flex-1 items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-1.5 ssm:space-x-3 pointer-events-auto",children:[s.jsx(en,{className:"block tabbable rounded-full text-xs ssm:text-base",to:"/",children:s.jsx(Ce,{clickable:!0})}),s.jsx("a",{href:_().DISCORD_LINK,target:"_blank",rel:"noreferrer",className:"text-xl text-white tabbable rounded-full",children:s.jsx(ct,{icon:k.DISCORD,clickable:!0,downsized:!0})}),s.jsx("a",{href:_().GITHUB_LINK,target:"_blank",rel:"noreferrer",className:"text-xl text-white tabbable rounded-full",children:s.jsx(ct,{icon:k.GITHUB,clickable:!0,downsized:!0})})]}),s.jsx("div",{className:"relative pointer-events-auto",children:s.jsx(El,{children:r?s.jsx(rr,{withName:!0}):s.jsx(Nl,{})})})]})})})]})},fn=Al;function wt(e){return s.jsxs(s.Fragment,{children:[s.jsx("div",{className:S(e.positionClass??"fixed","top-0 -right-48 rotate-[32deg] w-[50rem] h-[15rem] rounded-[70rem] bg-background-accentA blur-[100px] pointer-events-none opacity-25")}),s.jsx("div",{className:S(e.positionClass??"fixed","top-0 right-48 rotate-[32deg] w-[50rem] h-[15rem] rounded-[70rem] bg-background-accentB blur-[100px] pointer-events-none opacity-25")})]})}function He(e){return s.jsxs("div",{className:"bg-background-main",style:{backgroundImage:"linear-gradient(to bottom, var(--tw-gradient-from), var(--tw-gradient-to) 800px)"},children:[s.jsx(wt,{}),s.jsxs(nr,{children:[s.jsx(fn,{doBackground:!0,noLightbar:!0}),s.jsx("div",{className:"mt-40 relative",children:e.children})]})]})}function Ml(){const{t:e}=C();return s.jsxs("div",{className:"flex flex-col justify-center items-center h-screen text-center font-medium",children:[s.jsx(wt,{}),s.jsx("div",{className:"right-[calc(2rem+env(safe-area-inset-right))] top-6 absolute",children:s.jsx(Ce,{})}),s.jsx(Ve,{}),s.jsx("p",{className:"max-w-[19rem] mt-3 mb-12 text-type-secondary",children:e("screens.migration.inProgress")})]})}function ar(e){return s.jsxs("div",{className:"flex flex-col justify-center items-center h-screen text-center font-medium",children:[s.jsx(wt,{}),s.jsx("div",{className:"right-[calc(2rem+env(safe-area-inset-right))] top-6 absolute",children:s.jsx(Ce,{})}),e.iconSlot?e.iconSlot:null,s.jsx("div",{className:"max-w-[19rem] mt-3 mb-12 text-type-secondary",children:e.children})]})}function _l(){const e=ne(n=>n.updateOnline),t=d.useRef(!0);d.useEffect(()=>{let n=0,r=null;const i=setInterval(()=>{if(n+=1,t.current&&n<10)return;n=0,r&&r.abort(),r=new AbortController;const a=r.signal;fetch("/ping.txt",{signal:a}).then(()=>{e(!0),t.current=!0}).catch(o=>{o.name!=="AbortError"&&(e(!1),t.current=!1)})},5e3);return()=>{clearInterval(i),r&&r.abort()}},[e])}const Ol=function(t){return s.jsx("ol",{children:t.items.map((n,r)=>s.jsxs("li",{className:S("grid grid-cols-[auto,1fr] gap-6",r!==t.items.length-1?"pb-12":void 0),children:[s.jsxs("div",{className:"relative z-0",children:[s.jsx("div",{className:"w-7 h-7 rounded-full bg-about-circle text-about-circleText font-medium flex justify-center items-center relative z-10",children:r+1}),r!==t.items.length-1?s.jsx("div",{className:"h-[calc(100%+1.5rem)] w-px absolute top-6 left-1/2 transform -translate-x-1/2",style:{backgroundImage:"linear-gradient(to bottom, transparent 5px, #1F1F29 5px, #1F1F29 10px)",backgroundSize:"10px 10px",backgroundRepeat:"Repeat"}}):null]}),s.jsx("div",{children:n})]}))})},Dl=Ol;function Lt(e){return s.jsxs(s.Fragment,{children:[s.jsx("p",{className:"text-white mb-2 font-medium",children:e.title}),s.jsx("div",{className:"text-type-text",children:e.children})]})}function Bl(){const{t:e}=C();return s.jsxs(He,{children:[s.jsx(vt,{subpage:!0,k:"global.pages.about"}),s.jsxs(yt,{children:[s.jsx(un,{children:e("about.title")}),s.jsx(we,{children:e("about.description")}),s.jsx($e,{children:e("about.faqTitle")}),s.jsx(Dl,{items:[s.jsx(Lt,{title:e("about.q1.title"),children:e("about.q1.body")}),s.jsx(Lt,{title:e("about.q2.title"),children:e("about.q2.body")}),s.jsx(Lt,{title:e("about.q3.title"),children:e("about.q3.body")})]})]})]})}function gn(e){return s.jsx("hr",{className:S("w-full h-px border-0 bg-utils-divider bg-opacity-50",e.marginClass??"my-8")})}function Tt(e){return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex",children:[s.jsx("p",{className:"flex-1 font-bold text-white",children:e.name}),s.jsx("p",{children:e.children})]}),s.jsx(gn,{marginClass:"my-3"})]})}function Ul(){const e=_().NORMAL_ROUTER,t=_().APP_VERSION,n=_().BACKEND_URL;return s.jsxs(s.Fragment,{children:[s.jsx($e,{className:"mb-8 mt-12",children:"Configured values"}),s.jsx(Tt,{name:"Routing mode",children:e?"Normal routing":"Hash based routing"}),s.jsxs(Tt,{name:"Application version",children:["v",t]}),s.jsx(Tt,{name:"Backend URL",children:n})]})}function xn(e){return s.jsx("div",{className:"bg-video-scraping-card rounded-xl p-8",children:e.children})}function Fl(){const e=_().TMDB_READ_API_KEY,[t,n]=d.useState({hasTested:!1,success:!1,errorText:""}),[r,i]=se(async()=>{if(n({hasTested:!1,success:!1,errorText:""}),e.length===0)return n({hasTested:!0,success:!1,errorText:"TMDB api key is not set"});if(!(e.split(".").length>2))return n({hasTested:!0,success:!1,errorText:"TMDB api key is not a read only key"});try{await xt("556574",K.MOVIE)}catch{return n({hasTested:!0,success:!1,errorText:"Failed to call tmdb, double check api key and your internet connection"})}return n({hasTested:!0,success:!0,errorText:""})},[e,n]);return s.jsxs(s.Fragment,{children:[s.jsx($e,{className:"mb-8 mt-12",children:"TMDB tests"}),s.jsx(xn,{children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-1",children:t.hasTested?t.success?s.jsxs("p",{className:"flex items-center",children:[s.jsx(I,{icon:k.CIRCLE_CHECK,className:"text-video-scraping-success mr-2"}),"TMDB is working as expected"]}):s.jsxs(s.Fragment,{children:[s.jsxs("p",{className:"text-white font-bold w-full mb-3 flex items-center gap-1",children:[s.jsx(I,{icon:k.CIRCLE_EXCLAMATION,className:"text-video-scraping-error mr-2"}),"TMDB is not working"]}),s.jsx("p",{children:t.errorText})]}):s.jsx("p",{children:"Run the test to validate TMDB"})}),s.jsxs(M,{theme:"purple",onClick:i,children:[r.loading?s.jsx(pt,{className:"text-base mr-2"}):null,"Test TMDB"]})]})})]})}function Xe(e){return s.jsxs("div",{className:"flex mb-2",children:[s.jsx(I,{icon:e.errored?k.WARNING:e.success?k.CIRCLE_CHECK:k.EYE_SLASH,className:S({"text-xl mr-2 mt-0.5":!0,"text-video-scraping-error":e.errored,"text-video-scraping-noresult":!e.errored&&!e.success,"text-video-scraping-success":e.success})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-white font-bold",children:e.name}),e.errorText?s.jsx("p",{children:e.errorText}):null]})]})}function Vl(){const e=d.useMemo(()=>Ts().map((a,o)=>({id:o.toString(),url:a})),[]),[t,n]=d.useState([]),[r,i]=se(async()=>{function a(o,l){n(c=>[...c.filter(u=>u.id!==o),l])}n([]);for(const o of e)try{if(o.url.endsWith("/")){a(o.id,{id:o.id,status:"error",error:new Error("URL ends with slash")});continue}await Os(o.url,"https://postman-echo.com/get",{}),a(o.id,{id:o.id,status:"success"})}catch(l){a(o.id,{id:o.id,status:"error",error:l})}},[e,n]);return s.jsxs(s.Fragment,{children:[s.jsx($e,{className:"!mb-0 mt-12",children:"Worker tests"}),s.jsxs("p",{className:"mb-8 mt-2",children:[e.length," worker(s) registered"]}),s.jsxs(xn,{children:[e.map((a,o)=>{var u;const l=t.find(m=>m.id===a.id),c=`Worker ${o+1}`;return l?l.status==="error"?s.jsx(Xe,{name:c,errored:!0,errorText:(u=l.error)==null?void 0:u.toString()},a.id):l.status==="success"?s.jsx(Xe,{name:c,success:!0},a.id):s.jsx(Xe,{name:c},a.id):s.jsx(Xe,{name:c},a.id)}),s.jsx(gn,{}),s.jsx("div",{className:"flex justify-end",children:s.jsx(M,{theme:"purple",loading:r.loading,onClick:i,children:"Test workers"})})]})]})}async function or(e){return A("/meta",{baseURL:e})}function $l(){var a,o,l,c;const e=_().BACKEND_URL,[t,n]=d.useState({hasTested:!1,success:!1,errorText:"",value:null}),[r,i]=se(async()=>{n({hasTested:!1,success:!1,errorText:"",value:null});try{const u=await or(e);return n({hasTested:!0,success:!0,errorText:"Failed to call backend, double check the URL key and your internet connection",value:u})}catch{return n({hasTested:!0,success:!1,errorText:"Failed to call backend, double check the URL key and your internet connection",value:null})}},[n]);return s.jsxs(s.Fragment,{children:[s.jsx($e,{className:"mb-8 mt-12",children:"Backend API test"}),s.jsxs(xn,{children:[s.jsx("div",{children:s.jsx("div",{className:"flex-1",children:t.hasTested&&t.success?s.jsxs(s.Fragment,{children:[s.jsxs("p",{children:[s.jsx("span",{className:"inline-block w-36 text-white font-medium",children:"Version:"}),(a=t.value)==null?void 0:a.version]}),s.jsxs("p",{children:[s.jsx("span",{className:"inline-block w-36 text-white font-medium",children:"Backend name:"}),(o=t.value)==null?void 0:o.name]}),s.jsxs("p",{children:[s.jsx("span",{className:"inline-block w-36 text-white font-medium",children:"Description:"}),((l=t.value)==null?void 0:l.description)??"Not set"]}),s.jsxs("p",{children:[s.jsx("span",{className:"inline-block w-36 text-white font-medium",children:"Captcha enabled:"}),(c=t.value)!=null&&c.hasCaptcha?"Yes":"No"]}),s.jsx(gn,{})]}):null})}),s.jsxs("div",{className:"w-full flex gap-6 justify-between items-center",children:[t.hasTested?t.success?s.jsxs("p",{className:"flex items-center text-md",children:[s.jsx(I,{icon:k.CIRCLE_CHECK,className:"text-video-scraping-success mr-2"}),"Backend is working as expected"]}):s.jsxs("div",{children:[s.jsxs("p",{className:"text-white font-bold w-full mb-3 flex items-center gap-1",children:[s.jsx(I,{icon:k.CIRCLE_EXCLAMATION,className:"text-video-scraping-error mr-2"}),"Backend is not working"]}),s.jsx("p",{children:t.errorText})]}):s.jsx("p",{children:"Run the test to validate backend"}),s.jsx(M,{theme:"purple",loading:r.loading,className:"whitespace-nowrap",onClick:i,children:"Test backend"})]})]})]})}function Hl(){return s.jsx(He,{children:s.jsxs(yt,{children:[s.jsx(un,{children:"Admin tools"}),s.jsx(we,{children:"Useful tools to test out your current deployment"}),s.jsx(Ul,{}),s.jsx($l,{}),s.jsx(Vl,{}),s.jsx(Fl,{})]})})}function Wl(e){return s.jsx("div",{className:"relative my-4 max-w-[25rem]",children:s.jsx(Ge,{value:e.selectedItem,onChange:e.setSelectedItem,children:()=>s.jsxs(s.Fragment,{children:[s.jsxs(Ge.Button,{className:"relative w-full rounded-lg bg-dropdown-background hover:bg-dropdown-hoverBackground py-3 pl-3 pr-10 text-left text-white shadow-md focus:outline-none tabbable cursor-pointer",children:[s.jsxs("span",{className:"flex gap-4 items-center truncate",children:[e.selectedItem.leftIcon?e.selectedItem.leftIcon:null,e.selectedItem.name]}),s.jsx("span",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-2",children:s.jsx(I,{icon:k.UP_DOWN_ARROW,className:"transform transition-transform text-xl text-dropdown-secondary"})})]}),s.jsx(Mt,{as:d.Fragment,leave:"transition ease-in duration-100",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:s.jsx(Ge.Options,{className:"absolute left-0 right-0 top-10 z-[1] mt-4 max-h-60 overflow-auto rounded-md bg-dropdown-background py-1 text-white shadow-lg ring-1 ring-black ring-opacity-5 scrollbar-thin scrollbar-track-background-secondary scrollbar-thumb-type-secondary focus:outline-none sm:top-10",children:e.options.map(t=>s.jsxs(Ge.Option,{className:n=>{let{active:r}=n;return`cursor-pointer flex gap-4 items-center relative select-none py-3 pl-4 pr-4 ${r?"bg-background-secondaryHover text-type-link":"text-white"}`},value:t,children:[t.leftIcon?t.leftIcon:null,t.name]},t.id))})})]})})})}const zl=e=>({casting:{instance:null,player:null,controller:null,setInstance(t){e(n=>{n.casting.instance=t})},setPlayer(t){e(n=>{n.casting.player=t})},setController(t){e(n=>{n.casting.controller=t})},setIsCasting(t){e(n=>{n.interface.isCasting=t})},clear(){e(t=>{t.casting.instance=null})}}}),Ql={unknown:0,360:10,480:20,720:30,1080:40,"4k":25},de=Object.entries(Ql).sort((e,t)=>t[1]-e[1]).map(e=>e[0]);function lr(e,t){if(t.automaticQuality||t.lastChosenQuality===null||t.lastChosenQuality==="unknown")return de.find(i=>e.includes(i));const n=de.indexOf(t.lastChosenQuality);let r;for(let i=n;i<de.length;i+=1)if(e.includes(de[i])){r=de[i];break}if(r)return r;for(let i=n;i>=0;i-=1)if(e.includes(de[i])){r=de[i];break}return r}function Wt(e,t){if(e.type==="hls")return{stream:e,quality:null};if(e.type==="file"){const n=Object.entries(e.qualities).filter(i=>(i[1].url.length??0)>0).map(i=>i[0]),r=lr(n,t);if(r){const i=e.qualities[r];if(i)return{stream:i,quality:r}}}throw new Error("couldn't select quality")}const cr={"4k":"4K",1080:"1080p",360:"360p",480:"480p",720:"720p",unknown:"unknown"},Kl=Object.keys(cr);function ur(e){return cr[e]}const Ae=G(le(q(e=>({quality:{automaticQuality:!0,lastChosenQuality:null},setLastChosenQuality(t){e(n=>{n.quality.lastChosenQuality=t})},setAutomaticQuality(t){e(n=>{n.quality.automaticQuality=t})}})),{name:"__MW::quality"})),R={IDLE:"idle",SCRAPING:"scraping",PLAYING:"playing",SCRAPE_NOT_FOUND:"scrapeNotFound",PLAYBACK_ERROR:"playbackError"};function dr(e){if(e.type==="show"){if(!e.episode||!e.season)throw new Error("missing show data");return{title:e.title,releaseYear:e.releaseYear,tmdbId:e.tmdbId,type:"show",imdbId:e.imdbId,episode:e.episode,season:e.season}}return{title:e.title,releaseYear:e.releaseYear,tmdbId:e.tmdbId,type:"movie",imdbId:e.imdbId}}const Gl=(e,t)=>({source:null,sourceId:null,qualities:[],captionList:[],currentQuality:null,status:R.IDLE,meta:null,caption:{selected:null,asTrack:!1},setSourceId(n){e(r=>{r.sourceId=n})},setStatus(n){e(r=>{r.status=n})},setMeta(n,r){e(i=>{i.meta=n,i.interface.hideNextEpisodeBtn=!1,r&&(i.status=r)})},setCaption(n){var i;(i=t().display)==null||i.setCaption(n),e(a=>{a.caption.selected=n})},setSource(n,r,i){let a=[];n.type==="file"&&(a=Object.keys(n.qualities));const o=Ae.getState(),l=Wt(n,o.quality);e(u=>{u.source=n,u.qualities=a,u.currentQuality=l.quality,u.captionList=r}),t().redisplaySource(i)},redisplaySource(n){var l;const r=t(),i=r.currentQuality;if(!r.source)return;const a=Ae.getState(),o=Wt(r.source,{automaticQuality:a.quality.automaticQuality,lastChosenQuality:i});(l=r.display)==null||l.load({source:o.stream,startAt:n,automaticQuality:a.quality.automaticQuality,preferredQuality:a.quality.lastChosenQuality})},switchQuality(n){var i,a;const r=t();if(r.source)if(r.source.type==="file"){const o=r.source.qualities[n];if(!o)return;e(l=>{l.currentQuality=n}),(i=r.display)==null||i.load({source:o,startAt:r.progress.time,automaticQuality:!1,preferredQuality:n})}else r.source.type==="hls"&&((a=r.display)==null||a.changeQuality(!1,n))},enableAutomaticQuality(){var r;(r=t().display)==null||r.changeQuality(!0,null)}}),ql=(e,t)=>({display:null,setDisplay(n){const r=t().display;if(r&&r.destroy(),!n){e(i=>{i.display=null});return}n.on("pause",()=>e(i=>{i.mediaPlaying.isPaused=!0,i.mediaPlaying.isPlaying=!1})),n.on("play",()=>e(i=>{i.mediaPlaying.hasPlayedOnce=!0,i.mediaPlaying.isPaused=!1,i.mediaPlaying.isPlaying=!0})),n.on("fullscreen",i=>e(a=>{a.interface.isFullscreen=i})),n.on("time",i=>e(a=>{a.progress.time=i})),n.on("volumechange",i=>e(a=>{a.mediaPlaying.volume=i})),n.on("duration",i=>e(a=>{a.progress.duration=i})),n.on("buffered",i=>e(a=>{a.progress.buffered=i})),n.on("loading",i=>e(a=>{a.mediaPlaying.isLoading=i})),n.on("qualities",i=>{e(a=>{a.qualities=i})}),n.on("changedquality",i=>{e(a=>{a.currentQuality=i})}),n.on("needstrack",i=>{e(a=>{a.caption.asTrack=i})}),n.on("canairplay",i=>{e(a=>{a.interface.canAirplay=i})}),n.on("playbackrate",i=>{e(a=>{a.mediaPlaying.playbackRate=i})}),n.on("error",i=>{e(a=>{a.status=R.PLAYBACK_ERROR,a.interface.error=i})}),e(i=>{i.display=n})},reset(){var n;(n=t().display)==null||n.load({source:null,startAt:0,automaticQuality:!1,preferredQuality:null}),e(r=>{r.status=R.IDLE,r.meta=null,r.thumbnails.images=[],r.progress.time=0,r.progress.duration=0})}});let be=function(e){return e[e.REGULAR=0]="REGULAR",e[e.REMAINING=1]="REMAINING",e}({}),X=function(e){return e.NOT_HOVERING="not_hovering",e.MOUSE_HOVER="mouse_hover",e.MOBILE_TAPPED="mobile_tapped",e}({});const Yl=(e,t)=>({interface:{isCasting:!1,hasOpenOverlay:!1,isFullscreen:!1,isSeeking:!1,lastVolume:0,leftControlHovering:!1,isHoveringControls:!1,hovering:X.NOT_HOVERING,lastHoveringState:X.NOT_HOVERING,volumeChangedWithKeybind:!1,volumeChangedWithKeybindDebounce:null,timeFormat:be.REGULAR,canAirplay:!1,hideNextEpisodeBtn:!1,shouldStartFromBeginning:!1},setShouldStartFromBeginning(n){e(r=>{r.interface.shouldStartFromBeginning=n})},setLastVolume(n){e(r=>{r.interface.lastVolume=n})},setHasOpenOverlay(n){e(r=>{r.interface.hasOpenOverlay=n})},setTimeFormat(n){e(r=>{r.interface.timeFormat=n})},updateInterfaceHovering(n){e(r=>{n!==X.NOT_HOVERING&&(r.interface.lastHoveringState=n),r.interface.hovering=n})},setSeeking(n){const r=t().display;r==null||r.setSeeking(n),e(i=>{i.interface.isSeeking=n})},setHoveringLeftControls(n){e(r=>{r.interface.leftControlHovering=n})},setHoveringAnyControls(n){e(r=>{r.interface.isHoveringControls=n})},hideNextEpisodeButton(){e(n=>{n.interface.hideNextEpisodeBtn=!0})}}),Jl=e=>({mediaPlaying:{isPlaying:!1,isPaused:!0,isLoading:!1,isSeeking:!1,isDragSeeking:!1,hasPlayedOnce:!1,volume:1,playbackRate:1},play(){e(t=>{t.mediaPlaying.isPlaying=!0,t.mediaPlaying.isPaused=!1})},pause(){e(t=>{t.mediaPlaying.isPlaying=!1,t.mediaPlaying.isPaused=!1})}}),Xl=e=>({progress:{time:0,duration:0,buffered:0,draggingTime:0},setDraggingTime(t){e(n=>{n.progress.draggingTime=t})}});function Zl(e,t){if(e.length===0)return null;const n=e.findIndex(l=>l.at>t);if(n===-1)return{index:e.length-1,image:e[e.length-1]};const r=e[n];if(n===0)return{index:n,image:r};const i=e[n-1],a=t-i.at,o=r.at-t;return a<o?{index:n-1,image:i}:{index:n,image:r}}const ec=(e,t)=>({thumbnails:{images:[],resetImages(){e(n=>{n.thumbnails.images=[]})},addImage(n){const r=t(),i=r.thumbnails.images.findIndex(o=>o.at>=n.at);if(i===-1){e(o=>{o.thumbnails.images.push(n),o.thumbnails.images=[...o.thumbnails.images]});return}if(r.thumbnails.images[i].at===n.at){e(o=>{o.thumbnails.images[i]=n,o.thumbnails.images=[...o.thumbnails.images]});return}e(o=>{o.thumbnails.images.splice(i,0,n),o.thumbnails.images=[...o.thumbnails.images]})}}}),x=G(q(function(){return{...Yl(...arguments),...Xl(...arguments),...Jl(...arguments),...Gl(...arguments),...ql(...arguments),...zl(...arguments),...ec(...arguments)}})),tc=ha.sanitize;function nc(e,t,n,r){const i=e/1e3+n,a=t/1e3+n;return Math.max(0,i)<=r&&Math.max(0,a)>=r}function sc(e,t,n){return`${e}-${t}-${n}`}function mr(e){const t=e.trim();if(t==="")throw new Error("Given text is empty");const n=nn(t,"vtt");if(ks(n)==="")throw new Error("Invalid subtitle format");return n}function hr(e){const t=e.trim();if(t==="")throw new Error("Given text is empty");const n=nn(t,"srt");if(ks(n)==="")throw new Error("Invalid subtitle format");return n}function rc(e,t){const n=mr(e);return fa(n).filter(r=>r.type==="caption")}function ic(e){return btoa(String.fromCodePoint(...new TextEncoder().encode(e)))}function ac(e){return`data:application/x-subrip;base64,${ic(hr(e))}`}function oc(e){return URL.createObjectURL(new Blob([mr(e)],{type:"text/vtt"}))}function zt(e){return e.map(t=>({id:t.id,language:t.language,url:t.url,needsProxy:t.hasCorsRestrictions}))}const lc=ga().map(e=>`.${e}`),Qt=new Vs;Qt.setCompare((e,t)=>e===t);const cc=24*60*60;async function uc(e){const t=Qt.get(e.url);if(t)return t;let n;if(e.needsProxy?n=await Bt(e.url,{responseType:"text"}):n=await fetch(e.url).then(i=>i.text()),!n)throw new Error("failed to get caption data");const r=hr(n);return Qt.set(e.url,r,cc),r}function kt(){const e=D(f=>f.setLanguage),t=D(f=>f.enabled),n=D(f=>f.resetSubtitleSpecificSettings),r=x(f=>f.setCaption),i=D(f=>f.lastSelectedLanguage),a=x(f=>f.captionList),o=d.useCallback(async f=>{const h=a.find(y=>y.id===f);if(!h)return;const g=await uc(h);r({id:h.id,language:h.language,srtData:g,url:h.url}),n(),e(h.language)},[e,a,r,n]),l=d.useCallback(async f=>{const h=a.find(g=>g.language===f);if(h)return o(h.id)},[a,o]),c=d.useCallback(async()=>{r(null),e(null)},[r,e]),u=d.useCallback(async()=>(await l(i??"en"),!0),[i,l]),m=d.useCallback(async()=>{t?c():await u()},[u,c,t]),b=d.useCallback(async()=>{t&&await u()},[u,t]);return{selectLanguage:l,disable:c,selectLastUsedLanguage:u,toggleLastUsed:m,selectLastUsedLanguageIfEnabled:b,selectCaptionById:o}}function dc(){const e=x(r=>r.display),t=an(r=>r.volume);return{init:d.useCallback(()=>{e==null||e.setVolume(t)},[e,t])}}function mc(){const e=x(i=>i.source),t=d.useMemo(()=>e?JSON.stringify(e):null,[e]),{selectLastUsedLanguageIfEnabled:n}=kt(),r=d.useRef(n);d.useEffect(()=>{r.current=n},[n]),d.useEffect(()=>{t&&r.current()},[t])}function hc(e,t){var i;const n=e[(t==null?void 0:t.tmdbId)??""];if(!n||!t)return 0;if(t.type==="movie")return n.progress?n.progress.watched:0;const r=n.episodes[((i=t.episode)==null?void 0:i.tmdbId)??""];return r?r.progress.watched:0}function fr(){const e=x(f=>f.setStatus),t=x(f=>f.setMeta),n=x(f=>f.setSource),r=x(f=>f.setCaption),i=x(f=>f.setSourceId),a=x(f=>f.status),o=x(f=>f.interface.shouldStartFromBeginning),l=x(f=>f.setShouldStartFromBeginning),c=x(f=>f.reset),u=x(f=>f.meta),{init:m}=dc(),b=H();return{meta:u,reset:c,status:a,shouldStartFromBeginning:o,setShouldStartFromBeginning:l,setMeta(f,h){t(f,h)},playMedia(f,h,g,y){const p=y??hc(b.items,u);r(null),n(f,h,p),i(g),e(R.PLAYING),m()},setScrapeStatus(){e(R.SCRAPING)},setScrapeNotFound(){e(R.SCRAPE_NOT_FOUND)}}}const pn=d.forwardRef((e,t)=>{let{onChange:n,onUnFocus:r,value:i,label:a,name:o,autoComplete:l,className:c,placeholder:u,onFocus:m,passwordToggleable:b}=e,f="text";const[h,g]=d.useState(!0);b&&(f=h?"password":"text");const y=s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:f,ref:t,className:S(c,b&&"pr-12"),placeholder:u,onChange:p=>n&&n(p.target.value),value:i,name:o,autoComplete:l,onBlur:()=>r&&r(),onFocus:()=>m==null?void 0:m(),onKeyDown:p=>p.key==="Enter"?p.target.blur():null}),b?s.jsx("button",{type:"button",className:"absolute top-1/2 -translate-y-1/2 right-1 text-xl p-3",onClick:()=>g(!h),children:s.jsx(I,{icon:h?k.EYE:k.EYE_SLASH})}):null]});return a?s.jsxs("label",{children:[s.jsx("span",{children:a}),y]}):y});function fc(e){return s.jsx("p",{className:S("text-errors-type-secondary",e.marginClass??"mt-6"),children:e.children})}function gc(){const{t:e}=C(),t=x(r=>r.interface.error),n=Xs("error");return s.jsxs(mn,{children:[s.jsxs(dn,{children:[s.jsx(cn,{icon:k.WAND,children:e("player.playbackError.badge")}),s.jsx(Oe,{children:e("player.playbackError.title")}),s.jsx(fc,{children:e("player.playbackError.text")}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx(M,{href:"/",theme:"secondary",padding:"md:px-12 p-2.5",className:"mt-6",children:e("player.playbackError.homeButton")}),s.jsx(M,{onClick:()=>n.show(),theme:"purple",padding:"md:px-12 p-2.5",className:"mt-6",children:e("errors.showError")})]})]}),s.jsx(yl,{onClose:()=>n.hide(),error:t,id:n.id})]})}const te=d.forwardRef((e,t)=>s.jsxs("button",{ref:t,type:"button",onClick:n=>{var r;return(r=e.onClick)==null?void 0:r.call(e,n.currentTarget)},className:S(["tabbable p-2 rounded-full hover:bg-video-buttonBackground hover:bg-opacity-50 transition-transform duration-100 flex items-center gap-3",e.activeClass??"active:scale-110 active:bg-opacity-75 active:text-white",e.className??""]),children:[e.icon&&s.jsx(I,{className:e.iconSizeClass||"text-2xl",icon:e.icon}),e.children]}));function Gn(e){const t=x(i=>i.display),{isPaused:n}=x(i=>i.mediaPlaying),r=()=>{n?t==null||t.play():t==null||t.pause()};return s.jsx(te,{className:e.className,iconSizeClass:e.iconSizeClass,onClick:r,icon:n?k.PLAY:k.PAUSE})}function qn(){const{isFullscreen:e}=x(n=>n.interface),t=x(n=>n.display);return s.jsx(te,{onClick:()=>t==null?void 0:t.toggleFullscreen(),icon:e?k.COMPRESS:k.EXPAND})}const gr=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);let Pt=null;async function ut(){if(Pt===null){const e=new Promise(n=>{setTimeout(()=>n(!1),1e3)}),t=new Promise(n=>{const r=document.createElement("video"),i=()=>{r.removeEventListener("volumechange",i),n(!0)};r.addEventListener("volumechange",i),r.volume=.5});Pt=await Promise.race([t,e])}return Pt}function Nt(){return Y.fullscreenEnabled}function xr(){return Nt()||gr}function pr(){return Nt()||xr()}function br(){return"pictureInPictureEnabled"in document}function yr(){return"webkitSupportsPresentationMode"in document.createElement("video")}function tt(e){return ae.isSupported()?!1:!!e.canPlayType("application/vnd.apple.mpegurl")}function Yn(){const e=x(t=>t.display);return!br()&&!yr()?null:s.jsx(te,{onClick:()=>e==null?void 0:e.togglePictureInPicture(),icon:k.PICTURE_IN_PICTURE})}function xc(e){return`${e.toFixed(2)}%`}function Jn(e){return Number(Math.max(0,Math.min(e,100)).toFixed(2))}function pc(e){return e.type==="mousedown"||e.type==="mouseup"||e.type==="mousemove"}const Rt=e=>pc(e)?e.pageX:e.changedTouches[0].pageX;function bn(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const[r,i]=d.useState(!1),[a,o]=d.useState(0);d.useEffect(()=>{function c(m){if(!r||!e.current)return;const b=e.current.getBoundingClientRect(),f=(Rt(m)-b.left)/e.current.offsetWidth;o(f*100),n&&t(f)}function u(m){if(!r||(i(!1),document.body.removeAttribute("data-no-select"),!e.current))return;const b=e.current.getBoundingClientRect(),f=(Rt(m)-b.left)/e.current.offsetWidth;t(f)}return document.addEventListener("mousemove",c),document.addEventListener("touchmove",c),document.addEventListener("mouseup",u),document.addEventListener("touchend",u),()=>{document.removeEventListener("mousemove",c),document.removeEventListener("touchmove",c),document.removeEventListener("mouseup",u),document.removeEventListener("touchend",u)}},[r,e,t,n]);const l=d.useCallback(c=>{if(i(!0),document.body.setAttribute("data-no-select","true"),!e.current)return;const u=e.current.getBoundingClientRect(),m=(Rt(c)-u.left)/e.current.offsetWidth*100;o(m)},[o,e]);return{dragging:r,dragPercentage:a,dragMouseDown:l}}function nt(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(Number.isNaN(e))return t?"0:00:00":"0:00";let n=e;const r=Math.floor(n%60);n/=60;const i=Math.floor(n%60);n/=60;const a=Math.floor(n),o=r.toString().padStart(2,"0"),l=i.toString().padStart(2,"0");return t?[a,l,o].join(":"):[l,o].join(":")}function Kt(e){return e>60*60}function bc(e){const t=x(o=>o.thumbnails.images),n=d.useMemo(()=>{var o;return(o=Zl(t,e.at))==null?void 0:o.image},[t,e.at]),[r,i]=d.useState({offscreenLeft:0,offscreenRight:0}),a=d.useRef(null);return d.useEffect(()=>{if(!a.current)return;const o=a.current.getBoundingClientRect(),l=32,c=Math.max(0,(o.left-l)*-1),u=Math.max(0,o.right+l-window.innerWidth);i({offscreenLeft:c,offscreenRight:u})},[e.at]),!e.show||!n?null:s.jsx("div",{className:"flex flex-col items-center -translate-x-1/2 pointer-events-none",children:s.jsx("div",{className:"w-screen flex justify-center",children:s.jsx("div",{ref:a,children:s.jsxs("div",{style:{transform:`translateX(${r.offscreenLeft>0?r.offscreenLeft:-r.offscreenRight}px)`},children:[s.jsx("img",{src:n.data,className:"h-24 border rounded-xl border-gray-800"}),s.jsx("p",{className:"text-center mt-1",children:nt(Math.max(e.at,0),Kt(e.at))})]})})})})}function yc(e){const[t,n]=d.useState(-1),r=d.useCallback(a=>{if(!e.current)return;const l=e.current.getBoundingClientRect(),c=(a.pageX-l.left)/e.current.offsetWidth;n(c*100)},[n,e]),i=d.useCallback(()=>{n(-1)},[n]);return{mousePos:t,mouseMove:r,mouseLeave:i}}const vc=function(){const{duration:t,time:n,buffered:r}=x(p=>p.progress),i=x(p=>p.display),a=x(p=>p.setDraggingTime),o=x(p=>p.setSeeking),{isSeeking:l}=x(p=>p.interface),c=d.useCallback(p=>{i==null||i.setTime(p*t)},[t,i]),u=d.useRef(null),{mouseMove:m,mouseLeave:b,mousePos:f}=yc(u),{dragging:h,dragPercentage:g,dragMouseDown:y}=bn(u,c);return d.useEffect(()=>{o(h)},[o,h]),d.useEffect(()=>{a(g/100*t)},[a,t,g]),s.jsxs("div",{className:"w-full relative",dir:"ltr",children:[s.jsx("div",{className:"top-0 absolute inset-x-0",children:s.jsx("div",{className:"absolute bottom-0",style:{left:`${f}%`},children:s.jsx(bc,{at:Math.floor(f/100*t),show:f>-1})})}),s.jsx("div",{className:"w-full",ref:u,children:s.jsx("div",{className:"group w-full h-8 flex items-center cursor-pointer",onMouseDown:y,onTouchStart:y,onMouseLeave:b,onMouseMove:m,children:s.jsxs("div",{className:["relative w-full h-1 bg-progress-background bg-opacity-25 rounded-full transition-[height] duration-100 group-hover:h-1.5",h?"!h-1.5":""].join(" "),children:[s.jsx("div",{className:"absolute top-0 left-0 h-full rounded-full bg-progress-preloaded bg-opacity-50 flex justify-end items-center",style:{width:`${r/t*100}%`}}),s.jsx("div",{className:"absolute top-0 dir-neutral:left-0 h-full rounded-full bg-progress-filled flex justify-end items-center",style:{width:`${Math.max(0,Math.min(1,h?g/100:n/t))*100}%`},children:s.jsx("div",{className:["w-[1rem] min-w-[1rem] h-[1rem] rounded-full transform translate-x-1/2 scale-0 group-hover:scale-100 bg-white transition-[transform] duration-100",l?"scale-100":""].join(" ")})})]})})})]})},jc=vc;function Xn(e){const t=x(i=>i.display),n=x(i=>i.progress.time),r=d.useCallback(()=>{t==null||t.setTime(n+10)},[t,n]);return s.jsx(te,{iconSizeClass:e.iconSizeClass,onClick:r,icon:k.SKIP_FORWARD})}function Zn(e){const t=x(i=>i.display),n=x(i=>i.progress.time),r=d.useCallback(()=>{t==null||t.setTime(n-10)},[t,n]);return s.jsx(te,{iconSizeClass:e.iconSizeClass,onClick:r,icon:k.SKIP_BACKWARD})}function es(e){const t=x(v=>v.interface.timeFormat),n=x(v=>v.setTimeFormat),{duration:r,time:i,draggingTime:a}=x(v=>v.progress),{isSeeking:o}=x(v=>v.interface),{t:l}=C(),c=Kt(r);function u(){n(t===be.REGULAR?be.REMAINING:be.REGULAR)}const m=Math.min(Math.max(o?a:i,0),r),b=Math.abs(m-r),f=nt(b,Kt(b)),h=nt(m,c),g=new Date(Date.now()+b*1e3),y=nt(r,c);let p=t===be.REGULAR?"regular":"remaining";return e.short&&(p=t===be.REGULAR?"shortRegular":"shortRemaining"),s.jsx(te,{onClick:()=>u(),children:s.jsx("span",{children:l(`player.time.${p}`,{timeFinished:g,timeWatched:h,timeLeft:f,duration:y,formatParams:{timeFinished:{hour:"numeric",minute:"numeric"}}})})})}function wc(){return x(t=>t.mediaPlaying.isLoading)?s.jsx(pt,{className:"text-4xl"}):null}function kc(){const e=x(o=>o.display),t=x(o=>o.mediaPlaying.isPlaying),n=x(o=>o.mediaPlaying.isLoading),r=x(o=>o.mediaPlaying.hasPlayedOnce),i=x(o=>o.status),a=d.useCallback(()=>{e==null||e.play()},[e]);return r||t||n||i!==R.PLAYING?null:s.jsx("div",{onClick:a,className:"group pointer-events-auto flex h-16 w-16 cursor-pointer items-center justify-center bg-video-autoPlay-background hover:bg-video-autoPlay-hover rounded-full text-white transition-[background-color,transform] hover:scale-125 active:scale-100",children:s.jsx(I,{icon:k.PLAY,className:"text-2xl transition-transform group-hover:scale-125"})})}function vr(){const e=x(o=>o.mediaPlaying.volume),t=x(o=>o.interface.lastVolume),n=x(o=>o.setLastVolume),r=x(o=>o.display),i=an(o=>o.setVolume),a=()=>{let o=0;e>0?(o=0,n(e)):t>0?o=t:o=1,r==null||r.setVolume(o),i(o)};return{toggleMute(){a()},setVolume(o){i(o),n(o),r==null||r.setVolume(o)}}}const Nc=function(t){const n=d.useRef(null),r=x(p=>p.setHoveringLeftControls),i=x(p=>p.interface.leftControlHovering),a=x(p=>p.mediaPlaying.volume),{setVolume:o,toggleMute:l}=vr(),c=d.useCallback(p=>{o(p)},[o]),{dragging:u,dragPercentage:m,dragMouseDown:b}=bn(n,c,!0),f=d.useCallback(()=>{l()},[l]),h=d.useCallback(async()=>{await ut()&&r(!0)},[r]);let g=Jn(a*100);u&&(g=Jn(m));const y=xc(g);return s.jsx("div",{className:t.className,onMouseEnter:h,children:s.jsxs("div",{className:"pointer-events-auto flex cursor-pointer items-center py-0",children:[s.jsx("div",{className:"px-4 text-2xl text-white",onClick:f,children:s.jsx(I,{icon:g>0?k.VOLUME:k.VOLUME_X})}),s.jsx("div",{className:`linear -ml-2 w-0 overflow-hidden transition-[width,opacity] duration-300 ${i||u?"!w-24 opacity-100":"w-4 opacity-0"}`,children:s.jsx("div",{ref:n,className:"flex h-10 w-20 items-center px-2",onMouseDown:b,onTouchStart:b,children:s.jsx("div",{className:"relative h-1 flex-1 rounded-full bg-gray-500 bg-opacity-50",children:s.jsx("div",{className:"absolute inset-y-0 left-0 flex items-center justify-end rounded-full bg-video-audio-set",style:{width:y},children:s.jsx("div",{className:"absolute h-3 w-3 translate-x-1/2 rounded-full bg-white"})})})})})]})})},Sc=Nc;function Cc(){const e=x(t=>{var n;return(n=t.meta)==null?void 0:n.title});return s.jsx("p",{children:e})}function Ec(){var n,r,i;const{t:e}=C(),t=x(a=>a.meta);return(t==null?void 0:t.type)!=="show"?null:s.jsxs("div",{className:"flex gap-3",children:[s.jsx("span",{className:"text-white font-medium",children:e("media.episodeDisplay",{season:(n=t==null?void 0:t.season)==null?void 0:n.number,episode:(r=t==null?void 0:t.episode)==null?void 0:r.number})}),s.jsx("span",{className:"text-type-secondary font-medium",children:(i=t==null?void 0:t.episode)==null?void 0:i.title})]})}function jr(e){return s.jsxs("div",{className:S("relative",e.className),children:[s.jsx("div",{id:`__overlayRouter::${e.id}`,className:"absolute inset-0 -z-10"}),e.children]})}function St(e){const[t,n]=d.useState(!1),r=d.useRef(!1);return d.useEffect(()=>{function i(){const a=e?window.innerHeight<600:window.innerWidth<1024;r.current!==a&&(r.current=a,n(a))}return i(),window.addEventListener("resize",i),()=>{window.removeEventListener("resize",i)}},[e]),{isMobile:t}}function W(e){const t=Se(e.id),n=t.showBackwardsTransition(e.path),r=t.isCurrentPage(e.path),i=ke(u=>u.registerRoute),a=d.useMemo(()=>t.makePath(e.path),[e.path,t]),{isMobile:o}=St();d.useEffect(()=>{i({id:a,width:e.width,height:e.height})},[e.height,e.width,a,i]);const l=o?"100%":`${e.width}px`;let c="none";return(n==="yes"||n==="no")&&(c=n==="yes"?"slide-full-left":"slide-full-right"),s.jsx(Q,{animation:c,className:"absolute inset-0",durationClass:"duration-[400ms]",show:r,children:s.jsx("div",{className:S(["grid grid-rows-1 max-h-full",e.className]),style:{height:e.height?`${e.height}px`:void 0,width:e.width?l:void 0},children:e.children})})}function Ic(){const e=ke(u=>u.anchorPoint),t=d.useRef(null),[n,r]=d.useState(0),[i,a]=d.useState(0),[o,l]=d.useState(null),c=d.useCallback((u,m)=>{if(!u)return;const b=u.x+u.w/2,f=window.innerHeight-(u.y+u.h);a(window.innerHeight-f-u.h-m.height-30),r(Math.min(b-m.width/2,window.innerWidth-m.width-30))},[]);return d.useEffect(()=>{!e||!o||c(e,o)},[e,c,o]),d.useEffect(()=>{if(!t.current)return;function u(){var f;const b=(f=t.current)==null?void 0:f.getBoundingClientRect();l(b??null)}u();const m=new ResizeObserver(u);return m.observe(t.current),()=>{m.disconnect()}},[]),[t,n,i]}function Lc(e){const[t,n,r]=Ic();return s.jsx("div",{ref:t,style:{transform:`translateX(${n}px) translateY(${r}px)`},className:S(["[&>*]:pointer-events-auto z-10 flex dir-neutral:items-start rtl:justify-start ltr:justify-end dir-neutral:origin-top-left touch-none",e.className]),children:e.children})}const Tc=function(t){const n=Se("hello world :)"),{t:r}=C();return s.jsxs("div",{className:S(["pointer-events-auto px-4 pb-6 z-10 ml-[env(safe-area-inset-left)] mr-[env(safe-area-inset-right)] bottom-0 origin-top-left inset-x-0 absolute overflow-hidden max-h-[calc(100vh-1.5rem)] grid grid-rows-[minmax(0,1fr),auto]",t.className]),children:[t.children,s.jsx("button",{className:"w-full text-video-context-type-main bg-video-context-background z-10 relative hover:bg-video-context-closeHover active:scale-95 rounded-2xl pointer-events-auto transition-all duration-100 flex justify-center items-center py-3 mt-3 font-bold border border-video-context-border hover:text-white",type:"button",onClick:()=>n.close(),children:r("overlays.close")}),s.jsx("div",{className:"pointer-events-none absolute z-0 bottom-0 left-0 w-full h-32 bg-gradient-to-t from-black to-transparent"})]})},Pc=Tc,Rc=200,Ac="--colors-global-accentA";function Mc(e){return s.jsx("div",{tabIndex:e.tabIndex,className:S(e.className,"relative"),onKeyUp:e.onKeyUp,children:e.children})}function _c(e){return s.jsx("div",{className:S(e.className,"relative"),children:e.children})}const Oc=function(t){const n=d.useRef(null),r=t.flareSize??Rc,i=t.cssColorVar??Ac;return d.useEffect(()=>{function a(o){if(!n.current)return;const l=n.current.getBoundingClientRect(),c=r/2;n.current.style.setProperty("--bg-x",`${(o.clientX-l.left-c).toFixed(0)}px`),n.current.style.setProperty("--bg-y",`${(o.clientY-l.top-c).toFixed(0)}px`)}return document.addEventListener("mousemove",a),()=>document.removeEventListener("mousemove",a)},[r]),s.jsx("div",{ref:n,className:S("flare-light pointer-events-none absolute inset-0 overflow-hidden opacity-0 transition-opacity duration-[400ms]",t.className,{"!opacity-100":t.enabled??!1}),style:{backgroundImage:`radial-gradient(circle at center, rgba(var(${i}), 1), rgba(var(${i}), 0) 70%)`,backgroundPosition:"var(--bg-x) var(--bg-y)",backgroundRepeat:"no-repeat",backgroundSize:`${r.toFixed(0)}px ${r.toFixed(0)}px`},children:s.jsx("div",{className:S("absolute inset-[1px] overflow-hidden",t.className,t.backgroundClass),children:s.jsx("div",{className:"absolute inset-0 opacity-10",style:{background:`radial-gradient(circle at center, rgba(var(${i}), 1), rgba(var(${i}), 0) 70%)`,backgroundPosition:"var(--bg-x) var(--bg-y)",backgroundRepeat:"no-repeat",backgroundSize:`${r.toFixed(0)}px ${r.toFixed(0)}px`}})})})},Dc=Oc,Z={Base:Mc,Light:Dc,Child:_c};function Bc(e){const t=d.useRef(null),{isMobile:n}=St(),r=ke(u=>u.routes),i=Se(e.id),a=d.useMemo(()=>r[i.currentRoute??""],[r,i]),[o,l]=ri(()=>({from:{height:`${(a==null?void 0:a.height)??0}px`,width:n?"100%":`${(a==null?void 0:a.width)??0}px`},config:{easing:ii.linear}}),[]),c=d.useRef(null);return d.useEffect(()=>{const u={height:a==null?void 0:a.height,width:a==null?void 0:a.width,isMobile:n},m=JSON.stringify(u);if(m!==c.current){const b=c.current?JSON.parse(c.current):null;c.current=m,u.isMobile?(l.set({width:"100%"}),l.start({height:`${(a==null?void 0:a.height)??0}px`})):(b==null?void 0:b.height)===void 0&&u.height!==void 0?l.set({height:`${(a==null?void 0:a.height)??0}px`,width:`${(a==null?void 0:a.width)??0}px`}):l.start({height:`${(a==null?void 0:a.height)??0}px`,width:`${(a==null?void 0:a.width)??0}px`})}},[a==null?void 0:a.height,a==null?void 0:a.width,n,l]),s.jsx(fi.div,{ref:t,style:o,className:"overflow-hidden relative z-10 max-h-full",children:s.jsxs(Z.Base,{className:"group w-full bg-video-context-border h-full rounded-2xl transition-colors duration-100 text-video-context-type-main",children:[s.jsx(Z.Light,{flareSize:400,cssColorVar:"--colors-video-context-light",backgroundClass:"bg-video-context-background duration-100",className:"rounded-2xl opacity-100"}),s.jsx(Z.Child,{className:"pointer-events-auto relative transition-transform duration-100 h-full",children:e.children})]})})}function wr(e){const{isMobile:t}=St(),n=s.jsx(Bc,{id:e.id,children:e.children});return t?s.jsx(Pc,{children:n}):s.jsx(Lc,{children:n})}const Uc={"4k":"4k",1080:"1080",480:"480",360:"360",720:"720",unknown:"unknown"},Fc=Object.keys(Uc),Vc=["mp4"];function $c(e){return Fc.includes(e)}function Gt(e){if(e.stream.type==="hls")return{type:"hls",url:e.stream.playlist};if(e.stream.type==="file"){const t={};return Object.entries(e.stream.qualities).forEach(n=>{if(!$c(n[0])){console.warn(`unrecognized quality: ${n[0]}`);return}if(!Vc.includes(n[1].type)){console.warn(`unrecognized file type: ${n[1].type}`);return}t[n[0]]={type:n[1].type,url:n[1].url}}),{type:"file",qualities:t}}throw new Error("unrecognized type")}function Hc(e,t,n,r){const i=x(h=>h.setSource),a=x(h=>h.setCaption),o=x(h=>h.setSourceId),l=x(h=>h.progress.time),c=x(h=>h.meta),u=B(e),{report:m}=Cs(),[b,f]=se(async()=>{const h=As();let g;if(c){try{if(h){const y=_t(h);g=await(await Ot(y.scrapeEmbed(r,n),["completed","noOutput"])).promise()}else g=await Dt.runEmbedScraper({id:r,url:n})}catch(y){console.error(`Failed to scrape ${r}`,y);const v=y instanceof ve?"notfound":"failed";throw m([ye(c,t,r,v,y)]),y}m([ye(c,t,null,"success",null)]),o(t),a(null),i(Gt({stream:g.stream[0]}),zt(g.stream[0].captions),l),u.close()}},[r,t,c,u,m,a]);return{run:f,loading:b.loading,errored:!!b.error}}function Wc(e,t){const n=x(b=>b.meta),r=x(b=>b.setSource),i=x(b=>b.setCaption),a=x(b=>b.setSourceId),o=x(b=>b.progress.time),l=B(t),{report:c}=Cs(),[u,m]=se(async()=>{if(!e||!n)return null;const b=dr(n),f=As();let h;try{if(f){const g=_t(f);h=await(await Ot(g.scrapeSource(e,b),["completed","noOutput"])).promise()}else h=await Dt.runSourceScraper({id:e,media:b})}catch(g){console.error(`Failed to scrape ${e}`,g);const p=g instanceof ve?"notfound":"failed";throw c([ye(n,e,null,p,g)]),g}if(c([ye(n,e,null,"success",null)]),h.stream)return i(null),r(Gt({stream:h.stream[0]}),zt(h.stream[0].captions),o),a(e),l.close(),null;if(h.embeds.length===1){let g;if(!n)return;try{if(f){const y=_t(f);g=await(await Ot(y.scrapeEmbed(h.embeds[0].embedId,h.embeds[0].url),["completed","noOutput"])).promise()}else g=await Dt.runEmbedScraper({id:h.embeds[0].embedId,url:h.embeds[0].url})}catch(y){console.error(`Failed to scrape ${h.embeds[0].embedId}`,y);const v=y instanceof ve?"notfound":"failed";throw c([ye(n,e,h.embeds[0].embedId,v,y)]),y}c([ye(n,e,h.embeds[0].embedId,"success",null)]),a(e),i(null),r(Gt({stream:g.stream[0]}),zt(g.stream[0].captions),o),l.close()}return h.embeds},[e,n,l,i]);return{run:m,watching:(u.value??null)===null,loading:u.loading,items:u.value,notfound:u.error instanceof ve,errored:!!u.error}}function zc(e){return s.jsx("div",{className:"h-full grid grid-rows-[1fr]",children:s.jsx("div",{className:"px-6 h-full flex flex-col justify-start overflow-y-auto overflow-x-hidden",children:e.children})})}function Qc(e){return s.jsx("div",{className:"[&>*]:px-6 h-full grid grid-rows-[auto,1fr] [&>*:nth-child(2)]:overflow-y-auto [&>*:nth-child(2)]:overflow-x-hidden",children:e.children})}const Kc=Object.freeze(Object.defineProperty({__proto__:null,Card:zc,CardWithScrollable:Qc},Symbol.toStringTag,{value:"Module"}));function kr(e){return s.jsx("div",{children:s.jsxs("h3",{className:"font-bold text-video-context-type-main pb-3 pt-5 border-b border-video-context-border flex justify-between items-center",children:[s.jsx("div",{className:"flex items-center space-x-3",children:e.children}),s.jsx("div",{children:e.rightSide})]})})}function Gc(e){return s.jsx("button",{type:"button",onClick:e.onClick,children:s.jsx(I,{className:"text-xl",icon:e.icon})})}function qc(){return s.jsx("hr",{className:"!my-4 border-0 w-full h-px bg-video-context-border"})}function Yc(e){return s.jsx("p",{className:"text-sm mt-8 font-medium",children:e.children})}function Jc(e){return s.jsx("a",{type:"button",className:"text-video-context-type-accent cursor-pointer",onClick:e.onClick,children:e.children})}function Xc(e){return s.jsx("p",{className:"font-medium",children:e.children})}function Zc(e){return s.jsx("p",{className:e.marginClass??"my-3",children:e.children})}function eu(e){return s.jsx("span",{className:"text-white",children:e.children})}function tu(e){return s.jsx("div",{className:"w-full h-full flex justify-center items-center text-center",children:s.jsxs("div",{className:"flex items-center gap-4 flex-col",children:[e.noIcon?null:s.jsx("div",{className:"w-16 h-10 border border-video-context-border rounded-lg flex justify-center items-center",children:s.jsx(I,{className:"text-xl",icon:k.EYE_SLASH})}),e.title?s.jsx("h2",{className:"text-white text-lg font-bold",children:e.title}):null,s.jsx("div",{children:e.children})]})})}const nu=Object.freeze(Object.defineProperty({__proto__:null,Anchor:Jc,Divider:qc,FieldTitle:Xc,Highlight:eu,IconButton:Gc,Paragraph:Zc,SmallText:Yc,TextDisplay:tu,Title:kr},Symbol.toStringTag,{value:"Module"}));function Nr(e){return s.jsxs("span",{className:"text-white flex items-center font-medium",children:[e.children,s.jsx(I,{className:"text-xl ml-1 -mr-1.5",icon:k.CHEVRON_RIGHT})]})}function yn(e){return s.jsx("span",{className:S(["font-medium text-left",e.textClass||"text-video-context-type-main"]),children:e.children})}function su(e){return s.jsxs(kr,{rightSide:e.rightSide,children:[s.jsx("button",{type:"button",className:"-ml-2 p-2 rounded tabbable hover:bg-video-context-light hover:bg-opacity-10",onClick:e.onClick,children:s.jsx(I,{className:"text-xl",icon:k.ARROW_LEFT})}),s.jsx("span",{className:"line-clamp-1 break-all",children:e.children})]})}function vn(e){const t=S("flex py-2 px-3 rounded-lg w-full -ml-3",{"cursor-default":!e.clickable,"hover:bg-video-context-hoverColor hover:bg-opacity-50 cursor-pointer tabbable":e.clickable,"bg-video-context-hoverColor bg-opacity-50":e.active}),n={width:"calc(100% + 1.5rem)"},r=s.jsxs("div",{className:S("flex items-center flex-1",e.className),children:[s.jsx("div",{className:"flex-1 text-left",children:e.children}),s.jsx("div",{className:"flex",children:e.rightSide})]});return e.onClick?s.jsx("button",{type:"button",className:t,style:n,onClick:e.onClick,"data-active-link":e.active?!0:void 0,children:r}):s.jsx("div",{className:t,style:n,"data-active-link":e.active?!0:void 0,children:r})}function ru(e){const t=s.jsx(Nr,{children:e.rightText});return s.jsx(vn,{onClick:e.onClick,active:e.active,clickable:!0,rightSide:t,children:s.jsx(yn,{children:e.children})})}function We(e){let t;return e.selected&&(t=s.jsx(I,{icon:k.CIRCLE_CHECK,className:"text-xl text-video-context-type-accent"})),e.error&&(t=s.jsx("span",{className:"flex items-center text-video-context-error",children:s.jsx(I,{className:"ml-2",icon:k.WARNING})})),e.loading&&(t=s.jsx(pt,{className:"text-lg"})),s.jsx(vn,{onClick:e.onClick,clickable:!e.disabled,rightSide:t,children:s.jsx(yn,{textClass:S({"text-white":e.selected,"text-video-context-type-main text-opacity-40":e.disabled}),children:e.children})})}const iu=Object.freeze(Object.defineProperty({__proto__:null,BackLink:su,Chevron:Nr,ChevronLink:ru,Link:vn,LinkTitle:yn,SelectableLink:We},Symbol.toStringTag,{value:"Module"}));function au(e){return s.jsx("h3",{className:S("uppercase font-bold text-video-context-type-secondary text-xs pt-8 pl-1 pb-2.5 border-b border-video-context-border",e.className),children:e.children})}function ou(e){return s.jsx("div",{className:S("pt-4 space-y-1",e.className),children:e.children})}function lu(e){const t=d.useRef(null);return d.useEffect(()=>{var o,l,c;const n=(o=t.current)==null?void 0:o.querySelector("[data-active-link]"),r=(l=t.current)==null?void 0:l.getBoundingClientRect(),i=n==null?void 0:n.getBoundingClientRect();if(!i||!r)return;const a=i.top-r.top;(c=t.current)==null||c.scrollTo(0,a-r.height/2+i.height/2)},[e.loaded]),s.jsx("div",{ref:t,className:S("pt-4 space-y-1",e.className),children:e.children})}const cu=Object.freeze(Object.defineProperty({__proto__:null,ScrollToActiveSection:lu,Section:ou,SectionTitle:au},Symbol.toStringTag,{value:"Module"})),N={...Kc,...iu,...cu,...nu};function uu(e){const{t}=C(),n=t("player.menus.sources.unknownOption"),r=d.useMemo(()=>{if(!e.embedId)return n;const l=gt().find(c=>c.id===e.embedId);return(l==null?void 0:l.name)??n},[e.embedId,n]),{run:i,errored:a,loading:o}=Hc(e.routerId,e.sourceId,e.url,e.embedId);return s.jsx(We,{loading:o,error:a,onClick:i,children:s.jsx("span",{className:"flex flex-col",children:s.jsx("span",{children:r})})})}function du(e){let{sourceId:t,id:n}=e;const{t:r}=C(),i=B(n),{run:a,watching:o,notfound:l,loading:c,items:u,errored:m}=Wc(t,n),b=d.useMemo(()=>{if(!t)return"...";const g=gt().find(y=>y.id===t);return(g==null?void 0:g.name)??"..."},[t]),f=d.useRef(null);d.useEffect(()=>{f.current!==t&&(f.current=t,t&&a())},[a,t]);let h=null;return c?h=s.jsx(N.TextDisplay,{noIcon:!0,children:s.jsx(Ve,{})}):l?h=s.jsx(N.TextDisplay,{title:r("player.menus.sources.noStream.title")??void 0,children:r("player.menus.sources.noStream.text")}):(u==null?void 0:u.length)===0?h=s.jsx(N.TextDisplay,{title:r("player.menus.sources.noEmbeds.title")??void 0,children:r("player.menus.sources.noEmbeds.text")}):m?h=s.jsx(N.TextDisplay,{title:r("player.menus.sources.failed.title")??void 0,children:r("player.menus.sources.failed.text")}):o?h=null:u&&t&&(h=u.map(g=>s.jsx(uu,{embedId:g.embedId,url:g.url,routerId:n,sourceId:t},`${g.embedId}-${g.url}`))),s.jsxs(s.Fragment,{children:[s.jsx(N.BackLink,{onClick:()=>i.navigate("/source"),children:b}),s.jsx(N.Section,{children:h})]})}function mu(e){let{id:t,onChoose:n}=e;const{t:r}=C(),i=B(t),a=x(c=>{var u;return(u=c.meta)==null?void 0:u.type}),o=x(c=>c.sourceId),l=d.useMemo(()=>a?gt().filter(c=>c.type==="source").filter(c=>{var u;return(u=c.mediaTypes)==null?void 0:u.includes(a)}):[],[a]);return s.jsxs(s.Fragment,{children:[s.jsx(N.BackLink,{onClick:()=>i.navigate("/"),children:r("player.menus.sources.title")}),s.jsx(N.Section,{children:l.map(c=>s.jsx(We,{onClick:()=>{n==null||n(c.id),i.navigate("/source/embeds")},selected:c.id===o,children:c.name},c.id))})]})}const hu=function(t){return s.jsx("button",{type:"button",onClick:t.onClick,className:S("w-11 h-6 p-1 rounded-full grid transition-colors duration-100 group/toggle tabbable",t.enabled?"bg-buttons-toggle":"bg-buttons-toggleDisabled"),children:s.jsx("div",{className:"relative w-full h-full",children:s.jsx("div",{className:S("scale-90 group-hover/toggle:scale-100 h-full aspect-square rounded-full bg-white absolute transition-all duration-100",t.enabled?"left-full transform -translate-x-full":"left-0")})})})},jn=hu,fu=function(t){return s.jsx("button",{type:"button",className:S("tabbable p-1.5 bg-video-context-buttonFocus rounded transition-colors duration-100",t.active?"bg-opacity-100":"bg-opacity-0 cursor-pointer"),onClick:t.onClick,children:s.jsx("div",{className:"w-6 h-6 rounded-full flex justify-center items-center",style:{backgroundColor:t.color},children:t.active?s.jsx(I,{className:"text-sm text-black",icon:k.CHECKMARK}):null})})},gu=fu,xu=function(t){const n=d.useRef(null),r=d.useRef(null),i=(t.value-t.min)/(t.max-t.min),a=d.useCallback(p=>{var T;const v=t.max-t.min,j=Math.min(Math.max(p,0),1);(T=t.onChange)==null||T.call(t,t.min+v*j)},[t]),{dragging:o,dragPercentage:l,dragMouseDown:c}=bn(r,a,!0),[u,m]=d.useState(!1),[b,f]=d.useState("");d.useEffect(()=>{function p(v){var j;v.key==="Enter"&&u&&((j=n.current)==null||j.blur())}return window.addEventListener("keydown",p),()=>{window.removeEventListener("keydown",p)}},[u]);const h=`tabbable py-1 bg-video-context-inputBg rounded text-white cursor-text ${t.controlButtons?"text-center px-4 w-24":"px-3 text-left w-20"}`,g="tabbable hover:text-white transition-colors duration-100 w-full h-full flex justify-center items-center hover:bg-video-context-buttonOverInputHover rounded",y=t.textTransformer??(p=>p);return s.jsxs("div",{children:[s.jsx(N.FieldTitle,{children:t.label}),s.jsxs("div",{className:"grid items-center grid-cols-[1fr,auto] gap-4",children:[s.jsx("div",{ref:r,children:s.jsx("div",{className:"group/progress w-full h-8 flex items-center cursor-pointer",onMouseDown:c,onTouchStart:c,children:s.jsx("div",{dir:"ltr",className:["relative w-full h-1 bg-video-context-slider bg-opacity-25 rounded-full transition-[height] duration-100 group-hover/progress:h-1.5",o?"!h-1.5":""].join(" "),children:s.jsx("div",{className:"absolute top-0 left-0 h-full rounded-full bg-video-context-sliderFilled flex justify-end items-center",style:{width:`${Math.max(0,Math.min(1,o?l/100:i))*100}%`},children:s.jsx("div",{className:["w-[1rem] min-w-[1rem] h-[1rem] border-[4px] border-video-context-sliderFilled rounded-full transform translate-x-1/2 bg-white transition-[transform] duration-100"].join(" ")})})})})}),s.jsx("div",{children:u?s.jsx("input",{className:h,value:b,autoFocus:!0,onFocus:p=>{p.target.select()},onBlur:p=>{var j;m(!1);const v=Number(p.target.value);Number.isNaN(v)||(j=t.onChange)==null||j.call(t,(t.decimalsAllowed??0)===0?Math.round(v):v)},ref:n,onChange:p=>f(p.target.value)}):s.jsxs("div",{className:"relative",onClick:p=>{p.target.closest(".actions")||(f(t.value.toFixed(t.decimalsAllowed??0)),m(!0))},children:[s.jsx("button",{className:S(h,t.controlButtons?"relative":void 0),type:"button",tabIndex:0,children:y(t.value.toFixed(t.decimalsAllowed??0))}),t.controlButtons?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"actions w-6 h-full absolute left-0 top-0 grid grid-cols-1 items-center justify-center",children:s.jsx("button",{type:"button",onClick:()=>{var p;return(p=t.onChange)==null?void 0:p.call(t,t.value-1/10**(t.decimalsAllowed??0))},className:g,children:s.jsx(I,{icon:k.CHEVRON_LEFT})})}),s.jsx("div",{className:"actions w-6 h-full absolute right-0 top-0 grid grid-cols-1 items-center justify-center",children:s.jsx("button",{type:"button",onClick:()=>{var p;return(p=t.onChange)==null?void 0:p.call(t,t.value+1/10**(t.decimalsAllowed??0))},className:g,children:s.jsx(I,{icon:k.CHEVRON_RIGHT})})})]}):null]})})]})]})},At=xu,pu=["#ffffff","#b0b0b0","#80b1fa","#e2e535"];function bu(e){let{id:t}=e;const{t:n}=C(),r=B(t),i=D(m=>m.styling),a=D(m=>m.overrideCasing),o=D(m=>m.delay),l=D(m=>m.setOverrideCasing),c=D(m=>m.setDelay),u=D(m=>m.updateStyling);return s.jsxs(s.Fragment,{children:[s.jsx(N.BackLink,{onClick:()=>r.navigate("/captions"),children:n("player.menus.subtitles.settings.backlink")}),s.jsxs(N.Section,{className:"space-y-6",children:[s.jsx(At,{label:n("player.menus.subtitles.settings.delay"),max:10,min:-10,onChange:m=>c(m),value:o,textTransformer:m=>`${m}s`,decimalsAllowed:1,controlButtons:!0}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx(N.FieldTitle,{children:n("player.menus.subtitles.settings.fixCapitals")}),s.jsx("div",{className:"flex justify-center items-center",children:s.jsx(jn,{enabled:a,onClick:()=>l(!a)})})]}),s.jsx(N.Divider,{}),s.jsx(At,{label:n("settings.subtitles.backgroundLabel"),max:100,min:0,onChange:m=>u({backgroundOpacity:m/100}),value:i.backgroundOpacity*100,textTransformer:m=>`${m}%`}),s.jsx(At,{label:n("settings.subtitles.textSizeLabel"),max:200,min:1,textTransformer:m=>`${m}%`,onChange:m=>u({size:m/100}),value:i.size*100}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx(N.FieldTitle,{children:n("settings.subtitles.colorLabel")}),s.jsx("div",{className:"flex justify-center items-center",children:pu.map(m=>s.jsx(gu,{onClick:()=>u({color:m}),color:m,active:i.color===m},m))})]})]})]})}function yu(e){return s.jsxs("div",{className:"w-full relative",children:[s.jsx(I,{className:"pointer-events-none absolute top-1/2 left-3 transform -translate-y-1/2 text-video-context-inputPlaceholder",icon:k.SEARCH}),s.jsx("input",{placeholder:"Search",className:"w-full py-2 px-3 pl-[calc(0.75rem+24px)] tabbable bg-video-context-inputBg rounded placeholder:text-video-context-inputPlaceholder",value:e.value,onInput:t=>e.onInput(t.currentTarget.value)})]})}function qt(e){return s.jsx(We,{selected:e.selected,loading:e.loading,error:e.error,onClick:e.onClick,children:s.jsxs("span",{"data-active-link":e.selected?!0:void 0,className:"flex items-center",children:[s.jsx("span",{"data-code":e.countryCode,className:"mr-3 inline-flex",children:s.jsx(da,{langCode:e.countryCode})}),s.jsx("span",{children:e.children})]})})}function vu(){const{t:e}=C(),t=x(a=>{var o;return(o=a.caption.selected)==null?void 0:o.language}),n=x(a=>a.setCaption),r=D(a=>a.setCustomSubs),i=d.useRef(null);return s.jsxs(qt,{selected:t==="custom",onClick:()=>{var a;return(a=i.current)==null?void 0:a.click()},children:[e("player.menus.subtitles.customChoice"),s.jsx("input",{className:"hidden",ref:i,accept:lc.join(","),type:"file",onChange:a=>{if(!a.target.files)return;const o=new FileReader;o.addEventListener("load",l=>{if(!l.target||typeof l.target.result!="string")return;const c=nn(l.target.result,"srt");n({language:"custom",srtData:c,id:"custom-caption"}),r()}),o.readAsText(a.target.files[0],"utf-8")}})]})}function ju(e,t){const{t:n}=C(),r=n("player.menus.subtitles.unknownLanguage");return d.useMemo(()=>{const i=e.map(l=>({...l,languageName:ws(l.language)??r})),a=ma(i.map(l=>l.language));let o=i.sort((l,c)=>a.indexOf(l.language)-a.indexOf(c.language));return t.trim().length>0&&(o=new xa(i,{includeScore:!0,keys:["languageName"]}).search(t).map(c=>c.item)),o},[e,t,r])}function wu(e){let{id:t}=e;const{t:n}=C(),r=B(t),i=x(p=>{var v;return(v=p.caption.selected)==null?void 0:v.id}),[a,o]=d.useState(null),{selectCaptionById:l,disable:c}=kt(),u=x(p=>p.captionList),[m,b]=d.useState(""),f=ju(u,m),[h,g]=se(async p=>(o(p),l(p)),[l,o]),y=f.map((p,v)=>s.jsx(qt,{countryCode:p.language,selected:p.id===i,loading:p.id===a&&h.loading,error:p.id===a&&h.error?h.error.toString():void 0,onClick:()=>g(p.id),children:p.languageName},p.id));return s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsx(N.BackLink,{onClick:()=>r.navigate("/"),rightSide:s.jsx("button",{type:"button",onClick:()=>r.navigate("/captions/settings"),className:"py-1 -my-1 px-3 -mx-3 rounded tabbable",children:n("player.menus.subtitles.customizeLabel")}),children:n("player.menus.subtitles.title")}),s.jsx("div",{className:"mt-3",children:s.jsx(yu,{value:m,onInput:b})})]}),s.jsxs(N.ScrollToActiveSection,{className:"!pt-1 mt-2 pb-3",children:[s.jsx(qt,{onClick:()=>c(),selected:!i,children:n("player.menus.subtitles.offChoice")}),s.jsx(vu,{}),y]})]})}function ku(){const e=x(r=>r.source),t=x(r=>r.currentQuality);return d.useMemo(()=>{var r;return(e==null?void 0:e.type)==="file"&&t?((r=e.qualities[t])==null?void 0:r.url)??null:(e==null?void 0:e.type)==="hls"?e.url:null},[e,t])}function me(e){return s.jsx(Me,{i18nKey:e.k,components:{bold:s.jsx(N.Highlight,{}),ios_share:s.jsx(I,{icon:k.IOS_SHARE,className:"inline-block text-xl -mb-1"}),ios_files:s.jsx(I,{icon:k.IOS_FILES,className:"inline-block text-xl -mb-1"})}})}function Nu(e){let{id:t}=e;const n=B(t),{t:r}=C(),i=ku(),a=x(c=>{var u;return(u=c.source)==null?void 0:u.type}),o=x(c=>{var u;return(u=c.caption)==null?void 0:u.selected}),l=d.useMemo(()=>o?ac(o==null?void 0:o.srtData):null,[o]);return i?s.jsxs(s.Fragment,{children:[s.jsx(N.BackLink,{onClick:()=>n.navigate("/"),children:r("player.menus.downloads.title")}),s.jsx(N.Section,{children:s.jsx("div",{children:a==="hls"?s.jsxs(s.Fragment,{children:[s.jsx(N.Paragraph,{marginClass:"mb-6",children:s.jsx(me,{k:"player.menus.downloads.hlsDisclaimer"})}),s.jsx(M,{className:"w-full",href:i,theme:"purple",children:r("player.menus.downloads.downloadPlaylist")}),s.jsx(M,{className:"w-full mt-2",href:l??void 0,disabled:!l,theme:"secondary",download:"subtitles.srt",children:r("player.menus.downloads.downloadSubtitle")})]}):s.jsxs(s.Fragment,{children:[s.jsx(N.ChevronLink,{onClick:()=>n.navigate("/download/pc"),children:r("player.menus.downloads.onPc.title")}),s.jsx(N.ChevronLink,{onClick:()=>n.navigate("/download/ios"),children:r("player.menus.downloads.onIos.title")}),s.jsx(N.ChevronLink,{onClick:()=>n.navigate("/download/android"),children:r("player.menus.downloads.onAndroid.title")}),s.jsx(N.Divider,{}),s.jsx(N.Paragraph,{marginClass:"my-6",children:s.jsx(me,{k:"player.menus.downloads.disclaimer"})}),s.jsx(M,{className:"w-full",href:i,theme:"purple",children:r("player.menus.downloads.downloadVideo")}),s.jsx(M,{className:"w-full mt-2",href:l??void 0,disabled:!l,theme:"secondary",download:"subtitles.srt",children:r("player.menus.downloads.downloadSubtitle")})]})})})]}):null}function Su(e){let{id:t}=e;const n=B(t),{t:r}=C();return s.jsxs(s.Fragment,{children:[s.jsx(N.BackLink,{onClick:()=>n.navigate("/"),children:r("player.menus.downloads.title")}),s.jsx(N.Section,{children:s.jsx(N.Paragraph,{children:s.jsx(me,{k:"player.menus.downloads.hlsExplanation"})})})]})}function Cu(e){let{id:t}=e;const n=B(t),{t:r}=C();return s.jsxs(s.Fragment,{children:[s.jsx(N.BackLink,{onClick:()=>n.navigate("/download"),children:r("player.menus.downloads.onAndroid.shortTitle")}),s.jsx(N.Section,{children:s.jsx(N.Paragraph,{children:s.jsx(me,{k:"player.menus.downloads.onAndroid.1"})})})]})}function Eu(e){let{id:t}=e;const n=B(t),{t:r}=C();return s.jsxs(s.Fragment,{children:[s.jsx(N.BackLink,{onClick:()=>n.navigate("/download"),children:r("player.menus.downloads.onPc.shortTitle")}),s.jsx(N.Section,{children:s.jsx(N.Paragraph,{children:s.jsx(me,{k:"player.menus.downloads.onPc.1"})})})]})}function Iu(e){let{id:t}=e;const n=B(t);return s.jsxs(s.Fragment,{children:[s.jsx(N.BackLink,{onClick:()=>n.navigate("/download"),children:s.jsx(me,{k:"player.menus.downloads.onIos.shortTitle"})}),s.jsx(N.Section,{children:s.jsx(N.Paragraph,{children:s.jsx(me,{k:"player.menus.downloads.onIos.1"})})})]})}function Lu(e){let{id:t}=e;return s.jsxs(s.Fragment,{children:[s.jsx(W,{id:t,path:"/download",width:343,height:490,children:s.jsx(N.CardWithScrollable,{children:s.jsx(Nu,{id:t})})}),s.jsx(W,{id:t,path:"/download/unable",width:343,height:440,children:s.jsx(N.CardWithScrollable,{children:s.jsx(Su,{id:t})})}),s.jsx(W,{id:t,path:"/download/ios",width:343,height:440,children:s.jsx(N.CardWithScrollable,{children:s.jsx(Iu,{id:t})})}),s.jsx(W,{id:t,path:"/download/android",width:343,height:440,children:s.jsx(N.CardWithScrollable,{children:s.jsx(Cu,{id:t})})}),s.jsx(W,{id:t,path:"/download/pc",width:343,height:440,children:s.jsx(N.CardWithScrollable,{children:s.jsx(Eu,{id:t})})})]})}const Tu=function(t){return s.jsx("div",{className:"flex items-center bg-video-context-buttons-list p-1 rounded-lg",children:t.options.map(n=>s.jsxs("button",{type:"button",className:S("w-full px-2 py-1 rounded-md tabbable",t.selected===n?"bg-video-context-buttons-active text-white":null),onClick:()=>t.onClick(n),children:[n,"x"]},n))})},Pu=Tu;function Ru(e){let{id:t}=e;const{t:n}=C(),r=B(t),i=x(c=>c.mediaPlaying.playbackRate),a=x(c=>c.display),o=d.useCallback(c=>{a==null||a.setPlaybackRate(c)},[a]),l=[.25,.5,1,1.5,2];return s.jsxs(s.Fragment,{children:[s.jsx(N.BackLink,{onClick:()=>r.navigate("/"),children:n("player.menus.playback.title")}),s.jsx(N.Section,{children:s.jsxs("div",{className:"space-y-4 mt-3",children:[s.jsx(N.FieldTitle,{children:n("player.menus.playback.speedLabel")}),s.jsx(Pu,{options:l,selected:i,onClick:o})]})})]})}const Au={unknown:!1,360:!0,480:!0,720:!0,1080:!0,"4k":!1};function Mu(){const e=x(n=>{var r;return(r=n.source)==null?void 0:r.type});return d.useMemo(()=>{const n=document.createElement("video");return!(e!=="hls"||ae.isSupported()||!tt(n))},[e])}function _u(e){let{id:t}=e;const n=B(t),r=Mu(),i=x(g=>g.qualities),a=x(g=>g.currentQuality),o=x(g=>g.switchQuality),l=x(g=>g.enableAutomaticQuality),c=Ae(g=>g.setAutomaticQuality),u=Ae(g=>g.setLastChosenQuality),m=Ae(g=>g.quality.automaticQuality),b=d.useCallback(g=>{u(g),c(!1),o(g),n.close()},[n,o,u,c]),f=d.useCallback(()=>{const g=!m;c(g),g&&l()},[c,m,l]),h=Kl.filter(g=>!!(Au[g]||i.includes(g)));return s.jsxs(s.Fragment,{children:[s.jsx(N.BackLink,{onClick:()=>n.navigate("/"),children:Tn("player.menus.quality.title")}),s.jsxs(N.Section,{className:"flex flex-col pb-4",children:[h.map(g=>s.jsx(We,{selected:g===a,onClick:i.includes(g)?()=>b(g):void 0,disabled:!i.includes(g),children:ur(g)},g)),s.jsx(N.Divider,{}),s.jsx(N.Link,{rightSide:s.jsx(jn,{onClick:f,enabled:m}),children:Tn("player.menus.quality.automaticLabel")}),s.jsx(N.SmallText,{children:s.jsx(Me,{i18nKey:r?"player.menus.quality.iosNoQuality":"player.menus.quality.hint",children:s.jsx(N.Anchor,{onClick:()=>n.navigate("/source"),children:"text"})})})]})]})}function Ou(e){let{id:t}=e;const{t:n}=C(),r=B(t),i=x(h=>h.currentQuality),a=x(h=>{var g;return(g=h.caption.selected)==null?void 0:g.language}),o=D(h=>h.enabled),l=x(h=>h.sourceId),c=d.useMemo(()=>{if(!l)return"...";const h=gt().find(g=>g.id===l);return(h==null?void 0:h.name)??"..."},[l]),{toggleLastUsed:u}=kt(),m=a?ws(a)??n("player.menus.subtitles.unknownLanguage"):void 0,b=x(h=>h.source),f=(b==null?void 0:b.type)==="file"||(b==null?void 0:b.type)==="hls";return s.jsxs(N.Card,{children:[s.jsx(N.SectionTitle,{children:n("player.menus.settings.videoSection")}),s.jsxs(N.Section,{children:[s.jsx(N.ChevronLink,{onClick:()=>r.navigate("/quality"),rightText:i?ur(i):"",children:n("player.menus.settings.qualityItem")}),s.jsx(N.ChevronLink,{onClick:()=>r.navigate("/source"),rightText:c,children:n("player.menus.settings.sourceItem")}),s.jsx(N.Link,{clickable:!0,onClick:()=>r.navigate(f?"/download":"/download/unable"),rightSide:s.jsx(I,{className:"text-xl",icon:k.DOWNLOAD}),className:f?"opacity-100":"opacity-50",children:n("player.menus.settings.downloadItem")})]}),s.jsx(N.SectionTitle,{children:n("player.menus.settings.experienceSection")}),s.jsxs(N.Section,{children:[s.jsx(N.Link,{rightSide:s.jsx(jn,{enabled:o,onClick:()=>u().catch(()=>{})}),children:n("player.menus.settings.enableSubtitles")}),s.jsx(N.ChevronLink,{onClick:()=>r.navigate("/captions"),rightText:m??void 0,children:n("player.menus.settings.subtitleItem")}),s.jsx(N.ChevronLink,{onClick:()=>r.navigate("/playback"),children:n("player.menus.settings.playbackItem")})]})]})}function Du(e){let{id:t}=e;const[n,r]=d.useState(null),i=B(t);return d.useEffect(()=>{i.isRouterActive||r(null),i.route==="/"&&r(null)},[i.isRouterActive,i.route]),s.jsx(Js,{id:t,children:s.jsxs(wr,{id:t,children:[s.jsx(W,{id:t,path:"/",width:343,height:431,children:s.jsx(Ou,{id:t})}),s.jsx(W,{id:t,path:"/quality",width:343,height:400,children:s.jsx(N.Card,{children:s.jsx(_u,{id:t})})}),s.jsx(W,{id:t,path:"/captions",width:343,height:431,children:s.jsx(N.CardWithScrollable,{children:s.jsx(wu,{id:t})})}),s.jsx(W,{id:t,path:"/captions/settings",width:343,height:450,children:s.jsx(N.Card,{children:s.jsx(bu,{id:t})})}),s.jsx(W,{id:t,path:"/source",width:343,height:431,children:s.jsx(N.CardWithScrollable,{children:s.jsx(mu,{id:t,onChoose:r})})}),s.jsx(W,{id:t,path:"/source/embeds",width:343,height:431,children:s.jsx(N.CardWithScrollable,{children:s.jsx(du,{id:t,sourceId:n})})}),s.jsx(W,{id:t,path:"/playback",width:343,height:215,children:s.jsx(N.Card,{children:s.jsx(Ru,{id:t})})}),s.jsx(Lu,{id:t})]})})}function Bu(){return s.jsx(Du,{id:"settings"})}function ts(){const e=B("settings"),t=x(n=>n.setHasOpenOverlay);return d.useEffect(()=>{t(e.isRouterActive)},[t,e.isRouterActive]),s.jsx(jr,{id:e.id,children:s.jsx(te,{onClick:()=>e.open(),icon:k.GEAR})})}const Uu=function(t){const n=t.radius??40;return s.jsxs("svg",{className:`${t.className??""} -rotate-90`,viewBox:"0 0 100 100",children:[s.jsx("circle",{className:`fill-transparent stroke-type-text stroke-[15] opacity-25 ${t.backingRingClassname??""}`,r:n,cx:"50",cy:"50"}),s.jsx("circle",{className:"fill-transparent stroke-current stroke-[15] transition-[stroke-dashoffset] duration-150",r:n,cx:"50",cy:"50",style:{strokeDasharray:`${2*Math.PI*n} ${2*Math.PI*n}`,strokeDashoffset:`${2*Math.PI*n-t.percentage/100*(2*Math.PI*n)}`}})]})},Fu=Uu;function Sr(){const{meta:e,setMeta:t}=fr(),n=d.useMemo(()=>e?dr(e):null,[e]),r=d.useCallback(a=>{t(a,R.SCRAPING)},[t]),i=d.useCallback((a,o)=>{let l;if(a.meta.type===P.SERIES){const c=a.meta.seasonData.episodes.find(u=>u.id===o);if(!c)return null;l={type:"show",releaseYear:+(a.meta.year??0),title:a.meta.title,poster:a.meta.poster,tmdbId:a.tmdbId??"",imdbId:a.imdbId,episodes:a.meta.seasonData.episodes.map(u=>({number:u.number,title:u.title,tmdbId:u.id})),episode:{number:c.number,title:c.title,tmdbId:c.id},season:{number:a.meta.seasonData.number,title:a.meta.seasonData.title,tmdbId:a.meta.seasonData.id}}}else l={type:"movie",releaseYear:+(a.meta.year??0),title:a.meta.title,poster:a.meta.poster,tmdbId:a.tmdbId??"",imdbId:a.imdbId};return r(l),l},[r]);return{playerMeta:e,setPlayerMeta:i,setDirectMeta:r,scrapeMedia:n}}const Ze={};function et(e){if(Ze[e])return Ze[e];const t=new Date,n=new Date(e);return Ze[e]=n<t,Ze[e]}function dt(e){return s.jsx("div",{className:"h-full w-full flex justify-center items-center p-8 text-center",children:e.children})}function Cr(e,t){const[n,r]=d.useState(null);return[ht(async()=>{const a=await Ut(P.SERIES,e,t);return(a==null?void 0:a.meta.type)!==P.SERIES?null:(r(a.meta.seasons),{season:a.meta.seasonData,fullData:a})},[e,t]),n]}function Vu(e){let{selectedSeason:t,setSeason:n}=e;const{t:r}=C(),i=x(c=>c.meta),[a,o]=Cr((i==null?void 0:i.tmdbId)??"",t);let l=null;return o?l=s.jsx(N.Section,{className:"pb-6",children:o==null?void 0:o.map(c=>s.jsx(N.ChevronLink,{onClick:()=>n(c.id),children:c.title},c.id))}):a.error?l=s.jsx(dt,{children:r("player.menus.episodes.loadingError")}):a.loading&&(l=s.jsx(dt,{children:r("player.menus.episodes.loadingList")})),s.jsxs(N.CardWithScrollable,{children:[s.jsx(N.Title,{children:(i==null?void 0:i.title)??r("player.menus.episodes.loadingTitle")}),l]})}function $u(e){var h;let{id:t,selectedSeason:n,goBack:r,onChange:i}=e;const{t:a}=C(),o=B(t),{setPlayerMeta:l}=Sr(),c=x(g=>g.meta),[u]=Cr((c==null?void 0:c.tmdbId)??"",n),m=H(),b=d.useCallback(g=>{if(u.value){const y=l(u.value.fullData,g);y&&(i==null||i(y))}o.close(!0)},[l,u,o,i]);if(!(c!=null&&c.tmdbId))return null;let f=null;if(u.error)f=s.jsx(dt,{children:a("player.menus.episodes.loadingError")});else if(u.loading)f=s.jsx(dt,{children:a("player.menus.episodes.loadingList")});else if(u.value){const g=u.value.season.episodes.some(y=>!et(y.air_date));f=s.jsxs(N.ScrollToActiveSection,{className:"pb-6",children:[u.value.season.episodes.length===0?s.jsx(N.TextDisplay,{title:"No episodes found",children:a("player.menus.episodes.emptyState")}):null,u.value.season.episodes.map(y=>{var j,T,L,w,E,O;const p=(T=(j=m.items[c==null?void 0:c.tmdbId])==null?void 0:j.episodes)==null?void 0:T[y.id];let v;if(p){const U=p.progress.watched/p.progress.duration*100;v=s.jsx(Fu,{className:"h-[18px] w-[18px] text-white",percentage:U>90?100:U})}return s.jsx(N.Link,{onClick:()=>b(y.id),active:y.id===((L=c==null?void 0:c.episode)==null?void 0:L.tmdbId),clickable:et(y.air_date),rightSide:v,children:s.jsx(N.LinkTitle,{children:s.jsxs("div",{className:S("text-left flex items-center space-x-3 text-video-context-type-main",et(y.air_date)||y.id===((w=c==null?void 0:c.episode)==null?void 0:w.tmdbId)?"":"text-opacity-25"),children:[s.jsx("span",{className:S("p-0.5 px-2 rounded inline bg-video-context-hoverColor",y.id===((E=c==null?void 0:c.episode)==null?void 0:E.tmdbId)?"text-white bg-opacity-100":"bg-opacity-50",et(y.air_date)||y.id===((O=c==null?void 0:c.episode)==null?void 0:O.tmdbId)?"":"!bg-opacity-25"),children:a("player.menus.episodes.episodeBadge",{episode:y.number})}),s.jsx("span",{className:"line-clamp-1 break-all",children:y.title})]})})},y.id)}),g?s.jsx("p",{children:a("player.menus.episodes.unairedEpisodes")}):null]})}return s.jsxs(N.CardWithScrollable,{children:[s.jsx(N.BackLink,{onClick:r,children:((h=u==null?void 0:u.value)==null?void 0:h.season.title)||a("player.menus.episodes.loadingTitle")}),f]})}function Hu(e){let{id:t,onChange:n}=e;const r=B(t),i=x(u=>u.meta),[a,o]=d.useState(""),l=d.useRef(!1);d.useEffect(()=>{var u;l.current!==r.isRouterActive&&(l.current=r.isRouterActive,o(((u=i==null?void 0:i.season)==null?void 0:u.tmdbId)??""))},[i,a,o,r.isRouterActive]);const c=d.useCallback(u=>{o(u),r.navigate("/episodes")},[r]);return s.jsx(Js,{id:t,children:s.jsxs(wr,{id:t,children:[s.jsx(W,{id:t,path:"/",width:343,height:431,children:s.jsx(Vu,{setSeason:c,selectedSeason:a})}),s.jsx(W,{id:t,path:"/episodes",width:343,height:431,children:a.length>0?s.jsx($u,{selectedSeason:a,id:t,goBack:()=>r.navigate("/"),onChange:n}):null})]})})}function Wu(e){return s.jsx(Hu,{onChange:e.onChange,id:"episodes"})}function ns(){const{t:e}=C(),t=B("episodes"),n=x(i=>i.setHasOpenOverlay),r=x(i=>{var a;return(a=i.meta)==null?void 0:a.type});return d.useEffect(()=>{n(t.isRouterActive)},[n,t.isRouterActive]),r!=="show"?null:s.jsx(jr,{id:t.id,children:s.jsx(te,{onClick:()=>t.open("/episodes"),icon:k.EPISODES,children:e("player.menus.episodes.button")})})}function ss(){const e=x(n=>n.interface.canAirplay),t=x(n=>n.display);return e?s.jsx(te,{onClick:()=>t==null?void 0:t.startAirplay(),icon:k.AIRPLAY}):null}function zu(){const e=Ks(),t=x(n=>n.mediaPlaying.volume);return s.jsx(Q,{animation:"slide-down",show:e.showVolume,className:"absolute inset-x-0 top-4 flex justify-center pointer-events-none",children:s.jsxs(Z.Base,{className:"hover:flare-enabled pointer-events-auto bg-video-context-background pl-4 pr-6 py-3 group w-72 h-full rounded-lg transition-colors text-video-context-type-main",children:[s.jsx(Z.Light,{enabled:!0,flareSize:200,cssColorVar:"--colors-video-context-light",backgroundClass:"bg-video-context-background duration-100",className:"rounded-lg"}),s.jsxs(Z.Child,{className:"grid grid-cols-[auto,1fr] gap-3 pointer-events-auto relative transition-transform",children:[s.jsx(I,{className:"text-2xl",icon:t>0?k.VOLUME:k.VOLUME_X}),s.jsx("div",{className:"w-full flex items-center",children:s.jsx("div",{className:"w-full h-1.5 rounded-full bg-video-context-slider bg-opacity-25",children:s.jsx("div",{className:"h-full bg-video-context-sliderFilled rounded-full transition-[width] duration-100",style:{width:`${t*100}%`}})})})]})]})})}function Qu(e,t){const n=e/t;return t-e<=30?"always":n>=.9?"hover":"none"}function rs(e){return s.jsx("button",{className:S("font-bold rounded h-10 w-40 scale-95 hover:scale-100 transition-all duration-200",e.className),type:"button",onClick:e.onClick,children:e.children})}function Ku(e){var v;const{t}=C(),n=x(j=>j.progress.duration),r=x(j=>j.interface.hideNextEpisodeBtn),i=x(j=>j.meta),{setDirectMeta:a}=Sr(),o=x(j=>j.hideNextEpisodeButton),l=x(j=>{var T;return(T=j.meta)==null?void 0:T.type}),c=x(j=>j.progress.time),u=Qu(c,n),m=x(j=>j.status),b=x(j=>j.setShouldStartFromBeginning);let f=!1;(u==="always"||u==="hover"&&e.controlsShowing)&&(f=!0),(r||m!=="playing"||n===0)&&(f=!1);const h=u==="hover"?"slide-up":"fade";let g="bottom-[calc(6rem+env(safe-area-inset-bottom))]";u==="always"&&(g=e.controlsShowing?g:"bottom-[calc(3rem+env(safe-area-inset-bottom))]");const y=(v=i==null?void 0:i.episodes)==null?void 0:v.find(j=>{var T;return j.number===(((T=i==null?void 0:i.episode)==null?void 0:T.number)??0)+1}),p=d.useCallback(()=>{var T;if(!i||!y)return;const j={...i};j.episode=y,b(!0),a(j),(T=e.onChange)==null||T.call(e,j)},[a,y,i,e,b]);return!(i!=null&&i.episode)||!y||l!=="show"?null:s.jsx(Q,{animation:h,show:f,className:"absolute right-[calc(3rem+env(safe-area-inset-right))] bottom-0",children:s.jsxs("div",{className:S(["absolute bottom-0 right-0 transition-[bottom] duration-200 flex items-center space-x-3",g]),children:[s.jsx(rs,{className:"py-px box-content bg-buttons-secondary hover:bg-buttons-secondaryHover bg-opacity-90 text-buttons-secondaryText",onClick:o,children:t("player.nextEpisode.cancel")}),s.jsxs(rs,{onClick:()=>p(),className:"bg-buttons-primary hover:bg-buttons-primaryHover text-buttons-primaryText flex justify-center items-center",children:[s.jsx(I,{className:"text-xl mr-1",icon:k.SKIP_EPISODE}),t("player.nextEpisode.next")]})]})})}function is(e){const[t,n]=d.useState(!1),r=x(o=>o.interface.isCasting),i=d.useRef(null),a=d.useCallback(o=>{const l=(o.getAttribute("style")??"").includes("inline");n(!l)},[n]);return d.useEffect(()=>{var c;const o=(c=i.current)==null?void 0:c.querySelector("google-cast-launcher");if(!o)return;const l=new MutationObserver(()=>{a(o)});return l.observe(o,{attributes:!0,attributeFilter:["style"]}),a(o),()=>{l.disconnect()}},[a]),s.jsx(te,{ref:i,className:[e.className??"","google-cast-button",r?"casting":"",t?"hidden":""].join(" "),icon:k.CASTING,onClick:o=>{const l=o.querySelector("google-cast-launcher");l&&l.click()}})}function Gu(){const{t:e}=C(),t=x(i=>i.mediaPlaying.isLoading),n=x(i=>i.display),r=(n==null?void 0:n.getType())==="casting";return t||!r?null:s.jsxs("div",{className:"flex flex-col items-center justify-center gap-4",children:[s.jsx("div",{className:"rounded-full bg-opacity-10 bg-video-buttonBackground p-3 brightness-100 grayscale",children:s.jsx(I,{icon:k.CASTING})}),s.jsx("p",{className:"text-center",children:e("player.casting.enabled")})]})}function qu(e,t){for(let n=0;n<t.length;n+=1)if(t.start(t.length-1-n)<e)return t.end(t.length-1-n);return 0}const Yu={1:{name:"MEDIA_ERR_ABORTED",key:"player.playbackError.errors.errorAborted"},2:{name:"MEDIA_ERR_NETWORK",key:"player.playbackError.errors.errorNetwork"},3:{name:"MEDIA_ERR_DECODE",key:"player.playbackError.errors.errorDecode"},4:{name:"MEDIA_ERR_SRC_NOT_SUPPORTED",key:"player.playbackError.errors.errorNotSupported"}};function Ju(e){const t=Yu[(e==null?void 0:e.code)??-1];return t||{name:"MEDIA_ERR_GENERIC",key:"player.playbackError.errors.errorGenericMedia"}}function je(e){const t=new URL(e),n=_().CDN_REPLACEMENTS;for(const[r,i]of n)if(t.hostname.endsWith(r))return t.hostname=i,t.port="",t.protocol="https://",t.toString();return e}function Er(){const e={};return{on(t,n){var r;e[t]||(e[t]=[]),(r=e[t])==null||r.push(n)},off(t,n){var r;e[t]=((r=e[t])==null?void 0:r.filter(i=>i!==n))??[]},emit(t,n){(e[t]??[]).forEach(r=>r(n))}}}const Ir={360:"360",1080:"1080",720:"720",480:"480"};function st(e){return Ir[e.height]??null}function Xu(e){const t=Object.entries(Ir).find(n=>n[1]===e);return t?+t[0]:null}function Zu(e){return e.map(t=>st(t)).filter(t=>!!t)}function Lr(){const{emit:e,on:t,off:n}=Er();let r=null,i=null,a=null,o=null,l=!1,c=!1,u=!1,m=0,b=!1,f=null,h=1;function g(){if(!i)return;const E=i.levels.map(O=>st(O)).filter(O=>!!O);e("qualities",E)}function y(){if(a&&tt(a)||!i)return;if(b)i.currentLevel=-1,i.loadLevel=-1;else{const E=Zu(i.levels),O=lr(E,{lastChosenQuality:f,automaticQuality:b});if(O){const U=i.levels.findIndex(ce=>ce.height===Xu(O));U!==-1&&(i.currentLevel=U,i.loadLevel=U)}}const w=st(i.levels[i.currentLevel]);e("changedquality",w)}function p(w,E){if(E.type==="hls"){if(tt(w)){w.src=je(E.url),w.currentTime=m;return}if(!ae.isSupported())throw new Error("HLS not supported");i||(i=new ae({maxBufferSize:500*1e3*1e3,fragLoadPolicy:{default:{maxLoadTimeMs:30*1e3,maxTimeToFirstByteMs:30*1e3,errorRetry:{maxNumRetry:2,retryDelayMs:1e3,maxRetryDelayMs:8e3},timeoutRetry:{maxNumRetry:3,maxRetryDelayMs:0,retryDelayMs:0}}}}),i.on(ae.Events.ERROR,(O,U)=>{console.error("HLS error",U),U.fatal&&e("error",{message:U.error.message,stackTrace:U.error.stack,errorName:U.error.name,type:"hls"})}),i.on(ae.Events.MANIFEST_LOADED,()=>{i&&(g(),y())}),i.on(ae.Events.LEVEL_SWITCHED,()=>{if(!i)return;const O=st(i.levels[i.currentLevel]);e("changedquality",O)})),i.attachMedia(w),i.loadSource(je(E.url)),w.currentTime=m;return}w.src=je(E.url),w.currentTime=m}function v(){!a||!r||(p(a,r),a.addEventListener("play",()=>{e("play",void 0),e("loading",!1)}),a.addEventListener("error",()=>{const w=(a==null?void 0:a.error)??null,E=Ju(w);e("error",{errorName:E.name,key:E.key,type:"htmlvideo"})}),a.addEventListener("playing",()=>e("play",void 0)),a.addEventListener("pause",()=>e("pause",void 0)),a.addEventListener("canplay",()=>e("loading",!1)),a.addEventListener("waiting",()=>e("loading",!0)),a.addEventListener("volumechange",()=>e("volumechange",a!=null&&a.muted?0:(a==null?void 0:a.volume)??0)),a.addEventListener("timeupdate",()=>e("time",(a==null?void 0:a.currentTime)??0)),a.addEventListener("loadedmetadata",()=>{(r==null?void 0:r.type)==="hls"&&a&&tt(a)&&(e("qualities",["unknown"]),e("changedquality","unknown")),e("duration",(a==null?void 0:a.duration)??0)}),a.addEventListener("progress",()=>{a&&e("buffered",qu(a.currentTime,a.buffered))}),a.addEventListener("webkitendfullscreen",()=>{l=!1,e("fullscreen",l),l||e("needstrack",!1)}),a.addEventListener("webkitplaybacktargetavailabilitychanged",w=>{w.availability==="available"&&e("canairplay",!0)}),a.addEventListener("ratechange",()=>{a&&e("playbackrate",a.playbackRate)}))}function j(){a&&(a.removeAttribute("src"),a.load()),i&&(i.destroy(),i=null)}function T(){j(),a&&(a=null)}function L(){l=!!document.fullscreenElement||!!document.webkitFullscreenElement,e("fullscreen",l),l||e("needstrack",!1)}return Y.addEventListener("fullscreenchange",L),{on:t,off:n,getType(){return"web"},destroy:()=>{T(),Y.removeEventListener("fullscreenchange",L)},load(w){w.source||j(),b=w.automaticQuality,f=w.preferredQuality,r=w.source,e("loading",!0),m=w.startAt,v()},changeQuality(w,E){(r==null?void 0:r.type)==="hls"&&(b=w,f=E,y())},processVideoElement(w){T(),a=w,v(),this.setVolume(h)},processContainerElement(w){o=w},setMeta(){},setCaption(){},pause(){a==null||a.pause()},play(){a==null||a.play()},setSeeking(w){if(w!==u){if(u=w,!w){c||this.play();return}c=(a==null?void 0:a.paused)??!0,this.pause()}},setTime(w){if(!a)return;let E=Math.min(w,a.duration);E=Math.max(0,E),!Number.isNaN(E)&&(e("time",E),a.currentTime=E)},async setVolume(w){let E=Math.min(w,1);if(E=Math.max(0,E),h=w,!a)return;a.muted=E===0,await ut()?a.volume=E:e("volumechange",E===0?0:1)},toggleFullscreen(){if(l){if(l=!1,e("fullscreen",l),e("needstrack",!1),!Y.fullscreenElement)return;Y.exitFullscreen();return}if(l=!0,e("fullscreen",l),!(!pr()||Y.fullscreenElement)){if(Nt()){o&&Y.requestFullscreen(o);return}xr()&&a&&(e("needstrack",!0),a.webkitEnterFullscreen())}},togglePictureInPicture(){if(a){if(yr()){const w=a;w.webkitSetPresentationMode(w.webkitPresentationMode==="picture-in-picture"?"inline":"picture-in-picture")}br()&&(a!==document.pictureInPictureElement?a.requestPictureInPicture():document.exitPictureInPicture())}},startAirplay(){const w=a;w&&w.webkitShowPlaybackTargetPicker&&w.webkitShowPlaybackTargetPicker()},setPlaybackRate(w){a&&(a.playbackRate=w)}}}function ed(e){const{emit:t,on:n,off:r}=Er();let i=!1,a=1,o=null,l=null,c=null,u=!1,m=!1,b=!1,f=0,h={title:"",type:P.MOVIE};function g(){var w;const L=async E=>{switch(E.field){case"volumeLevel":await ut()&&t("volumechange",E.value);break;case"currentTime":t("time",E.value);break;case"duration":t("duration",E.value??0);break;case"mediaInfo":E.value&&t("duration",E.value.duration??0);break;case"playerState":t("loading",E.value==="BUFFERING"),E.value==="PLAYING"?t("play",void 0):E.value==="PAUSED"&&t("pause",void 0),i=E.value==="PAUSED";break;case"isMuted":t("volumechange",E.value?1:0);break}};return(w=e.controller)==null||w.addEventListener(cast.framework.RemotePlayerEventType.ANY_CHANGE,L),()=>{var E;(E=e.controller)==null||E.removeEventListener(cast.framework.RemotePlayerEventType.ANY_CHANGE,L)}}function y(){var ce;if(!o){(ce=e.controller)==null||ce.stop();return}let L="video/mp4";o.type==="hls"&&(L="application/x-mpegurl");const w=new chrome.cast.media.GenericMediaMetadata;w.title=h.title;const E=new chrome.cast.media.MediaInfo("video",L);E.contentUrl=je(o.url),E.streamType=chrome.cast.media.StreamType.BUFFERED,E.metadata=w,E.customData={playbackRate:a};const O=new chrome.cast.media.LoadRequest(E);if(O.autoplay=!0,O.currentTime=f,o.type==="hls"){const Ee=chrome.cast.media,Ie=O.media;Ie.hlsSegmentFormat=Ee.HlsSegmentFormat.FMP4,Ie.hlsVideoSegmentFormat=Ee.HlsVideoSegmentFormat.FMP4}const U=e.instance.getCurrentSession();U==null||U.loadMedia(O)}function p(){!l||!o||y()}function v(){l&&(l=null)}function j(){u=!!document.fullscreenElement||!!document.webkitFullscreenElement,t("fullscreen",u),u||t("needstrack",!1)}Y.addEventListener("fullscreenchange",j);const T=g();return{on:n,off:r,getType(){return"casting"},destroy:()=>{T(),v(),Y.removeEventListener("fullscreenchange",j)},load(L){o=L.source,t("loading",!0),f=L.startAt,p()},changeQuality(){},setCaption(L){p()},processVideoElement(L){v(),l=L,p()},processContainerElement(L){c=L},setMeta(L){h=L,p()},pause(){i||(e.controller.playOrPause(),i=!0)},play(){i&&(e.controller.playOrPause(),i=!1)},setSeeking(L){if(L!==b){if(b=L,!L){m||this.play();return}m=i??!0,this.pause()}},setTime(L){if(!l)return;let w=Math.min(L,e.player.duration);w=Math.max(0,w),!Number.isNaN(w)&&(t("time",w),e.player.currentTime=w,e.controller.seek())},async setVolume(L){let w=Math.min(L,1);w=Math.max(0,w),await ut()?(e.player.volumeLevel=w,e.controller.setVolumeLevel(),t("volumechange",w)):t("volumechange",w===0?0:1)},toggleFullscreen(){if(u){if(u=!1,t("fullscreen",u),t("needstrack",!1),!Y.fullscreenElement)return;Y.exitFullscreen();return}u=!0,t("fullscreen",u),!(!pr()||Y.fullscreenElement)&&Nt()&&c&&Y.requestFullscreen(c)},togglePictureInPicture(){},startAirplay(){},setPlaybackRate(L){a=L,p()}}}const td="https://www.gstatic.com/cv/js/sender/v1/cast_sender.js?loadCastFramework=1",Tr=[];let Yt=null;function nd(e){Yt=e,Tr.forEach(t=>t(e))}function sd(e){if(Yt!==null)return e(Yt);Tr.push(e)}function rd(){if(window.__onGCastApiAvailable=t=>{nd(t)},!!!document.getElementById("chromecast-script")){const t=document.createElement("script");t.setAttribute("src",td),t.setAttribute("id","chromecast-script"),document.body.appendChild(t)}}function id(){const[e,t]=d.useState(null);return d.useEffect(()=>{sd(n=>t(n))},[]),e}function ad(){const e=x(v=>v.casting.setInstance),t=x(v=>v.casting.setController),n=x(v=>v.casting.setPlayer),r=x(v=>v.casting.setIsCasting),i=x(v=>v.interface.isCasting),a=x(v=>{var j;return(j=v.caption)==null?void 0:j.selected}),o=x(v=>v.setDisplay),l=x(v=>v.redisplaySource),c=id(),u=x(v=>v.display),m=x(v=>v.casting.controller),b=x(v=>v.casting.player),f=x(v=>v.casting.instance),h=x(v=>v.progress.time),g=x(v=>{var j;return(j=v.meta)==null?void 0:j.title}),y=x(v=>{var j;return(j=v.meta)==null?void 0:j.type}),p=d.useRef({controller:m,player:b,instance:f,time:h,metaTitle:g,metaType:y,caption:a});return d.useEffect(()=>{p.current={controller:m,player:b,instance:f,time:h,metaTitle:g,metaType:y,caption:a}},[m,b,f,h,g,y,a]),d.useEffect(()=>{if(i){if(p.current.controller&&p.current.instance&&p.current.player){const v=ed({controller:p.current.controller,instance:p.current.instance,player:p.current.player});v.setMeta({title:p.current.metaTitle??"",type:ot(p.current.metaType??"movie")}),v.setCaption(p.current.caption),o(v),l(p.current.time??0)}}else{const v=Lr();o(v),l(p.current.time??0)}},[i,o,l]),d.useEffect(()=>{u==null||u.setMeta({title:p.current.metaTitle??"",type:ot(p.current.metaType??"movie")})},[g,y,u]),d.useEffect(()=>{if(!c)return;const v=cast.framework.CastContext.getInstance();e(v),v.setOptions({receiverApplicationId:chrome.cast.media.DEFAULT_MEDIA_RECEIVER_APP_ID,autoJoinPolicy:chrome.cast.AutoJoinPolicy.ORIGIN_SCOPED});const j=new cast.framework.RemotePlayer;n(j);const T=new cast.framework.RemotePlayerController(j);t(T);function L(w){w.field==="isConnected"&&r(w.value)}return T.addEventListener(cast.framework.RemotePlayerEventType.IS_CONNECTED_CHANGED,L),()=>{T.removeEventListener(cast.framework.RemotePlayerEventType.IS_CONNECTED_CHANGED,L)}},[c,n,t,e,r]),null}function od(){var r,i;const{t:e}=C(),t=x(a=>a.meta);if(!t)return null;if(t.type!=="show")return s.jsx(oe,{children:s.jsx("title",{children:t.title})});const n=e("media.episodeDisplay",{season:(r=t.season)==null?void 0:r.number,episode:(i=t.episode)==null?void 0:i.number});return s.jsx(oe,{children:s.jsxs("title",{children:[t.title," - ",n]})})}function ld(){const e=B(""),t=x(g=>g.display),n=x(g=>g.progress),{isSeeking:r}=x(g=>g.interface),i=x(g=>g.mediaPlaying),a=x(g=>g.progress.time),{setVolume:o,toggleMute:l}=vr(),{toggleLastUsed:c}=kt(),u=Ks(g=>g.setShowVolume),[m,b]=d.useState(!1),f=d.useRef(),h=d.useRef({setShowVolume:u,setVolume:o,toggleMute:l,setIsRolling:b,toggleLastUsed:c,display:t,mediaPlaying:i,mediaProgress:n,isSeeking:r,isRolling:m,time:a,router:e});return d.useEffect(()=>{h.current={setShowVolume:u,setVolume:o,toggleMute:l,setIsRolling:b,toggleLastUsed:c,display:t,mediaPlaying:i,mediaProgress:n,isSeeking:r,isRolling:m,time:a,router:e}},[u,o,l,b,c,t,i,n,r,m,a,e]),d.useEffect(()=>{const g=y=>{var v,j,T,L,w,E,O,U,ce,Ee,Ie,Sn,Cn,En,In;if(y.target&&y.target.nodeName==="INPUT")return;const p=y.key;if(["ArrowUp","ArrowDown","m"].includes(p)&&(h.current.setShowVolume(!0),f.current&&clearTimeout(f.current),f.current=setTimeout(()=>{h.current.setShowVolume(!1)},3e3)),p==="ArrowUp"&&h.current.setVolume((((v=h.current.mediaPlaying)==null?void 0:v.volume)||0)+.15),p==="ArrowDown"&&h.current.setVolume((((j=h.current.mediaPlaying)==null?void 0:j.volume)||0)-.15),p==="m"&&h.current.toggleMute(),p===">"||p==="<"){const fe=[.25,.5,1,1.5,2];let Ct=fe.indexOf((T=h.current.mediaPlaying)==null?void 0:T.playbackRate);Ct===-1&&(Ct=fe.indexOf(1));const Wr=Ct+(p===">"?1:-1),Ln=fe[Wr];Ln&&((L=h.current.display)==null||L.setPlaybackRate(Ln))}if(p==="ArrowRight"&&((w=h.current.display)==null||w.setTime(h.current.time+5)),p==="ArrowLeft"&&((E=h.current.display)==null||E.setTime(h.current.time-5)),p==="j"&&((O=h.current.display)==null||O.setTime(h.current.time-10)),p==="l"&&((U=h.current.display)==null||U.setTime(h.current.time+10)),p==="."&&((ce=h.current.mediaPlaying)!=null&&ce.isPaused)&&((Ee=h.current.display)==null||Ee.setTime(h.current.time+1)),p===","&&((Ie=h.current.mediaPlaying)!=null&&Ie.isPaused)&&((Sn=h.current.display)==null||Sn.setTime(h.current.time-1)),p==="f"&&((Cn=h.current.display)==null||Cn.toggleFullscreen()),p===" "&&((En=h.current.display)==null||En[h.current.mediaPlaying.isPaused?"play":"pause"]()),p==="Escape"&&h.current.router.close(),p==="c"&&h.current.toggleLastUsed().catch(()=>{}),p==="r"){if(h.current.isRolling||y.ctrlKey||y.metaKey)return;h.current.setIsRolling(!0),(In=document.querySelector(".popout-location"))==null||In.classList.add("roll"),document.body.setAttribute("data-no-scroll","true"),setTimeout(()=>{var fe;(fe=document.querySelector(".popout-location"))==null||fe.classList.remove("roll"),document.body.removeAttribute("data-no-scroll"),h.current.setIsRolling(!1)},1e3)}};return window.addEventListener("keydown",g),()=>{window.removeEventListener("keydown",g)}},[]),null}function cd(){const e=x(r=>r.meta),t=x(r=>r.progress),n=x(r=>r.mediaPlaying);return d.useEffect(()=>(window.meta||(window.meta={}),e&&(window.meta.player={meta:{title:e.title,type:e.type,tmdbId:e.tmdbId,year:e.releaseYear,poster:e.poster},controls:{isPlaying:n.isPlaying,isLoading:n.isLoading},season:e.season?{number:e.season.number,tmdbId:e.season.tmdbId,title:e.season.title}:void 0,episode:e.episode?{number:e.episode.number,tmdbId:e.episode.tmdbId,title:e.episode.title}:void 0,progress:{time:t.time,duration:t.duration}}),()=>{window.meta&&delete window.meta.player}),[e,t,n]),null}function ud(){const e=x(l=>l.meta),t=x(l=>l.progress),n=H(l=>l.updateItem),r=x(l=>l.status),i=x(l=>l.mediaPlaying.hasPlayedOnce),a=d.useRef(null),o=d.useRef({updateItem:n,meta:e,progress:t,status:r,hasPlayedOnce:i});return d.useEffect(()=>{o.current.updateItem=n,o.current.meta=e,o.current.progress=t,o.current.status=r,o.current.hasPlayedOnce=i},[n,t,e,r,i]),ys(()=>{var u,m;const l=o.current;if(!l.progress||!l.meta||!l.updateItem||l.status!==R.PLAYING||!i)return;let c=!1;a.current?(((u=a.current)==null?void 0:u.duration)!==t.duration||((m=a.current)==null?void 0:m.watched)!==t.time)&&(c=!0):c=!0,a.current={duration:t.duration,watched:t.time},c&&l.updateItem({meta:l.meta,progress:a.current})},3e3),null}function dd(e){const t=[0,1];let n=.5,r=0;for(let i=0;i<e;i+=1){const a=1/n-1;for(let o=0;o<a-r;o+=1){const l=o*n*2;t.push(l+n)}r=a,n/=2}return t}class md{constructor(t){this.videoEl=null,this.canvasEl=null,this.hls=null,this.cb=t.addImage,this.interrupted=!1}start(t){if(gr)return!1;const n=document.createElement("video");n.setAttribute("muted","true");const r=document.createElement("canvas");if(this.hls=new ae,t.type==="mp4")n.src=je(t.url),n.crossOrigin="anonymous";else if(t.type==="hls")this.hls.attachMedia(n),this.hls.loadSource(je(t.url));else throw new Error("Invalid loadable source type");this.videoEl=n,this.canvasEl=r,this.begin().catch(i=>console.error(i))}destroy(){var t,n;this.interrupted=!0,this.videoEl=null,this.canvasEl=null,(t=this.hls)==null||t.detachMedia(),(n=this.hls)==null||n.destroy(),this.hls=null}async initVideo(){!this.videoEl||!this.canvasEl||(await new Promise((t,n)=>{var r,i;(r=this.videoEl)==null||r.addEventListener("loadedmetadata",t),(i=this.videoEl)==null||i.addEventListener("error",n)}),!(!this.videoEl||!this.canvasEl)&&(this.canvasEl.height=this.videoEl.videoHeight,this.canvasEl.width=this.videoEl.videoWidth))}async takeSnapshot(t){if(!this.videoEl||!this.canvasEl||(this.videoEl.currentTime=t,await new Promise(i=>{var o;const a=()=>{var l;(l=this.videoEl)==null||l.removeEventListener("seeked",a),i(null)};(o=this.videoEl)==null||o.addEventListener("seeked",a)}),!this.videoEl||!this.canvasEl))return;const n=this.canvasEl.getContext("2d");if(!n)return;n.drawImage(this.videoEl,0,0,this.canvasEl.width,this.canvasEl.height);const r=this.canvasEl.toDataURL();this.interrupted||r==="data:,"||!r||this.cb({at:t,data:r})}async begin(){const t=this.videoEl;if(!t)return;await this.initVideo();const n=dd(6);for(let r=0;r<n.length;r+=1){if(this.interrupted)return;await this.takeSnapshot(t.duration*n[r])}}}function hd(){var m,b;const e=x(f=>f.thumbnails.addImage),t=x(f=>f.status),n=x(f=>f.thumbnails.resetImages),r=x(f=>f.meta),i=x(f=>f.source),a=d.useRef(null),o=JSON.stringify(i),l=d.useCallback(()=>{let f=null;if(i&&(f=Wt(i,{automaticQuality:!1,lastChosenQuality:"360"})),a.current||t!==R.PLAYING||!f)return;n();const h=new md({addImage:e});a.current=h,h.start(f.stream)},[i,e,n,t]),c=d.useRef(l);d.useEffect(()=>{c.current=l},[l,t]),d.useEffect(()=>{c.current()},[o]),d.useEffect(()=>()=>{a.current&&(a.current.destroy(),a.current=null)},[]);const u=JSON.stringify({id:r==null?void 0:r.tmdbId,ep:(m=r==null?void 0:r.episode)==null?void 0:m.tmdbId,se:(b=r==null?void 0:r.season)==null?void 0:b.tmdbId});return d.useEffect(()=>{a.current&&(a.current.destroy(),a.current=null),c.current()},[u,o,t]),null}function fd(){const e=x(r=>r.display),t=x(r=>r.setDisplay),n=d.useRef(e);d.useEffect(()=>{n.current=e},[e]),d.useEffect(()=>{if(!n.current){const r=Lr();n.current=r,t(r)}return()=>{n.current&&(n.current=null,t(null))}},[t])}function Pr(){return x(t=>t.status)===R.PLAYING}function gd(e,t){const n=d.useRef(null),r=d.useMemo(()=>{n.current&&URL.revokeObjectURL(n.current);const i=e();return n.current=i,i},t);return d.useEffect(()=>()=>{n.current&&URL.revokeObjectURL(n.current)},[]),r}const xd=function(){const t=d.useRef(null),n=d.useRef(null),r=x(u=>u.display),i=x(u=>{var m;return(m=u.caption.selected)==null?void 0:m.srtData}),a=x(u=>u.caption.asTrack),o=x(u=>{var m;return(m=u.caption.selected)==null?void 0:m.language}),l=gd(()=>i?oc(i):null,[i]);d.useEffect(()=>{r&&t.current&&r.processVideoElement(t.current)},[r,t]),d.useEffect(()=>{n.current&&(n.current.track.mode="showing")},[n]);let c=null;return a&&l&&o&&(c=s.jsx("track",{label:"movie-web",kind:"subtitles",srcLang:o,src:l,default:!0})),s.jsx("video",{className:"absolute inset-0 w-full h-screen bg-black",autoPlay:!0,playsInline:!0,ref:t,children:c})},pd=xd;function bd(){const e=Pr();return fd(),mc(),e?s.jsx(pd,{}):null}function yd(e){const t=Pr(),n=x(b=>b.display),r=x(b=>b.mediaPlaying.isPaused),i=x(b=>b.updateInterfaceHovering),a=x(b=>b.interface.hovering),[o,l,c]=gi(()=>{i(X.NOT_HOVERING)},3e3);vs(()=>{l()});const u=d.useCallback(()=>{n==null||n.toggleFullscreen()},[n]),m=d.useCallback(b=>{if(b.pointerType==="mouse"){if(b.button!==0)return;r?n==null||n.play():n==null||n.pause();return}a!==X.MOBILE_TAPPED?(i(X.MOBILE_TAPPED),c()):(i(X.NOT_HOVERING),l())},[n,r,a,i,c,l]);return t?s.jsx("div",{className:S("absolute inset-0",{"absolute inset-0":!0,"cursor-none":!e.showingControls}),onDoubleClick:u,onPointerUp:m}):null}function vd(e){const t=d.useRef(null),n=x(i=>i.updateInterfaceHovering),r=x(i=>i.interface.hovering);d.useEffect(()=>{if(!e.current)return;const i=e.current;function a(l){l.pointerType==="mouse"&&(n(X.MOUSE_HOVER),t.current&&clearTimeout(t.current),t.current=setTimeout(()=>{n(X.NOT_HOVERING),t.current=null},3e3))}function o(l){l.pointerType==="mouse"&&(n(X.NOT_HOVERING),t.current&&clearTimeout(t.current))}return i.addEventListener("pointermove",a),i.addEventListener("pointerleave",o),()=>{i.removeEventListener("pointermove",a),i.removeEventListener("pointerleave",o)}},[e,r,n])}function jd(e){const t=d.useRef(null),n=x(r=>r.display);return vd(t),d.useEffect(()=>{n&&t.current&&n.processContainerElement(t.current)},[n,t]),s.jsx("div",{ref:t,children:s.jsx(gl,{children:s.jsx("div",{className:"h-screen select-none",children:e.children})})})}function wd(e){const t=d.useRef(e.onLoad);return d.useEffect(()=>{var n;(n=t.current)==null||n.call(t)},[]),s.jsx("div",{className:"relative",children:s.jsxs(jd,{children:[s.jsx(cd,{}),s.jsx(hd,{}),s.jsx(ad,{}),s.jsx(bd,{}),s.jsx(ud,{}),s.jsx(ld,{}),s.jsxs("div",{className:"relative h-screen overflow-hidden",children:[s.jsx(yd,{showingControls:e.showingControls}),s.jsx(od,{}),e.children]})]})})}const kd=function(t){const[n]=Rl(t.id),r={error:"bg-[#C93957] text-white"},i={error:k.CIRCLE_EXCLAMATION};return s.jsx("div",{ref:n,children:s.jsx("div",{className:[r[t.type],"flex items-center justify-center p-1"].join(" "),children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(I,{icon:i[t.type]}),s.jsx("div",{children:t.children})]})})})},Nd=kd;function Rr(e){const{t}=C(),n=ne(o=>o.isOnline),r=ne(o=>o.setLocation),i=ne(o=>o.location),a=e.location??null;return d.useEffect(()=>{if(a)return r(a),()=>{r(null)}},[r,a]),i!==a?null:s.jsx("div",{children:n?null:s.jsx(Nd,{id:"offline",type:"error",children:t("navigation.banner.offline")})})}function Sd(e){const t=jt("player"),n=x(r=>r.setHoveringAnyControls);return d.useEffect(()=>()=>{n(!1)},[n]),s.jsxs("div",{className:"w-full text-white",children:[s.jsx(Q,{animation:"fade",show:e.show,style:{top:`${t}px`},className:"pointer-events-none flex justify-end pb-32 bg-gradient-to-b from-black to-transparent [margin-bottom:env(safe-area-inset-bottom)] transition-opacity duration-200 absolute top-0 w-full"}),s.jsx("div",{className:"relative z-10",children:s.jsx(Rr,{location:"player"})}),s.jsx("div",{onMouseOver:()=>n(!0),onMouseOut:()=>n(!1),className:"pointer-events-auto pl-[calc(2rem+env(safe-area-inset-left))] pr-[calc(2rem+env(safe-area-inset-right))] pt-6 absolute top-0 w-full",style:{top:`${t}px`},children:s.jsx(Q,{animation:"slide-down",show:e.show,className:"text-white",children:e.children})})]})}function as(e){return s.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none [&>*]:pointer-events-auto",children:e.children})}function Cd(e){const t=x(n=>n.setHoveringAnyControls);return d.useEffect(()=>()=>{t(!1)},[t]),s.jsxs("div",{className:"w-full text-white",children:[s.jsx(Q,{animation:"fade",show:e.show,className:"pointer-events-none flex justify-end pt-32 bg-gradient-to-t from-black to-transparent transition-opacity duration-200 absolute bottom-0 w-full"}),s.jsx("div",{onMouseOver:()=>t(!0),onMouseOut:()=>t(!1),className:"pointer-events-auto z-10 pl-[calc(2rem+env(safe-area-inset-left))] pr-[calc(2rem+env(safe-area-inset-right))] pb-3 mb-[env(safe-area-inset-bottom)] absolute bottom-0 w-full",children:s.jsx(Q,{animation:"slide-up",show:e.show,children:e.children})})]})}function Ed(e){return s.jsx(Q,{animation:"fade",show:e.show,className:"absolute inset-0 w-full h-full bg-black bg-opacity-20 pointer-events-none"})}const Id=function(t){const{t:n}=C(),r=ee();return s.jsx("div",{className:"flex items-center",children:s.jsxs("button",{type:"button",onClick:()=>r(t.url),className:"py-1 -my-1 px-2 -mx-2 tabbable rounded-lg flex items-center cursor-pointer text-type-secondary hover:text-white transition-colors duration-200 font-medium",children:[s.jsx(I,{className:"mr-2",icon:k.ARROW_LEFT}),s.jsx("span",{className:"md:hidden",children:n("player.back.short")}),s.jsx("span",{className:"hidden md:block",children:n("player.back.default")})]})})},Ld=Id;function Td(e){const t=x(r=>r.setHoveringLeftControls),n=d.useCallback(()=>{t(!1)},[t]);return d.useEffect(()=>()=>{t(!1)},[t]),s.jsx("div",{className:S(["flex space-x-3 items-center",e.className]),onMouseLeave:n,children:e.children})}function Pd(e){return s.jsx(Q,{animation:"fade",show:e.show,className:"pointer-events-none",children:s.jsx("div",{className:S(["absolute inset-0 flex space-x-6 items-center justify-center pointer-events-none [&>*]:pointer-events-auto",e.className]),children:e.children})})}const Rd={i:"I"};function Ad(e){let{text:t,styling:n,overrideCasing:r}=e;const i=d.useMemo(()=>{let a=t;r&&t&&(a=t.slice(0,1)+t.slice(1).toLowerCase());const o=(a||"").split(" ").map(c=>Rd[c]??c).join(" ").replaceAll(/ i'/g," I'").replaceAll(/\r?\n/g,"<br />");return tc(o,{ALLOWED_TAGS:["c","b","i","u","span","ruby","rt","br"],ADD_TAGS:["v","lang"],ALLOWED_ATTR:["title","lang"]})},[t,r]);return s.jsx("p",{className:"pointer-events-none mb-1 select-none rounded px-4 py-1 text-center leading-normal [text-shadow:0_2px_4px_rgba(0,0,0,0.5)]",style:{color:n.color,fontSize:`${(1.5*n.size).toFixed(2)}em`,backgroundColor:`rgba(0,0,0,${n.backgroundOpacity.toFixed(2)})`},children:s.jsx("span",{dangerouslySetInnerHTML:{__html:i},dir:"ltr"})})}function Md(){const e=x(c=>c.progress.time),t=x(c=>{var u;return(u=c.caption.selected)==null?void 0:u.srtData}),n=x(c=>{var u;return(u=c.caption.selected)==null?void 0:u.language}),r=D(c=>c.styling),i=D(c=>c.overrideCasing),a=D(c=>c.delay),o=d.useMemo(()=>t?rc(t):[],[t,n]),l=d.useMemo(()=>o.filter(c=>{let{start:u,end:m}=c;return nc(u,m,a,e)}),[o,e,a]);return s.jsx("div",{children:l.map((c,u)=>{let{start:m,end:b,content:f}=c;return s.jsx(Ad,{text:f,styling:r,overrideCasing:i},sc(u,m,b))})})}function _d(e){const t=x(a=>a.caption.selected),n=x(a=>a.caption.asTrack),r=x(a=>a.display),i=(r==null?void 0:r.getType())==="casting";return n||!t||i?null:s.jsx(Q,{className:"absolute inset-0 pointer-events-none",animation:"slide-up",show:!0,children:s.jsx("div",{className:S(["text-white absolute flex w-full flex-col items-center transition-[bottom]",e.controlsShown?"bottom-24":"bottom-12"]),children:s.jsx(Md,{})})})}function Od(){const e=z(o=>o.addBookmark),t=z(o=>o.removeBookmark),n=z(o=>o.bookmarks),r=x(o=>o.meta),i=!!n[(r==null?void 0:r.tmdbId)??""],a=d.useCallback(()=>{r&&(i?t(r.tmdbId):e(r))},[i,r,e,t]);return s.jsx(te,{onClick:()=>a(),icon:i?k.BOOKMARK:k.BOOKMARK_OUTLINE,iconSizeClass:"text-base",className:"p-3"})}function Dd(){const e=x(m=>m.interface.hovering),t=x(m=>m.interface.lastHoveringState),n=x(m=>m.mediaPlaying.isPaused),r=x(m=>m.interface.hasOpenOverlay),i=x(m=>m.interface.isHoveringControls),a=t===X.MOBILE_TAPPED,l=e!==X.NOT_HOVERING||i&&!a||r,u=a?l:l||n;return{showTouchTargets:a&&u,showTargets:u}}function Bd(e){const{showTargets:t,showTouchTargets:n}=Dd(),r=x(o=>o.status),{isMobile:i}=St(),a=x(o=>o.mediaPlaying.isLoading);return s.jsxs(wd,{onLoad:e.onLoad,showingControls:t,children:[e.children,s.jsx(Ed,{show:t&&r===R.PLAYING}),s.jsx(Wu,{onChange:e.onMetaChange}),s.jsx(Bu,{}),s.jsx(_d,{controlsShown:t}),r===R.PLAYING?s.jsxs(s.Fragment,{children:[s.jsxs(as,{children:[s.jsx(wc,{}),s.jsx(kc,{})]}),s.jsx(as,{children:s.jsx(Gu,{})})]}):null,s.jsxs(Pd,{className:"text-white",show:n&&r===R.PLAYING,children:[s.jsx(Zn,{iconSizeClass:"text-3xl"}),s.jsx(Gn,{iconSizeClass:"text-5xl",className:a?"opacity-0":"opacity-100"}),s.jsx(Xn,{iconSizeClass:"text-3xl"})]}),s.jsx(Sd,{show:t,children:s.jsxs("div",{className:"grid grid-cols-[1fr,auto] xl:grid-cols-3 items-center",children:[s.jsxs("div",{className:"flex space-x-3 items-center",children:[s.jsx(Ld,{url:e.backUrl}),s.jsx("span",{className:"text mx-3 text-type-secondary",children:"/"}),s.jsx(Cc,{}),s.jsx(Od,{})]}),s.jsx("div",{className:"text-center hidden xl:flex justify-center items-center",children:s.jsx(Ec,{})}),s.jsx("div",{className:"hidden sm:flex items-center justify-end",children:s.jsx(Ce,{})}),s.jsx("div",{className:"flex sm:hidden items-center justify-end",children:r===R.PLAYING?s.jsxs(s.Fragment,{children:[s.jsx(ss,{}),s.jsx(is,{})]}):null})]})}),s.jsxs(Cd,{show:t,children:[s.jsx("div",{className:"flex items-center space-x-3",children:r===R.PLAYING?s.jsxs(s.Fragment,{children:[i?s.jsx(es,{short:!0}):null,s.jsx(jc,{})]}):null}),s.jsxs("div",{className:"hidden lg:flex justify-between",dir:"ltr",children:[s.jsx(Td,{children:r===R.PLAYING?s.jsxs(s.Fragment,{children:[s.jsx(Gn,{}),s.jsx(Zn,{}),s.jsx(Xn,{}),s.jsx(Sc,{}),s.jsx(es,{})]}):null}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(ns,{}),r===R.PLAYING?s.jsxs(s.Fragment,{children:[s.jsx(Yn,{}),s.jsx(ss,{}),s.jsx(is,{})]}):null,r===R.PLAYBACK_ERROR||r===R.PLAYING?s.jsx(ts,{}):null,s.jsx(qn,{})]})]}),s.jsxs("div",{className:"grid grid-cols-[2.5rem,1fr,2.5rem] gap-3 lg:hidden",children:[s.jsx("div",{}),s.jsxs("div",{className:"flex justify-center space-x-3",children:[r===R.PLAYING?s.jsx(Yn,{}):null,s.jsx(ns,{}),r===R.PLAYING?s.jsx(ts,{}):null]}),s.jsx("div",{children:s.jsx(qn,{})})]})]}),s.jsx(zu,{}),s.jsx(Ku,{controlsShowing:t,onChange:e.onMetaChange})]})}const Ud={releaseYear:2010,title:"Sintel",tmdbId:"",type:"movie"},os={hls:"https://bitdash-a.akamaihd.net/content/sintel/hls/playlist.m3u8",mp4:"https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/Sintel.mp4"},ls={hls:"HLS",mp4:"MP4"};function Fd(){const{status:e,playMedia:t,setMeta:n}=fr(),[r,i]=d.useState("mp4"),[a,o]=d.useState(""),l=d.useCallback((c,u)=>{let m;if(u==="hls")m={type:"hls",url:c};else if(u==="mp4")m={type:"file",qualities:{unknown:{type:"mp4",url:c}}};else throw new Error("Invalid type");n(Ud),t(m,[],null)},[t,n]);return s.jsxs(Bd,{backUrl:"/",children:[e===R.IDLE?s.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:s.jsx("div",{className:"w-full max-w-4xl rounded-xl bg-video-scraping-card p-10 m-4",children:s.jsxs("div",{className:"flex gap-16 flex-col lg:flex-row",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx(Oe,{children:"Custom stream"}),s.jsxs("div",{className:"grid grid-cols-[1fr,auto] gap-2 items-center",children:[s.jsx(pn,{className:"bg-video-context-flagBg rounded-md p-2 text-white w-full",value:a,onChange:o,placeholder:"https://..."}),s.jsx(Wl,{options:Object.entries(ls).map(c=>({id:c[0],name:c[1]})),selectedItem:{id:r,name:ls[r]},setSelectedItem:c=>i(c.id)})]}),s.jsx(M,{onClick:()=>l(a,r),children:"Start stream"})]}),s.jsxs("div",{className:"flex-1",children:[s.jsx(Oe,{children:"Preset tests"}),s.jsxs("div",{className:"grid grid-cols-[1fr,1fr] gap-2",children:[s.jsx(M,{onClick:()=>l(os.hls,"hls"),children:"HLS test"}),s.jsx(M,{onClick:()=>l(os.mp4,"mp4"),children:"MP4 test"})]})]})]})})}):null,e===R.PLAYBACK_ERROR?s.jsx(gc,{}):null]})}function Vd(){const{t:e}=C();return s.jsxs("div",{className:"relative flex flex-1 flex-col",children:[s.jsx(oe,{children:s.jsx("title",{children:e("notFound.badge")})}),s.jsx(fn,{}),s.jsx("div",{className:"flex h-full flex-1 flex-col items-center justify-center p-5 text-center",children:s.jsx(mn,{children:s.jsxs(dn,{children:[s.jsx(cn,{icon:k.EYE_SLASH,children:e("notFound.badge")}),s.jsx(Oe,{children:e("notFound.title")}),s.jsx(we,{children:e("notFound.message")}),s.jsx(M,{href:"/",theme:"purple",padding:"md:px-12 p-2.5",className:"mt-6",children:e("notFound.goHome")})]})})})]})}function $d(){return s.jsx(Vd,{})}function Hd(e,t){const[n,r]=d.useState(e);return d.useEffect(()=>{const i=setTimeout(()=>{r(e)},t);return()=>{clearTimeout(i)}},[e,t]),n}function cs(e){return e?decodeURIComponent(e):""}function Wd(){const e=ee(),t=Xt(),[n,r]=d.useState(cs(t.query));d.useEffect(()=>{r(cs(t.query))},[t.query]);const i=function(o){let l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(r(o),!!l){if(o.length===0){e("/",{replace:!0});return}e(ai("/browse/:query",{query:o}),{replace:!0})}};return[n,i,()=>{i(n,!0)}]}function zd(e){return s.jsxs(nr,{children:[s.jsx(fn,{bg:e.showBg}),e.children]})}function Ar(e){const{t}=C(),[n]=Zt(),r=d.useCallback(()=>{var i;(i=e.onEdit)==null||i.call(e,!e.editing)},[e]);return s.jsx("button",{type:"button",onClick:r,className:"flex h-12 items-center overflow-hidden rounded-full bg-background-secondary px-4 py-2 text-white transition-[background-color,transform] hover:bg-background-secondaryHover active:scale-105",children:s.jsx("span",{ref:n,children:e.editing?s.jsx("span",{className:"mx-4 whitespace-nowrap",children:t("home.mediaList.stopEditing")}):s.jsx(I,{icon:k.EDIT})})})}function wn(e){return s.jsx("div",{className:e.className,children:s.jsxs("div",{className:"mb-5 flex items-center",children:[s.jsxs("p",{className:"flex flex-1 items-center font-bold uppercase text-type-text",children:[e.icon?s.jsx("span",{className:"mr-2 text-xl",children:s.jsx(I,{icon:e.icon})}):null,e.title]}),e.children]})})}const kn=d.forwardRef((e,t)=>s.jsx("div",{className:"grid grid-cols-2 gap-6 sm:grid-cols-3 md:grid-cols-4",ref:t,children:e.children})),us={duration:0,watched:0};function Qd(e,t){return e-t<60*2}function Mr(e,t){return t<20}function Kd(e,t){return!(Mr(e,t)||Qd(e,t))}function _r(e){var r,i;if(e.type!=="show")return{show:Kd(((r=e.progress)==null?void 0:r.duration)??0,((i=e.progress)==null?void 0:i.watched)??0),progress:e.progress??us};const t=Object.values(e.episodes).sort((a,o)=>o.updatedAt-a.updatedAt).filter(a=>!Mr(a.progress.duration,a.progress.watched))[0],n=e.seasons[t==null?void 0:t.seasonId];return!t||!n?{show:!1,progress:us}:{season:n,episode:t,show:!0,progress:t.progress}}function Gd(e){return s.jsx("p",{className:`font-semibold text-type-secondary ${e.className||""}`,children:e.content.map((t,n)=>s.jsxs("span",{children:[n!==0?s.jsx("span",{className:"mx-[0.6em] text-[1em]",children:"●"}):null,t]},t))})}function qd(e){let{media:t,linkable:n,series:r,percentage:i,closable:a,onClose:o}=e;const{t:l}=C(),c=`${Math.round(i??0).toFixed(0)}%`,u=n&&!a,m=[l(`media.types.${t.type}`)];return t.year&&m.push(t.year.toFixed()),s.jsxs(Z.Base,{className:`group -m-3 mb-2 rounded-xl bg-background-main transition-colors duration-100 focus:relative focus:z-10 ${u?"hover:bg-mediaCard-hoverBackground tabbable":""}`,tabIndex:u?0:-1,onKeyUp:b=>b.key==="Enter"&&b.currentTarget.click(),children:[s.jsx(Z.Light,{flareSize:300,cssColorVar:"--colors-mediaCard-hoverAccent",backgroundClass:"bg-mediaCard-hoverBackground duration-100",className:S({"rounded-xl bg-background-main group-hover:opacity-100":u})}),s.jsxs(Z.Child,{className:`pointer-events-auto relative mb-2 p-3 transition-transform duration-100 ${u?"group-hover:scale-95":""}`,children:[s.jsxs("div",{className:S("relative mb-4 pb-[150%] w-full overflow-hidden rounded-xl bg-mediaCard-hoverBackground bg-cover bg-center transition-[border-radius] duration-100",{"group-hover:rounded-lg":!a}),style:{backgroundImage:t.poster?`url(${t.poster})`:void 0},children:[r?s.jsx("div",{className:["absolute right-2 top-2 rounded-md bg-mediaCard-badge px-2 py-1 transition-colors"].join(" "),children:s.jsx("p",{className:["text-center text-xs font-bold text-mediaCard-badgeText transition-colors",a?"":"group-hover:text-white"].join(" "),children:l("media.episodeDisplay",{season:r.season||1,episode:r.episode})})}):null,i!==void 0?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:`absolute inset-x-0 -bottom-px pb-1 h-12 bg-gradient-to-t from-mediaCard-shadow to-transparent transition-colors ${u?"group-hover:from-mediaCard-hoverShadow":""}`}),s.jsx("div",{className:`absolute inset-x-0 bottom-0 h-12 bg-gradient-to-t from-mediaCard-shadow to-transparent transition-colors ${u?"group-hover:from-mediaCard-hoverShadow":""}`}),s.jsx("div",{className:"absolute inset-x-0 bottom-0 p-3",children:s.jsx("div",{className:"relative h-1 overflow-hidden rounded-full bg-mediaCard-barColor",children:s.jsx("div",{className:"absolute inset-y-0 left-0 rounded-full bg-mediaCard-barFillColor",style:{width:c}})})})]}):null,s.jsx("div",{className:`absolute inset-0 flex items-center justify-center bg-mediaCard-badge bg-opacity-80 transition-opacity duration-200 ${a?"opacity-100":"pointer-events-none opacity-0"}`,children:s.jsx(ct,{clickable:!0,className:"text-2xl text-mediaCard-badgeText",onClick:()=>a&&(o==null?void 0:o()),icon:k.X})})]}),s.jsx("h1",{className:"mb-1 line-clamp-3 max-h-[4.5rem] text-ellipsis break-words font-bold text-white",children:s.jsx("span",{children:t.title})}),s.jsx(Gd,{className:"text-xs",content:m})]})]})}function Yd(e){const t=s.jsx(qd,{...e}),n=e.linkable&&!e.closable;let r=n?`/media/${encodeURIComponent(eo(e.media))}`:"#";return n&&e.series&&(e.series.season===0&&!e.series.episodeId?r+=`/${encodeURIComponent(e.series.seasonId)}`:r+=`/${encodeURIComponent(e.series.seasonId)}/${encodeURIComponent(e.series.episodeId)}`),e.linkable?s.jsx(en,{to:r,tabIndex:-1,className:S("tabbable",e.closable?"hover:cursor-default":""),children:t}):s.jsx("span",{children:t})}function Jd(e){var t,n,r,i;if(!(!e||!e.episode||!e.season))return{episode:(t=e.episode)==null?void 0:t.number,season:(n=e.season)==null?void 0:n.number,episodeId:(r=e.episode)==null?void 0:r.id,seasonId:(i=e.season)==null?void 0:i.id}}function Nn(e){const t=H(a=>a.items),n=d.useMemo(()=>t[e.media.id],[t,e.media]),r=d.useMemo(()=>n?_r(n):null,[n]),i=r!=null&&r.show?r.progress.watched/r.progress.duration*100:void 0;return s.jsx(Yd,{media:e.media,series:Jd(r),linkable:!0,percentage:i,onClose:e.onClose,closable:e.closable})}function Xd(){const{t:e}=C(),t=H(c=>c.items),n=z(c=>c.bookmarks),r=z(c=>c.removeBookmark),[i,a]=d.useState(!1),[o]=Zt(),l=d.useMemo(()=>{let c=[];return Object.entries(n).forEach(u=>{c.push({id:u[0],...u[1]})}),c=c.sort((u,m)=>{const b=n[u.id],f=n[m.id],h=t[u.id],g=t[m.id],y=Math.max(b.updatedAt,(h==null?void 0:h.updatedAt)??0);return Math.max(f.updatedAt,(g==null?void 0:g.updatedAt)??0)-y}),c},[n,t]);return l.length===0?null:s.jsxs("div",{children:[s.jsx(wn,{title:e("home.bookmarks.sectionTitle")||"Bookmarks",icon:k.BOOKMARK,children:s.jsx(Ar,{editing:i,onEdit:a})}),s.jsx(kn,{ref:o,children:l.map(c=>s.jsx(Nn,{media:c,closable:i,onClose:()=>r(c.id)},c.id))})]})}const Zd=d.forwardRef((e,t)=>{const[n,r]=d.useState(!1);function i(a){e.onChange(a,!1)}return s.jsxs(Z.Base,{className:S({"hover:flare-enabled group flex flex-col rounded-[28px] transition-colors sm:flex-row sm:items-center relative":!0,"bg-search-background":!n,"bg-search-focused":n}),children:[s.jsx(Z.Light,{flareSize:400,enabled:n,className:"rounded-[28px]",backgroundClass:S({"transition-colors":!0,"bg-search-background":!n,"bg-search-focused":n})}),s.jsxs(Z.Child,{className:"flex flex-1 flex-col",children:[s.jsx("div",{className:"pointer-events-none absolute bottom-0 left-5 top-0 flex max-h-14 items-center text-search-icon",children:s.jsx(I,{icon:k.SEARCH})}),s.jsx(pn,{ref:t,onUnFocus:()=>{r(!1),e.onUnFocus()},onFocus:()=>r(!0),onChange:a=>i(a),value:e.value,className:"w-full flex-1 bg-transparent px-4 py-4 pl-12 text-search-text placeholder-search-placeholder focus:outline-none sm:py-4 sm:pr-2",placeholder:e.placeholder})]})]})});function em(e){d.useEffect(()=>{const t=n=>{var r;if(n.key==="/"){if(document.activeElement&&document.activeElement.tagName.toLowerCase()==="input")return;n.preventDefault(),(r=e.current)==null||r.focus()}};return window.addEventListener("keydown",t),()=>{window.removeEventListener("keydown",t)}},[e])}function tm(e){return s.jsx("h1",{className:`text-2xl font-bold text-white sm:text-3xl md:text-4xl ${e.className??""}`,children:e.children})}const nm=()=>Math.floor(Math.random()*10)===0;function sm(){const{t:e}=C(),t=d.useMemo(()=>nm(),[]),n=d.useMemo(()=>Math.random(),[]);return{t:d.useCallback(i=>{const a=e(`${i}.default`)??"";if(!t)return a;const o=e(`${i}.extra`,{returnObjects:!0,defaultValue:a});return Array.isArray(o)?o.length===0?a:o[Math.floor(n*o.length)]:typeof o=="string"?o:a},[e,n,t])}}function rm(e){const t=e.getHours();return t<5?"night":t<12?"morning":t<19?"day":"night"}function im(e){let{setIsSticky:t,searchParams:n}=e;const{t:r}=sm(),{t:i}=C(),[a,o,l]=n,[,c]=d.useState(!1),u=jt(),m=d.useCallback(j=>{c(j),t(j)},[c,t]),{width:b}=xi(),f=16,[h,g]=d.useState(f);d.useEffect(()=>{b>1200?g(f):g(f+60)},[b]);const y=rm(new Date),p=r(`home.titles.${y}`),v=d.useRef(null);return em(v),s.jsx(yt,{children:s.jsxs("div",{className:"mt-44 space-y-16 text-center",children:[s.jsx("div",{className:"relative z-10 mb-16",children:s.jsx(tm,{className:"mx-auto max-w-md",children:p})}),s.jsx("div",{className:"relative h-20 z-30",children:s.jsx(pi,{topOffset:h*-1+u,stickyStyle:{paddingTop:`${h+u}px`},onFixedToggle:m,children:s.jsx(Zd,{ref:v,onChange:o,value:a,onUnFocus:l,placeholder:i("home.search.placeholder")??""})})})]})})}function am(){const{t:e}=C(),t=z(c=>c.bookmarks),n=H(c=>c.items),r=H(c=>c.removeItem),[i,a]=d.useState(!1),[o]=Zt(),l=d.useMemo(()=>{let c=[];return Object.entries(n).filter(u=>_r(u[1]).show).sort((u,m)=>m[1].updatedAt-u[1].updatedAt).forEach(u=>{c.push({id:u[0],...u[1]})}),c=c.filter(u=>!!!t[u.id]),c},[n,t]);return l.length===0?null:s.jsxs("div",{children:[s.jsx(wn,{title:e("home.continueWatching.sectionTitle"),icon:k.CLOCK,children:s.jsx(Ar,{editing:i,onEdit:a})}),s.jsx(kn,{ref:o,children:l.map(c=>s.jsx(Nn,{media:c,closable:i,onClose:()=>r(c.id)},c.id))})]})}function Or(){const{t:e}=C();return s.jsx(Ve,{className:"mb-24 mt-40",text:e("home.search.loading")??void 0})}function ds(e){const{t}=C(),n=e.failed?k.WARNING:k.EYE_SLASH;return s.jsxs("div",{className:"mb-24 mt-40  flex flex-col items-center justify-center space-y-3 text-center",children:[s.jsx(ct,{icon:n,className:`text-xl ${e.failed?"text-red-400":"text-type-logo"}`}),e.failed?null:s.jsx("div",{children:(e.results??0)>0?s.jsx("p",{children:t("home.search.allResults")}):s.jsx("p",{children:t("home.search.noResults")})}),e.failed?s.jsx("div",{children:s.jsx("p",{children:t("home.search.failed")})}):null]})}function om(e){let{searchQuery:t}=e;const{t:n}=C(),[r,i]=d.useState([]),[a,o]=se(l=>$s(l));return d.useEffect(()=>{async function l(c){const u=await o(c);u&&i(u)}t!==""&&l({searchQuery:t})},[t,o]),a.loading?s.jsx(Or,{}):a.error?s.jsx(ds,{failed:!0}):r?s.jsxs("div",{children:[r.length>0?s.jsxs("div",{children:[s.jsx(wn,{title:n("home.search.sectionTitle"),icon:k.SEARCH}),s.jsx(kn,{children:r.map(l=>s.jsx(Nn,{media:l},l.id.toString()))})]}):null,s.jsx(ds,{results:r.length})]}):null}function lm(e){const[t,n]=d.useState(!1),[r,i]=d.useState(!1),a=Hd(e,500);return d.useEffect(()=>{n(e!==""),i(e!=="")},[e]),d.useEffect(()=>{i(!1)},[a]),{loading:r,searching:t}}function ms(){const{t:e}=C(),[t,n]=d.useState(!1),r=Wd(),[i]=r,a=lm(i);return s.jsxs(zd,{showBg:t,children:[s.jsxs("div",{className:"mb-16 sm:mb-24",children:[s.jsx(oe,{children:s.jsx("title",{children:e("global.name")})}),s.jsx(im,{searchParams:r,setIsSticky:n})]}),s.jsx(er,{children:a.loading?s.jsx(Or,{}):a.searching?s.jsx(om,{searchQuery:i}):s.jsxs(s.Fragment,{children:[s.jsx(Xd,{}),s.jsx(am,{})]})})]})}function ze(e){return s.jsxs("div",{className:"flex flex-col items-center",children:[e.top?s.jsx("div",{className:"inline-block transform translate-y-1/2",children:e.top}):null,s.jsx("div",{className:"w-full rounded-xl bg-largeCard-background bg-opacity-50 max-w-[600px] mx-auto p-[3rem]",children:e.children})]})}function Qe(e){return s.jsx("div",{className:"flex flex-col items-center text-center mb-8",children:s.jsxs("div",{className:"flex flex-col items-center text-center max-w-[318px]",children:[e.icon?s.jsx("div",{className:"text-2xl mb-4 text-largeCard-icon",children:e.icon}):null,s.jsx("h2",{className:"text-xl text-white font-bold",children:e.title}),e.children?s.jsx("div",{className:"text-type-text mt-4",children:e.children}):null]})})}function Ke(e){return s.jsx("div",{className:"mt-12",children:s.jsx("div",{className:S("mx-auto",{"flex flex-row-reverse justify-between items-center":e.splitAlign,"flex max-w-xs flex-col-reverse gap-3":!e.splitAlign}),children:e.children})})}function Dr(e){const t=!!e.url,n=!!e.to,r=s.jsx("span",{className:"group mt-1 cursor-pointer font-bold text-type-link hover:text-type-linkHover active:scale-95",children:e.children});return t?s.jsx("a",{href:e.url,children:r}):n?s.jsx(en,{to:e.to??"",children:r}):s.jsx("span",{onClick:()=>e.onClick&&e.onClick(),children:r})}function mt(e){return s.jsxs("div",{className:"space-y-3",children:[e.label?s.jsx("p",{className:"font-bold text-white",children:e.label}):null,s.jsx(pn,{name:e.name,value:e.value,autoComplete:e.autoComplete,onChange:e.onChange,placeholder:e.placeholder,passwordToggleable:e.passwordToggleable,className:"w-full flex-1 bg-authentication-inputBg px-4 py-3 text-search-text focus:outline-none rounded-lg placeholder:text-gray-700"})]})}function cm(e){const[t,n]=d.useState(""),[r,i]=d.useState(""),{login:a,restore:o,importData:l}=Ne(),c=H(h=>h.items),u=z(h=>h.bookmarks),{t:m}=C(),[b,f]=se(async(h,g)=>{var v;if(!Vo(h))throw new Error(m("auth.login.validationError")??void 0);const y=g.trim();if(y.length===0)throw new Error(m("auth.login.deviceLengthError")??void 0);let p;try{p=await a({mnemonic:h,userData:{device:y}})}catch(j){throw j.status===401?new Error(m("auth.login.validationError")??void 0):j}await l(p,c,u),await o(p),(v=e.onLogin)==null||v.call(e)},[e,a,o,m]);return s.jsxs(ze,{top:s.jsx(Ce,{backgroundClass:"bg-[#161527]"}),children:[s.jsx(Qe,{title:m("auth.login.title"),children:m("auth.login.description")}),s.jsxs("div",{className:"space-y-4",children:[s.jsx(mt,{label:m("auth.login.passphraseLabel")??void 0,value:t,autoComplete:"username",name:"username",onChange:n,placeholder:m("auth.login.passphrasePlaceholder")??void 0,passwordToggleable:!0}),s.jsx(mt,{label:m("auth.deviceNameLabel")??void 0,value:r,onChange:i,placeholder:m("auth.deviceNamePlaceholder")??void 0}),b.error&&!b.loading?s.jsx("p",{className:"text-authentication-errorText",children:b.error.message}):null]}),s.jsx(Ke,{children:s.jsx(M,{theme:"purple",loading:b.loading,onClick:()=>f(t,r),children:m("auth.login.submit")})}),s.jsx("p",{className:"text-center mt-6",children:s.jsx(Me,{i18nKey:"auth.createAccount",children:s.jsx(Dr,{to:"/register",children:"."})})})]})}function um(){const e=ee();return s.jsxs(He,{children:[s.jsx(vt,{subpage:!0,k:"global.pages.login"}),s.jsx(cm,{onLogin:()=>{e("/")}})]})}const Br=["#0A54FF","#CF2E68","#F9DD7F","#7652DD","#2ECFA8"],hs=Br[0],dm=function(t){return s.jsxs("div",{className:"space-y-3",children:[t.label?s.jsx("p",{className:"font-bold text-white",children:t.label}):null,s.jsx("div",{className:"flex gap-3",children:Br.map(n=>s.jsx("button",{type:"button",tabIndex:0,className:S("w-full h-10 rounded flex justify-center items-center text-white pointer border-2 border-opacity-10 cursor-pointer",t.value===n?"border-white":"border-transparent"),onClick:()=>t.onInput(n),style:{backgroundColor:n},children:t.value===n?s.jsx(I,{icon:k.CHECKMARK}):null},n))})]})},fs=dm,Ur=[Le.USER_GROUP,Le.COUCH,Le.MOBILE,Le.TICKET,Le.HANDCUFFS],mm=Ur[0],hm=function(t){return s.jsxs("div",{className:"space-y-3",children:[t.label?s.jsx("p",{className:"font-bold text-white",children:t.label}):null,s.jsx("div",{className:"flex gap-3",children:Ur.map(n=>s.jsx("button",{type:"button",tabIndex:0,className:S("w-full h-10 rounded flex justify-center items-center text-white pointer border-2 border-opacity-10 cursor-pointer",t.value===n?"bg-buttons-purple border-white":"bg-authentication-inputBg border-transparent"),onClick:()=>t.onInput(n),children:s.jsx(js,{className:"text-xl",icon:n})},n))})]})},fm=hm;function gm(e){const[t,n]=d.useState(""),[r,i]=d.useState(hs),[a,o]=d.useState(hs),[l,c]=d.useState(mm),{t:u}=C(),[m,b]=d.useState(!1),f=d.useCallback(()=>{var g;b(!1);const h=t.trim();if(h.length===0){b(!0);return}(g=e.onNext)==null||g.call(e,{device:h,profile:{colorA:r,colorB:a,icon:l}})},[t,e,r,a,l]);return s.jsxs(ze,{children:[s.jsx(Qe,{icon:s.jsx(sr,{profile:{colorA:r,colorB:a,icon:l},iconClass:"text-3xl",sizeClass:"w-16 h-16"}),title:u("auth.register.information.title")??void 0,children:u("auth.register.information.header")}),s.jsxs("div",{className:"space-y-6",children:[s.jsx(mt,{label:u("auth.deviceNameLabel")??void 0,value:t,onChange:n,placeholder:u("auth.deviceNamePlaceholder")??void 0}),s.jsx(fs,{label:u("auth.register.information.color1"),value:r,onInput:i}),s.jsx(fs,{label:u("auth.register.information.color2"),value:a,onInput:o}),s.jsx(fm,{label:u("auth.register.information.icon"),value:l,onInput:c}),m?s.jsx("p",{className:"text-authentication-errorText",children:u("auth.login.deviceLengthError")}):null]}),s.jsx(Ke,{children:s.jsx(M,{theme:"purple",onClick:()=>f(),children:u("auth.register.information.next")})})]})}const xm=function(t){const{t:n}=C(),r=t.mnemonic.split(" "),[,i]=bi(),[a,o]=d.useState(!1),l=yi(),c=d.useRef();function u(){i(t.mnemonic),o(!0),c.current&&clearTimeout(c.current),c.current=setTimeout(()=>l()&&o(!1),500)}return s.jsxs("div",{className:"rounded-lg border border-authentication-border/50 ",children:[s.jsxs("div",{className:"px-4 py-2 flex justify-between border-b border-authentication-border/50",children:[s.jsx("p",{className:"font-bold text-sm text-white",children:n("auth.generate.passphraseFrameLabel")}),s.jsxs("button",{type:"button",className:"text-authentication-copyText hover:text-authentication-copyTextHover transition-colors flex gap-2 items-center cursor-pointer",onClick:()=>u(),children:[s.jsx(I,{icon:a?k.CHECKMARK:k.COPY,className:a?"text-xs":""}),s.jsx("span",{className:"text-sm",children:n("actions.copy")})]})]}),s.jsx("div",{className:"px-4 py-4 grid grid-cols-3 text-sm sm:text-base sm:grid-cols-4 gap-2",children:r.map((m,b)=>s.jsx("div",{className:"rounded-md py-2 bg-authentication-wordBackground text-white font-medium text-center",children:m},b))})]})},pm=xm;function bm(e){const t=d.useMemo(()=>$o(),[]),{t:n}=C();return s.jsxs(ze,{children:[s.jsx(Qe,{title:n("auth.generate.title"),icon:s.jsx(I,{icon:k.USER}),children:n("auth.generate.description")}),s.jsx(pm,{mnemonic:t}),s.jsx(Ke,{children:s.jsx(M,{theme:"purple",onClick:()=>{var r;return(r=e.onNext)==null?void 0:r.call(e,t)},children:n("auth.generate.next")})})]})}function ym(e){const t=ee(),n=he(),r=d.useMemo(()=>new URL(n).hostname,[n]),i=ht(()=>or(n),[n]),{t:a}=C();let o=s.jsxs(s.Fragment,{children:[s.jsx("h3",{className:"text-white font-bold text-lg",children:a("auth.trust.failed.title")}),s.jsx("p",{children:a("auth.trust.failed.text")})]});return i.loading&&(o=s.jsx(Ve,{})),i.value&&(o=s.jsxs(s.Fragment,{children:[s.jsx("h3",{className:"text-white font-bold text-lg",children:i.value.name}),i.value.description?s.jsx("p",{className:"text-center",children:i.value.description}):null]})),s.jsxs(ze,{children:[s.jsx(Qe,{title:a("auth.trust.title"),icon:s.jsx(I,{icon:k.CIRCLE_EXCLAMATION}),children:s.jsx(Me,{i18nKey:"auth.trust.host",values:{hostname:r},children:s.jsx("span",{className:"text-white"})})}),s.jsx("div",{className:"border border-authentication-border rounded-xl px-4 py-8 flex flex-col items-center space-y-2 my-8",children:o}),s.jsxs(Ke,{children:[s.jsx(M,{theme:"secondary",onClick:()=>t("/"),children:a("auth.trust.no")}),s.jsx(M,{theme:"purple",onClick:()=>{var l;return i.value&&((l=e.onNext)==null?void 0:l.call(e,i.value))},children:a("auth.trust.yes")})]}),s.jsx("p",{className:"text-center mt-6",children:s.jsx(Me,{i18nKey:"auth.hasAccount",children:s.jsx(Dr,{to:"/login",children:"."})})})]})}function vm(e){const[t,n]=d.useState(""),{register:r,restore:i,importData:a}=Ne(),o=H(p=>p.items),l=z(p=>p.bookmarks),c=Fe(p=>p.language),u=D(p=>p.lastSelectedLanguage),m=ln(p=>p.theme),b=he(),{t:f}=C(),{executeRecaptcha:h}=vi(),[g,y]=se(async p=>{var T;if(!e.mnemonic||!e.userData)throw new Error(f("auth.verify.invalidData")??void 0);let v;if(e.hasCaptcha&&(v=h?await h():void 0,!v))throw new Error(f("auth.verify.recaptchaFailed")??void 0);if(p!==e.mnemonic)throw new Error(f("auth.verify.noMatch")??void 0);const j=await r({mnemonic:p,userData:e.userData,recaptchaToken:v});await a(j,o,l),await qs(b,j,{applicationLanguage:c,defaultSubtitleLanguage:u??void 0,applicationTheme:m??void 0,proxyUrls:void 0}),await i(j),(T=e.onNext)==null||T.call(e)},[e,r,i]);return s.jsx(ze,{children:s.jsxs("form",{children:[s.jsx(Qe,{icon:s.jsx(I,{icon:k.CIRCLE_CHECK}),title:f("auth.verify.title"),children:f("auth.verify.description")}),s.jsx(mt,{label:f("auth.verify.passphraseLabel")??void 0,autoComplete:"username",name:"username",value:t,onChange:n,passwordToggleable:!0}),g.error?s.jsx("p",{className:"mt-3 text-authentication-errorText",children:g.error.message}):null,s.jsx(Ke,{children:s.jsx(M,{theme:"purple",loading:g.loading,onClick:()=>y(t),children:f("auth.verify.register")})})]})})}function jm(e){return e.siteKey?s.jsx(ji,{reCaptchaKey:e.siteKey,children:e.children}):e.children}function wm(){const e=ee(),[t,n]=d.useState(0),[r,i]=d.useState(null),[a,o]=d.useState(null),[l,c]=d.useState(null);return s.jsx(jm,{siteKey:l,children:s.jsxs(He,{children:[s.jsx(vt,{subpage:!0,k:"global.pages.register"}),t===0?s.jsx(ym,{onNext:u=>{c(u.hasCaptcha&&u.captchaClientKey?u.captchaClientKey:null),n(1)}}):null,t===1?s.jsx(bm,{onNext:u=>{i(u),n(2)}}):null,t===2?s.jsx(gm,{onNext:u=>{o(u),n(3)}}):null,t===3?s.jsx(vm,{hasCaptcha:!!l,mnemonic:r,userData:a,onNext:()=>{e("/")}}):null]})})}function km(e){const t=jt(),n=ne(r=>r.location);return s.jsxs("div",{children:[s.jsx("div",{className:"fixed inset-x-0 z-[1000]",children:s.jsx(Rr,{})}),s.jsx("div",{style:{paddingTop:n===null?`${t}px`:"0px"},className:"flex min-h-screen flex-col",children:e.children})]})}const Fr=G(q(e=>({routes:[],registerRoute(t){e(n=>{n.routes.push(t)})}})));function Nm(){const e=De(),t=Fr(n=>n.registerRoute);d.useEffect(()=>{t({path:e.pathname})},[e.pathname,t]),vs(()=>{t({path:e.pathname})})}function oh(){const e=Fr(r=>r.routes),t=De();return d.useMemo(()=>{const r=[...e];r.reverse();const i=r.find(a=>!a.path.startsWith("/media")&&t.pathname!==a.path&&!a.path.startsWith("/s/"));return(i==null?void 0:i.path)??"/"},[e,t])}const Sm=d.lazy(()=>Be(()=>import("./DeveloperPage-nYTltjkG.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9])));d.lazy(()=>Be(()=>import("./TestView-8_1Wosze.js"),__vite__mapDeps([10,1,2,3,4,8,5,6,7,9])));const Jt=bs(()=>Be(()=>import("./PlayerView-p4vQZuIR.js"),__vite__mapDeps([11,1,2,3,5,6,7,4,8,9]))),Vr=bs(()=>Be(()=>import("./Settings-twVpYsqk.js"),__vite__mapDeps([12,1,2,3,4,5,6,7,9,8])));Jt.preload();Vr.preload();function gs(e){let{children:t}=e;const n=De(),r=ee();return d.useEffect(()=>{const i=n.pathname;Ft(i)&&oo(n.pathname).then(a=>{r(a??"/",{replace:!0})})},[n.pathname,r]),Ft(n.pathname)?null:t}function Cm(){const{query:e}=Xt(),t=ee();return d.useEffect(()=>{e?so(e).then(n=>{t(n??"/",{replace:!0})}):t("/",{replace:!0})},[e,t]),null}function Em(){const{query:e}=Xt(),t=ee();return d.useEffect(()=>{e?t(`/browse/${e}`,{replace:!0}):t("/",{replace:!0})},[e,t]),null}function Im(){return Nm(),_l(),s.jsxs(km,{children:[s.jsx(Mo,{}),s.jsxs(oi,{children:[s.jsx(V,{path:"/s/:query",element:s.jsx(Cm,{})}),s.jsx(V,{path:"/search/:type",element:s.jsx(li,{to:"/browse"})}),s.jsx(V,{path:"/search/:type/:query?",element:s.jsx(Em,{})}),s.jsx(V,{path:"/media/:media",element:s.jsx(gs,{children:s.jsx(d.Suspense,{fallback:null,children:s.jsx(Jt,{})})})}),s.jsx(V,{path:"/media/:media/:season/:episode",element:s.jsx(gs,{children:s.jsx(d.Suspense,{fallback:null,children:s.jsx(Jt,{})})})}),s.jsx(V,{path:"/browse/:query?",element:s.jsx(ms,{})}),s.jsx(V,{path:"/",element:s.jsx(ms,{})}),s.jsx(V,{path:"/register",element:s.jsx(wm,{})}),s.jsx(V,{path:"/login",element:s.jsx(um,{})}),s.jsx(V,{path:"/about",element:s.jsx(Bl,{})}),tr()?s.jsx(V,{path:"/dmca",element:s.jsx(wl,{})}):null,s.jsx(V,{path:"/settings",element:s.jsx(d.Suspense,{fallback:null,children:s.jsx(Vr,{})})}),s.jsx(V,{path:"/admin",element:s.jsx(Hl,{})}),s.jsx(V,{path:"/dev",element:s.jsx(Sm,{})}),s.jsx(V,{path:"/dev/video",element:s.jsx(Fd,{})}),null,s.jsx(V,{path:"*",element:s.jsx($d,{})})]})]})}const Lm=5*1e3;async function Tm(e,t,n,r){for(const i of e)if(t(i.id),!!r)try{if(i.action==="delete"){await Uo(n,r,i.tmdbId);continue}if(i.action==="add"){await Bo(n,r,{meta:{poster:i.poster,title:i.title??"",type:i.type??"",year:i.year??NaN},tmdbId:i.tmdbId});continue}}catch(a){console.error(`Failed to sync bookmark: ${i.tmdbId} - ${i.action}`,a)}}function Pm(){const e=z(r=>r.clearUpdateQueue),t=z(r=>r.removeUpdateItem),n=he();return d.useEffect(()=>{e()},[e]),d.useEffect(()=>{const r=setInterval(()=>{(async()=>{const i=z.getState(),a=F.getState();await Tm(i.updateQueue,t,n,a.account)})()},Lm);return()=>{clearInterval(r)}},[t,n]),null}const Rm=5*1e3;async function Am(e,t,n,r){for(const i of e)if(t(i.id),!!r)try{if(i.action==="delete"){await Jo(n,r,i.tmdbId,i.seasonId,i.episodeId);continue}if(i.action==="upsert"){await Yo(n,r,Go(i));continue}}catch(a){console.error(`Failed to sync progress: ${i.tmdbId} - ${i.action}`,a)}}function Mm(){const e=H(r=>r.clearUpdateQueue),t=H(r=>r.removeUpdateItem),n=he();return d.useEffect(()=>{e()},[e]),d.useEffect(()=>{const r=setInterval(()=>{(async()=>{const i=H.getState(),a=F.getState();await Am(i.updateQueue,t,n,a.account)})()},Rm);return()=>{clearInterval(r)}},[t,n]),null}const _m=5*1e3;function Om(){const e=D(n=>n.importSubtitleLanguage),t=he();return d.useEffect(()=>{const n=setInterval(()=>{(async()=>{const r=D.getState(),i=F.getState();r.lastSync.lastSelectedLanguage!==r.lastSelectedLanguage&&i.account&&r.lastSelectedLanguage&&(await qs(t,i.account,{defaultSubtitleLanguage:r.lastSelectedLanguage}),e(r.lastSelectedLanguage))})()},_m);return()=>{clearInterval(n)}},[e,t]),null}rd();function $r(e){const t={user:"screens.loadingUser",lazy:"screens.loadingApp"},{t:n}=C();return s.jsx(ar,{iconSlot:s.jsx(Ve,{}),children:n(t[e.type]??"unknown.translation")})}function Hr(e){const{t}=C(),{logout:n}=Ne(),r=F(o=>o.setBackendUrl),i=d.useCallback(()=>{r(null),location.reload()},[r]),a=d.useCallback(()=>{n().then(()=>{location.reload()})},[n]);return s.jsxs(ar,{iconSlot:s.jsx(I,{className:"text-type-danger text-2xl",icon:k.WARNING}),children:[e.children,e.showResetButton?s.jsx("div",{className:"mt-6",children:s.jsx(M,{theme:"secondary",onClick:i,children:t("screens.loadingUserError.reset")})}):null,e.showLogoutButton?s.jsx("div",{className:"mt-6",children:s.jsx(M,{theme:"secondary",onClick:a,children:t("screens.loadingUserError.logout")})}):null]})}function Dm(){const e=cl(),t=_().BACKEND_URL,n=he(),{t:r}=C(),i=t!==n;return e.loading?s.jsx($r,{type:"user"}):e.error?s.jsx(Hr,{showResetButton:i,showLogoutButton:!i,children:r(i?"screens.loadingUserError.textWithReset":"screens.loadingUserError.text")}):s.jsx(Im,{})}function Bm(){const e=ht(async()=>{Qs(Fe.getState().language),await ja()},[]),{t}=C();return e.loading?s.jsx(Ml,{}):e.error?s.jsx(Hr,{children:t("screens.migration.failed")}):s.jsx(Dm,{})}function Um(e){return _().NORMAL_ROUTER?s.jsx(Ni,{children:e.children}):s.jsx(Si,{children:e.children})}const Fm=document.getElementById("root"),Vm=wi(Fm);Vm.render(s.jsx(d.StrictMode,{children:s.jsxs(jl,{children:[s.jsx(Is,{}),s.jsx(ki,{children:s.jsx(d.Suspense,{fallback:s.jsx($r,{type:"lazy"}),children:s.jsxs(al,{applyGlobal:!0,children:[s.jsx(Mm,{}),s.jsx(Pm,{}),s.jsx(Om,{}),s.jsx(Um,{children:s.jsx(Bm,{})})]})})})]})}));export{pu as $,R as A,M as B,gc as C,he as D,mn as E,F,ol as G,rh as H,cn as I,$e as J,ih as K,Ve as L,P as M,fn as N,xl as O,fc as P,ah as Q,we as R,sr as S,yt as T,fs as U,fm as V,Ne as W,mt as X,un as Y,At as Z,N as _,Oe as a,gu as a0,Ad as a1,jn as a2,gn as a3,Gs as a4,on as a5,el as a6,St as a7,or as a8,eh as a9,Wl as aa,th as ab,ln as ac,Fe as ad,D as ae,qs as af,Wn as ag,nh as ah,sh as ai,He as aj,vt as ak,er as al,Ut as b,dn as c,Zm as d,_ as e,Xm as f,As as g,Ga as h,yl as i,Q as j,Ot as k,gt as l,_t as m,wt as n,Cs as o,Dt as p,Ym as q,hn as r,Jm as s,fr as t,Xs as u,Sr as v,oh as w,Gt as x,zt as y,Bd as z};
//# sourceMappingURL=index-IAGILn_n.js.map
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/DeveloperPage-nYTltjkG.js","assets/vendor-Kgd_Cf86.js","assets/auth-PrcDRVv8.js","assets/caption-parsing-i_itjgoj.js","assets/react-dom-AiR1YAI4.js","assets/Icons-z5ih0VS5.js","assets/language-db-SLM_mCil.js","assets/Icons-RhSHCi37.css","assets/locales-Uh0OzjGf.js","assets/hls-zqvr_1ex.js","assets/TestView-8_1Wosze.js","assets/PlayerView-p4vQZuIR.js","assets/Settings-twVpYsqk.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}